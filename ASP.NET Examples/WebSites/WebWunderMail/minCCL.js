function getlowcomp(b){if(b>0){var a=Math.floor(b/2),c=a.toString(16);if(c.length<2){return"0"+c}return c}return"00"}function gethighcomp(b){if(b<255){var a=b+Math.floor(((255-b)/2));if(a<=16){return"0"+a.toString(16)}return a.toString(16)}return"FF"}function canvasGetOffsetLeft(a){var b=0;if(a.offsetParent){do{b+=((parseInt(a.offsetLeft)>=0||parseInt(a.offsetLeft)<0)&&parseInt(a.offsetLeft).toString()==a.offsetLeft.toString()?a.offsetLeft:0)}while(a=a.offsetParent);return b}}function canvasGetOffsetTop(b){var a=0;if(b.offsetParent){do{a+=((parseInt(b.offsetTop)>=0||parseInt(b.offsetTop)<0)&&parseInt(b.offsetTop).toString()==b.offsetTop.toString()?b.offsetTop:0)}while(b=b.offsetParent);return a}}function drawEllipse(m,j,i,k,d){var g=0.5522848;var c=(k/2)*g,a=(d/2)*g,l=j+k,f=i+d,e=j+k/2,b=i+d/2;m.beginPath();m.moveTo(j,b);m.bezierCurveTo(j,b-a,e-c,i,e,i);m.bezierCurveTo(e+c,i,l,b-a,l,b);m.bezierCurveTo(l,b+a,e+c,f,e,f);m.bezierCurveTo(e-c,f,j,b+a,j,b);m.closePath()}var canvases=new Array();var ctxs=new Array();var windows=new Array();var windowCount=0;var highestDepth=0;var clickFunctions=new Array();var doubleClickFunctions=new Array();var dragFunctions=new Array();var dragEndFunctions=new Array();var dragEnterFunctions=new Array();var dragLeaveFunctions=new Array();var dragOverFunctions=new Array();var dragStartFunctions=new Array();var dropFunctions=new Array();var mouseDownFunctions=new Array();var mouseMoveFunctions=new Array();var mouseOutFunctions=new Array();var mouseOverFunctions=new Array();var mouseUpFunctions=new Array();var mouseWheelFunctions=new Array();var scrollFunctions=new Array();var windowDrawFunctions=new Array();var windowIdWithFocus=new Array();var modalWindows=new Array();var hiddenWindows=new Array();var gotFocusFunctions=new Array();var lostFocusFunctions=new Array();var keyPressFunctions=new Array();var keyDownFunctions=new Array();var doingClickEvent=0;var doingMouseUp=0;var doingMouseDown=0;var doingEventForWindowID=-1;var intervalID=-1;var windowWithAnimationCount=new Array();var suspendDraw=0;var sessionID=null;var donotredaw=null;function animatedDraw(){for(var a=0;a<windowWithAnimationCount.length;a++){var b=getWindowProps(windowWithAnimationCount[a].CanvasID,windowWithAnimationCount[a].WindowID);if(b){invalidateRect(windowWithAnimationCount[a].CanvasID,null,b.X,b.Y,b.Width,b.Height)}}}function registerAnimatedWindow(c,a){for(var b=0;b<windowWithAnimationCount.length;b++){if(windowWithAnimationCount[b].CanvasID==c&&windowWithAnimationCount[b].WindowID==a){if(intervalID==-1){intervalID=setInterval(animatedDraw,20)}return}}windowWithAnimationCount.push({CanvasID:c,WindowID:a});intervalID=setInterval(animatedDraw,20)}function unregisterAnimatedWindow(d,a){for(var b=0;b<windowWithAnimationCount.length;b++){if(windowWithAnimationCount[b].CanvasID==d&&windowWithAnimationCount[b].WindowID==a){windowWithAnimationCount.splice(b,1);break}}var c=0;for(var b=0;b<windowWithAnimationCount.length;b++){if(windowWithAnimationCount[b].CanvasID==d){c=1;break}}if(!c){clearInterval(intervalID)}}function doesWindowHaveFocus(c,a){for(var b=0;b<windowIdWithFocus.length;b++){if(windowIdWithFocus[b][0]==c&&windowIdWithFocus[b][1]==a){return 1}}return 0}function correctEvent(b,c){c=c||window.event;var a=document.getElementById(b);if(c.pageX||c.pageY){c.calcX=c.pageX-canvasGetOffsetLeft(a);c.calcY=c.pageY-canvasGetOffsetTop(a)}else{if(c.clientX||c.clientY){c.calcX=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-canvasGetOffsetLeft(a);c.calcY=c.clientY+document.body.scrollTop+document.documentElement.scrollTop-canvasGetOffsetTop(a)}}return c}function pointEvent(j,v,A,a,c){A=correctEvent(v,A);var m=A.calcX;var l=A.calcY;var g=0;var C=new Array();var h=0;for(var B=0;B<=highestDepth;B++){for(var t=0;t<windows.length;t++){if(windows[t].ParentWindowID==a&&checkIfModalWindow(v,windows[t].WindowCount)==1&&checkIfHiddenWindow(v,windows[t].WindowCount)==0&&windows[t].CanvasID==v&&windows[t].Depth==B&&m>=windows[t].X&&m<=windows[t].X+windows[t].Width&&l>=windows[t].Y&&l<=windows[t].Y+windows[t].Height){doingEventForWindowID=windows[t].WindowCount;if(doingClickEvent==1||doingMouseUp==1||doingMouseDown==1){var n=0;g=1;for(var s=0;s<windowIdWithFocus.length;s++){if(windowIdWithFocus[s][0]==v&&windowIdWithFocus[s][1]!=windows[t].WindowCount&&windowIdWithFocus[s][1]!=-1){n=1;for(var z=0;z<lostFocusFunctions.length;z++){if(lostFocusFunctions[z][0]==v&&lostFocusFunctions[z][1]==windowIdWithFocus[s][1]&&lostFocusFunctions[z][1]!=windows[t].WindowCount){lostFocusFunctions[z][2](v,windowIdWithFocus[s][1]);if(!donotredaw){C.push(lostFocusFunctions[z][1])}}}windowIdWithFocus[s][1]=windows[t].WindowCount;for(var z=0;z<gotFocusFunctions.length;z++){if(gotFocusFunctions[z][0]==v&&gotFocusFunctions[z][1]==windowIdWithFocus[s][1]){gotFocusFunctions[z][2](v,windowIdWithFocus[s][1]);if(!donotredaw){C.push(gotFocusFunctions[z][1])}}}h=1}else{if(windowIdWithFocus[s][0]==v&&windowIdWithFocus[s][1]==windows[t].WindowCount){n=1}}}if(n==0){setFocusToWindowID(v,windows[t].WindowCount);for(var z=0;z<gotFocusFunctions.length;z++){if(gotFocusFunctions[z][0]==v&&gotFocusFunctions[z][1]==windows[t].WindowCount&&windowIdWithFocus[s][1]!=-1){gotFocusFunctions[z][2](v,windows[t].WindowCount);if(!donotredaw){C.push(gotFocusFunctions[z][1])}}}h=1}}for(var o=0;o<j.length;o++){if(j[o][0]==windows[t].WindowCount){if(windows[t].ChildWindowIDs&&windows[t].ChildWindowIDs.length>0){if(pointEvent(j,v,A,windows[t].WindowCount,c)!=1){j[o][1](v,windows[t].WindowCount,A)}}else{j[o][1](v,windows[t].WindowCount,A)}if(!donotredaw&&windows[t]){invalidateRect(v,null,windows[t].X,windows[t].Y,windows[t].Width,windows[t].Height);if(windows[t].ControlType=="ScrollBar"){var b=getScrollBarProps(v,windows[t].WindowCount);var r=getWindowProps(v,b.OwnedByWindowID);if(r){invalidateRect(v,null,r.X,r.Y,r.Width,r.Height);if(b.DrawFunction){b.DrawFunction(v,windows[t].WindowCount)}else{drawScrollBar(v,windows[t].WindowCount)}}}}if(windows[t]&&windows[t].ControlType!="TextBox"&&c!=1){if(A.preventDefault){A.preventDefault()}A.returnValue=false}}}return 1}}}for(var B=0;B<=highestDepth;B++){for(var t=0;t<windows.length;t++){if(windows[t].ParentWindowID==a&&checkIfModalWindow(v,windows[t].WindowCount)==0&&checkIfHiddenWindow(v,windows[t].WindowCount)==0&&windows[t].CanvasID==v&&windows[t].Depth==B&&m>=windows[t].X&&m<=windows[t].X+windows[t].Width&&l>=windows[t].Y&&l<=windows[t].Y+windows[t].Height){doingEventForWindowID=windows[t].WindowCount;if(doingClickEvent==1||doingMouseUp==1||doingMouseDown==1){var n=0;g=1;for(var s=0;s<windowIdWithFocus.length;s++){if(windowIdWithFocus[s][0]==v&&windowIdWithFocus[s][1]!=windows[t].WindowCount&&windowIdWithFocus[s][1]!=-1){n=1;for(var z=0;z<lostFocusFunctions.length;z++){if(lostFocusFunctions[z][0]==v&&lostFocusFunctions[z][1]==windowIdWithFocus[s][1]&&lostFocusFunctions[z][1]!=windows[t].WindowCount){lostFocusFunctions[z][2](v,windowIdWithFocus[s][1]);if(!donotredaw){C.push(lostFocusFunctions[z][1])}}}windowIdWithFocus[s][1]=windows[t].WindowCount;for(var z=0;z<gotFocusFunctions.length;z++){if(gotFocusFunctions[z][0]==v&&gotFocusFunctions[z][1]==windowIdWithFocus[s][1]){gotFocusFunctions[z][2](v,windowIdWithFocus[s][1]);if(!donotredaw){C.push(gotFocusFunctions[z][1])}}}h=1}else{if(windowIdWithFocus[s][0]==v&&windowIdWithFocus[s][1]==windows[t].WindowCount&&windowIdWithFocus[s][1]!=-1){n=1}}}if(n==0){setFocusToWindowID(v,windows[t].WindowCount);for(var z=0;z<gotFocusFunctions.length;z++){if(gotFocusFunctions[z][0]==v&&gotFocusFunctions[z][1]==windows[t].WindowCount){gotFocusFunctions[z][2](v,windows[t].WindowCount);if(!donotredaw){C.push(gotFocusFunctions[z][1])}}}h=1}}for(var o=0;o<j.length;o++){if(j[o][0]==windows[t].WindowCount){if(windows[t].ChildWindowIDs&&windows[t].ChildWindowIDs.length>0){doingEvent=0;if(pointEvent(j,v,A,windows[t].WindowCount,c)!=1){j[o][1](v,windows[t].WindowCount,A)}}else{j[o][1](v,windows[t].WindowCount,A)}if(!donotredaw&&windows[t]){invalidateRect(v,null,windows[t].X,windows[t].Y,windows[t].Width,windows[t].Height);if(windows[t].ControlType=="ScrollBar"){var b=getScrollBarProps(v,windows[t].WindowCount);var r=getWindowProps(v,b.OwnedByWindowID);if(r){invalidateRect(v,null,r.X,r.Y,r.Width,r.Height);if(b.DrawFunction){b.DrawFunction(v,windows[t].WindowCount)}else{drawScrollBar(v,windows[t].WindowCount)}}}}if(windows[t]&&windows[t].ControlType!="TextBox"&&c!=1){if(A.preventDefault){A.preventDefault()}A.returnValue=false}}}return 1}}}if(g==1){return 1}if(doingClickEvent==1||doingMouseUp==1||doingMouseDown==1){for(var p=0;p<windowIdWithFocus.length;p++){if(windowIdWithFocus[p][0]==v){doingEventForWindowID=-1;for(var z=0;z<lostFocusFunctions.length;z++){if(lostFocusFunctions[z][0]==v&&lostFocusFunctions[z][1]==windowIdWithFocus[p][1]&&windowIdWithFocus[p][1]!=-1){lostFocusFunctions[z][2](v,windowIdWithFocus[p][1]);if(!donotredaw){C.push(lostFocusFunctions[z][1])}}}windowIdWithFocus[p][1]=-1;h=1}}}if(h==1&&!donotredaw){for(var t=0;t<C.length;t++){var w=getWindowProps(v,C[t]);if(w){invalidateRect(v,null,w.X,w.Y,w.Width,w.Height)}}}donotredaw=null;return 0}function setFocusToWindowID(c,a){for(var b=0;windowIdWithFocus.length;b++){if(windowIdWithFocus[b][0]==c){windowIdWithFocus[b][1]=a;return}}windowIdWithFocus.push([c,a])}function canvasOnClick(b,a){doingClickEvent=1;pointEvent(clickFunctions,b,a);doingClickEvent=0}function canvasOnDblClick(b,a){pointEvent(doubleClickFunctions,b,a)}function canvasOnDrag(b,a){pointEvents(dragFunctions,b,a)}function canvasOnDragEnd(b,a){pointEvent(dragEndFunctions,b,a)}function canvasOnDragEnter(b,a){pointEvent(dragEnterFunctions,b,a)}function canvasOnDragLeave(b,a){pointEvent(dragLeaveFunctions,b,a)}function canvasOnDragOver(b,a){pointEvent(dragOverFunctions,b,a)}function canvasOnDragStart(b,a){pointEvent(dragStartFunctions,b,a)}function canvasOnDrop(b,a){pointEvent(dropFunctions,b,a)}function canvasOnMouseDown(b,a){doingMouseDown=1;pointEvent(mouseDownFunctions,b,a);doingMouseDown=0}function canvasOnMouseMove(b,a){pointEvent(mouseMoveFunctions,b,a)}function canvasOnMouseOut(b,a){pointEvent(mouseOutFunctions,b,a)}function canvasOnMouseOver(b,a){pointEvent(mouseOverFunctions,b,a)}function canvasOnMouseUp(b,a){doingMouseUp=1;pointEvent(mouseUpFunctions,b,a);doingMouseUp=0}function canvasOnMouseWheel(b,a){pointEvent(mouseWheelFunctions,b,a)}function canvasOnScroll(b,a){pointEvent(scrollFunctions,b,a)}function registerCanvasElementId(b){var a=document.getElementById(b);canvases.push([b,a]);ctxs.push([b,a.getContext("2d")]);a.onclick=function(c){canvasOnClick(b,c)};a.ondblclick=function(c){canvasOnDblClick(b,c)};a.addEventListener("ondrag",function(c){canvasOnDrag(b,c)});a.addEventListener("ondragend",function(c){canvasOnDragEnd(b,c)});a.addEventListener("ondragenter",function(c){canvasOnDragEnter(b,c)});a.addEventListener("ondragleave",function(c){canvasOnDragLeave(b,c)});a.addEventListener("ondragover",function(c){canvasOnDragOver(b,c)});a.addEventListener("ondragstart",function(c){c.dataTransfer.setData("text/plain","Dragging");canvasOnDragStart(b,c)});a.addEventListener("ondrop",function(c){canvasOnDrop(b,c)});a.onkeypress=function(f){for(var d=0;d<keyPressFunctions.length;d++){for(var c=0;c<windowIdWithFocus.length;c++){if(windowIdWithFocus[c][0]==keyPressFunctions[d].CanvasID&&windowIdWithFocus[c][1]==keyPressFunctions[d].WindowID){keyPressFunctions[d].KeyPressFunction(keyPressFunctions[d].CanvasID,keyPressFunctions[d].WindowID,f);var g=getWindowProps(keyPressFunctions[d].CanvasID,keyPressFunctions[d].WindowID);if(g){invalidateRect(keyPressFunctions[d].CanvasID,null,g.X,g.Y,g.Width,g.Height)}if(f.preventDefault){f.preventDefault()}f.returnValue=false}}}};a.onkeydown=function(f){for(var d=0;d<keyDownFunctions.length;d++){for(var c=0;c<windowIdWithFocus.length;c++){if(windowIdWithFocus[c][0]==keyDownFunctions[d].CanvasID&&windowIdWithFocus[c][1]==keyDownFunctions[d].WindowID){keyDownFunctions[d].KeyDownFunction(keyDownFunctions[d].CanvasID,keyDownFunctions[d].WindowID,f);var g=getWindowProps(keyDownFunctions[d].CanvasID,keyDownFunctions[d].WindowID);if(g){invalidateRect(keyDownFunctions[d].CanvasID,null,g.X,g.Y,g.Width,g.Height)}if(f.preventDefault){f.preventDefault()}f.returnValue=false}}}};if(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1){a.addEventListener("touchstart",function(c){c.pageX=c.touches[0].pageX;c.pageY=c.touches[0].pageY;pointEvent(mouseDownFunctions,b,c,null)},false);a.addEventListener("touchmove",function(c){c.pageX=c.touches[0].pageX;c.pageY=c.touches[0].pageY;pointEvent(mouseMoveFunctions,b,c,null)},false);a.addEventListener("touchend",function(c){c.pageX=c.touches[0].pageX;c.pageY=c.touches[0].pageY;pointEvent(mouseUpFunctions,b,c,null,1)},false)}else{a.onmousedown=function(c){canvasOnMouseDown(b,c)};a.onmousemove=function(c){canvasOnMouseMove(b,c)};a.onmouseup=function(c){canvasOnMouseUp(b,c)};a.onmouseout=function(c){canvasOnMouseOut(b,c)};a.onmouseover=function(c){canvasOnMouseOver(b,c)};a.onmousewheel=function(c){canvasOnMouseWheel(b,c)};a.onscroll=function(c){canvasOnScroll(b,c)}}}function createWindow(b,h,g,a,i,e,d,f,c){++windowCount;windows.push({WindowCount:windowCount,X:h,Y:g,Width:a,Height:i,Depth:e,CanvasID:b,ParentWindowID:d,ChildWindowIDs:new Array(),ControlType:f,ControlNameID:c});return windowCount}function getWindowControlPropsByWindowProps(a){switch(a.ControlType){case"Panel":return getPanelProps(a.CanvasID,a.WindowCount);case"Label":return getLabelProps(a.CanvasID,a.WindowCount);case"Button":return getButtonProps(a.CanvasID,a.WindowCount);case"ScrollBar":return getScrollBarProps(a.CanvasID,a.WindowCount);case"Grid":return getGridProps(a.CanvasID,a.WindowCount);case"ComboBoxTextArea":return getComboboxPropsByTextAreaWindowId(a.CanvasID,a.WindowCount);case"CheckBox":return getcheckboxProps(a.CanvasID,a.WindowCount);case"RadioButtonGroup":return getRadioButtonProps(a.CanvasID,a.WindowCount);case"Image":return getImageControlProps(a.CanvasID,a.WindowCount);case"TreeView":return getTreeViewProps(a.CanvasID,a.WindowCount);case"Calender":return getCalenderProps(a.CanvasID,a.WindowCount);case"ProgressBar":return getProgressBarProps(a.CanvasID,a.WindowCount);case"Slider":return getSliderProps(a.CanvasID,a.WindowCount);case"DatePickerTextArea":return getDatePickerPropsByTextBoxAreaWindowID(a.CanvasID,a.WindowCount);case"BarGraph":return getBarGraphProps(a.CanvasID,a.WindowCount);case"PieChart":return getPieChartProps(a.CanvasID,a.WindowCount);case"LineGraph":return getLineGraphProps(a.CanvasID,a.WindowCount);case"Gauge":return getGaugeChartProps(a.CanvasID,a.WindowCount);case"RadarGraph":return getRadarGraphProps(a.CanvasID,a.WindowCount);case"LineAreaGraph":return getLineAreaGraphProps(a.CanvasID,a.WindowCount);case"CandlesticksGraph":return getCandlesticksGraphProps(a.CanvasID,a.WindowCount);case"DoughnutChart":return getDoughnutChartProps(a.CanvasID,a.WindowCount);case"BarsMixedWithLabeledLineGraph":return getBarsMixedWithLabledLineGraphProps(a.CanvasID,a.WindowCount);case"StackedBarGraph":return getstackedBarGraphProps(a.CanvasID,a.WindowCount);case"Tab":return getTabProps(a.CanvasID,a.WindowCount);case"ImageMap":return getImageMapProps(a.CanvasID,a.WindowCount);case"SubMenu":return getSubMenuBarProps(a.CanvasID,a.WindowCount);case"MenuBar":return getMenuBarProps(a.CanvasID,a.WindowCount);case"TextBox":return getTextBoxProps(a.CanvasID,a.WindowCount);case"ImageFader":return getImageFaderProps(a.CanvasID,a.WindowCount);case"ImageSlider":return getImageSliderProps(a.CanvasID,a.WindowCount);case"MultiLineLabel":return getMultiLineLabelProps(a.CanvasID,a.WindowCount);case"WordProcessor":return getWordProcessorProps(a.CanvasID,a.WindowCount)}}function registerChildWindow(c,a,d){for(var b=0;b<windows.length;b++){if(windows[b].WindowCount==d){windows[b].ChildWindowIDs.push(a);var e=getWindowProps(c,a);if(e){e.ParentWindowID=d}}}}function registerKeyPressFunction(d,c,a){for(var b=0;b<windows.length;b++){if(windows[b].CanvasID==d&&windows[b].WindowCount==a){keyPressFunctions.push({CanvasID:d,KeyPressFunction:c,WindowID:a})}}}function registerKeyDownFunction(d,c,a){for(var b=0;b<windows.length;b++){if(windows[b].CanvasID==d&&windows[b].WindowCount==a){keyDownFunctions.push({CanvasID:d,KeyDownFunction:c,WindowID:a})}}}function registerEvent(a,d,e,c){for(var b=0;b<windows.length;b++){if(windows[b].CanvasID==e&&windows[b].WindowCount==a){c.push([a,d,e])}}}function registerClickFunction(a,b,c){registerEvent(a,b,c,clickFunctions)}function registerDoubleClickFunction(a,b,c){registerEvent(a,b,c,doubleClickFunctions)}function registerDragFunction(a,c,b){registerEvent(a,c,b,dragFunctions)}function registerDragEndFunction(a,b,c){registerEvent(a,b,c,dragEndFunctions)}function registerDragEnterFunction(a,c,b){registerEvent(a,c,b,dragEnterFunctions)}function registerDragLeaveFunction(a,b,c){registerEvent(a,b,c,dragLeaveFunctions)}function registerDragOverFunction(a,c,b){registerEvent(a,c,b,dragOverFunctions)}function registerDragStartFunction(a,b,c){registerEvent(a,b,c,dragStartFunctions)}function registerDropFunction(a,b,c){registerEvent(a,b,c,dropFunctions)}function registerMouseDownFunction(a,b,c){registerEvent(a,b,c,mouseDownFunctions)}function registerMouseMoveFunction(a,b,c){registerEvent(a,b,c,mouseMoveFunctions)}function registerMouseOutFunction(a,c,b){registerEvent(a,c,b,mouseOutFunctions)}function registerMouseOverFunction(a,b,c){registerEvent(a,b,c,mouseOverFunctions)}function registerMouseUpFunction(a,b,c){registerEvent(a,b,c,mouseUpFunctions)}function registerMouseWheelFunction(b,a,c){registerEvent(b,a,c,mouseWheelFunctions)}function registerScrollFunction(a,b,c){registerEvent(a,b,c,scrollFunctions)}function registerWindowDrawFunction(a,b,c){registerEvent(a,b,c,windowDrawFunctions)}function getWindowDepth(a,c){for(var b=0;b<windows.length;b++){if(windows[b].WindowCount==a&&windows[b].CanvasID==c){return windows[b].Depth}}}function setWindowDepth(c,a,d){for(var b=0;b<windows.length;b++){if(windows[b].WindowCount==a&&windows[b].CanvasID==c){windows[b].Depth=d;if(d>highestDepth){highestDepth=d}return}}}function checkIfModalWindow(c,a){for(var b=0;b<modalWindows.length;b++){if(modalWindows[b].CanvasID==c&&modalWindows[b].WindowID==a){return 1}}return 0}function registerModalWindow(b,a){modalWindows.push({CanvasID:b,WindowID:a})}function checkIfHiddenWindow(c,a){for(var b=0;b<hiddenWindows.length;b++){if(hiddenWindows[b].CanvasID==c&&hiddenWindows[b].WindowID==a){return hiddenWindows[b].HiddenStatus}}return 0}function registerHiddenWindow(c,a,b){hiddenWindows.push({CanvasID:c,WindowID:a,HiddenStatus:b})}function setHiddenWindowStatus(d,a,b){for(var c=0;c<hiddenWindows.length;c++){if(hiddenWindows[c].HiddenStatus!=b&&hiddenWindows[c].CanvasID==d&&hiddenWindows[c].WindowID==a){hiddenWindows[c].HiddenStatus=b}}}function registerLostFocusFunction(c,a,b){lostFocusFunctions.push([c,a,b])}function registerGotFocusFunction(c,a,b){gotFocusFunctions.push([c,a,b])}function getWindowProps(c,a){for(var b=0;b<windows.length;b++){if(windows[b].CanvasID==c&&windows[b].WindowCount==a){return windows[b]}}}function invalidateRect(b,e,k,j,a,l){if(suspendDraw==0){var c=getCanvas(b);if(e==null){getCtx(b).clearRect(k,j,a,l)}for(var g=0;g<=highestDepth;g++){for(var f=0;f<windowDrawFunctions.length;f++){var h=getWindowProps(b,windowDrawFunctions[f][0]);if(h&&h.ParentWindowID==e&&checkIfHiddenWindow(b,windowDrawFunctions[f][0])==0&&checkIfModalWindow(b,windowDrawFunctions[f][0])==0&&getWindowDepth(windowDrawFunctions[f][0],windowDrawFunctions[f][2])==g&&windowDrawFunctions[f][2]==b&&k<h.X+h.Width&&k+a>h.X&&j<h.Y+h.Height&&j+l>h.Y){var m=getCtx(b);m.save();m.beginPath();m.rect(h.X,h.Y,h.Width,h.Height);m.clip();windowDrawFunctions[f][1](b,windowDrawFunctions[f][0]);if(h.ChildWindowIDs&&h.ChildWindowIDs.length>0){invalidateRect(b,windowDrawFunctions[f][0],k,j,a,l)}m.restore()}}}for(var g=0;g<=highestDepth;g++){for(var f=0;f<windowDrawFunctions.length;f++){var h=getWindowProps(b,windowDrawFunctions[f][0]);if(h&&h.ParentWindowID==e&&checkIfHiddenWindow(b,windowDrawFunctions[f][0])==0&&checkIfModalWindow(b,windowDrawFunctions[f][0])==1&&getWindowDepth(windowDrawFunctions[f][0],windowDrawFunctions[f][2])==g&&windowDrawFunctions[f][2]==b&&k<h.X+h.Width&&k+a>h.X&&j<h.Y+h.Height&&j+l>h.Y){var m=getCtx(b);m.save();m.beginPath();m.rect(h.X,h.Y,h.Width,h.Height);m.clip();windowDrawFunctions[f][1](b,windowDrawFunctions[f][0]);if(h.ChildWindowIDs&&h.ChildWindowIDs.length>0){invalidateRect(b,windowDrawFunctions[f][0],k,j,a,l)}m.restore()}}}}}function getCtx(b){for(var a=0;a<ctxs.length;a++){if(ctxs[a][0]==b){return ctxs[a][1]}}}function getCanvas(b){for(var a=0;a<canvases.length;a++){if(canvases[a][0]==b){return canvases[a][1]}}}function destroyControl(c,a){for(var b=0;b<windows.length;b++){if(windows[b].CanvasID==c&&windows[b].WindowCount==a){destroyControlByWindowObj(windows[b])}}}function destroyControlByNameID(b){for(var a=0;a<windows.length;a++){if(windows[a].ControlNameID==b){destroyControlByWindowObj(windows[a])}}}function destroyWindow(c,a){for(var b=0;b<windows.length;b++){if(windows[b].CanvasID==c&&windows[b].WindowCount==a){removeEventHooks(windows[b]);windows.splice(b,1);unregisterAnimatedWindow(c,a)}}}function removeEventFunctions(b,d,a){for(var c=b.length-1;c>=0;c--){if(b[c][2]==d&&b[c][0]==a){b.splice(c,1)}}}function removeEventHooks(a){removeEventFunctions(clickFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(doubleClickFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dragFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dragEndFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dragEnterFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dragLeaveFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dragOverFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dragStartFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(dropFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(mouseDownFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(mouseMoveFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(mouseOutFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(mouseOverFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(mouseUpFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(mouseWheelFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(scrollFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(windowDrawFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(gotFocusFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(lostFocusFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(keyPressFunctions,a.CanvasID,a.WindowCount);removeEventFunctions(keyDownFunctions,a.CanvasID,a.WindowCount)}function destroyControlByWindowObj(b){for(var c=0;b.ChildWindowIDs&&c<b.ChildWindowIDs.length;c++){for(var a=0;a<windows.length;a++){if(windows[a].CanvasID==b.CanvasID&&windows[a].WindowID==b.ChildWindowIDs[c]){destroyControlByWindowObj(windows[a])}}}switch(b.ControlType){case"Label":for(var c=labelPropsArray.length-1;c>=0;c--){if(labelPropsArray[c].CanvasID==b.CanvasID&&labelPropsArray[c].WindowID==b.WindowCount){labelPropsArray.splice(c,1)}}break;case"Button":for(var c=buttonPropsArray.length-1;c>=0;c--){if(buttonPropsArray[c].CanvasID==b.CanvasID&&buttonPropsArray[c].WindowID==b.WindowCount){buttonPropsArray.splice(c,1)}}break;case"ScrollBar":for(var c=scrollBarPropsArray.length-1;c>=0;c--){if(scrollBarPropsArray[c].CanvasID==b.CanvasID&&scrollBarPropsArray[c].WindowID==b.WindowCount){scrollBarPropsArray.splice(c,1)}}break;case"Grid":for(var c=gridPropsArray.length-1;c>=0;c--){if(gridPropsArray[c].CanvasID==b.CanvasID&&gridPropsArray[c].WindowID==b.WindowCount){gridPropsArray.splice(c,1)}}break;case"ComboBoxTextArea":for(var c=comboboxPropsArray.length-1;c>=0;c--){if(comboboxPropsArray[c].CanvasID==b.CanvasID&&comboboxPropsArray[c].WindowID==b.WindowCount){destroyWindow(b.CanvasID,comboboxPropsArray[c].ButtonWindowID);destroyWindow(b.CanvasID,comboboxPropsArray[c].ListAreaWindowID);comboboxPropsArray.splice(c,1)}}break;case"CheckBox":for(var c=checkboxPropsArray.length-1;c>=0;c--){if(checkboxPropsArray[c].CanvasID==b.CanvasID&&checkboxPropsArray[c].WindowID==b.WindowCount){checkboxPropsArray.splice(c,1)}}break;case"RadioButtonGroup":for(var c=radiobuttonPropsArray.length-1;c>=0;c--){if(radiobuttonPropsArray[c].CanvasID==b.CanvasID&&radiobuttonPropsArray[c].WindowID==b.WindowCount){radiobuttonPropsArray.splice(c,1)}}break;case"Image":for(var c=imageControlPropsArray.length-1;c>=0;c--){if(imageControlPropsArray[c].CanvasID==b.CanvasID&&imageControlPropsArray[c].WindowID==b.WindowCount){imageControlPropsArray.splice(c,1)}}break;case"TreeView":for(var c=treeViewPropsArray.length-1;c>=0;c--){if(treeViewPropsArray[c].CanvasID==b.CanvasID&&treeViewPropsArray[c].WindowID==b.WindowCount){treeViewPropsArray.splice(c,1)}}break;case"Calender":for(var c=calenderPropsArray.length-1;c>=0;c--){if(calenderPropsArray[c].CanvasID==b.CanvasID&&calenderPropsArray[c].WindowID==b.WindowCount){calenderPropsArray.splice(c,1)}}break;case"ProgressBar":for(var c=progressBarPropsArray.length-1;c>=0;c--){if(progressBarPropsArray[c].CanvasID==b.CanvasID&&progressBarPropsArray[c].WindowID==b.WindowCount){progressBarPropsArray.splice(c,1)}}break;case"Slider":for(var c=sliderPropsArray.length-1;c>=0;c--){if(sliderPropsArray[c].CanvasID==b.CanvasID&&sliderPropsArray[c].WindowID==b.WindowCount){sliderPropsArray.splice(c,1)}}break;case"DatePickerTextArea":for(var c=datePickerPropsArray.length-1;c>=0;c--){if(datePickerPropsArray[c].CanvasID==b.CanvasID&&datePickerPropsArray[c].WindowID==b.WindowCount){destroyWindow(b.CanvasID,datePickerPropsArray[c].ButtonWindowID);destroyControl(b.CanvasID,datePickerPropsArray[c].CalenderWindowID);datePickerPropsArray.splice(c,1)}}break;case"Panel":for(var c=panelPropsArray.length-1;c>=0;c--){if(panelPropsArray[c].CanvasID==b.CanvasID&&panelPropsArray[c].WindowID==b.WindowCount){panelPropsArray.splice(c,1)}}break;case"BarGraph":for(var c=barGraphsPropsArray.length-1;c>=0;c--){if(barGraphsPropsArray[c].CanvasID==b.CanvasID&&barGraphsPropsArray[c].WindowID==b.WindowCount){barGraphsPropsArray.splice(c,1)}}break;case"PieChart":for(var c=pieChartsPropsArray.length-1;c>=0;c--){if(pieChartsPropsArray[c].CanvasID==b.CanvasID&&pieChartsPropsArray[c].WindowID==b.WindowCount){pieChartsPropsArray.splice(c,1)}}break;case"LineGraph":for(var c=lineGraphsPropsArray.length-1;c>=0;c--){if(lineGraphsPropsArray[c].CanvasID==b.CanvasID&&lineGraphsPropsArray[c].WindowID==b.WindowCount){lineGraphsPropsArray.splice(c,1)}}break;case"Gauge":for(var c=gaugeChartPropsArray.length-1;c>=0;c--){if(gaugeChartPropsArray[c].CanvasID==b.CanvasID&&gaugeChartPropsArray[c].WindowID==b.WindowCount){gaugeChartPropsArray.splice(c,1)}}break;case"RadarGraph":for(var c=radarGraphPropsArray.length-1;c>=0;c--){if(radarGraphPropsArray[c].CanvasID==b.CanvasID&&radarGraphPropsArray[c].WindowID==b.WindowCount){radarGraphPropsArray.splice(c,1)}}break;case"LineAreaGraph":for(var c=lineAreaGraphPropsArray.length-1;c>=0;c--){if(lineAreaGraphPropsArray[c].CanvasID==b.CanvasID&&lineAreaGraphPropsArray[c].WindowID==b.WindowCount){lineAreaGraphPropsArray.splice(c,1)}}break;case"CandlesticksGraph":for(var c=candlesticksGraphPropsArray.length-1;c>=0;c--){if(candlesticksGraphPropsArray[c].CanvasID==b.CanvasID&&candlesticksGraphPropsArray[c].WindowID==b.WindowCount){candlesticksGraphPropsArray.splice(c,1)}}break;case"DoughnutChart":for(var c=doughnutChartPropsArray.length-1;c>=0;c--){if(doughnutChartPropsArray[c].CanvasID==b.CanvasID&&doughnutChartPropsArray[c].WindowID==b.WindowCount){doughnutChartPropsArray.splice(c,1)}}break;case"BarsMixedWithLabeledLineGraph":for(var c=barsMixedWithLabledLineGraphsPropsArray.length-1;c>=0;c--){if(barsMixedWithLabledLineGraphsPropsArray[c].CanvasID==b.CanvasID&&barsMixedWithLabledLineGraphsPropsArray[c].WindowID==b.WindowCount){barsMixedWithLabledLineGraphsPropsArray.splice(c,1)}}break;case"StackedBarGraph":for(var c=stackedBarGraphPropsArray.length-1;c>=0;c--){if(stackedBarGraphPropsArray[c].CanvasID==b.CanvasID&&stackedBarGraphPropsArray[c].WindowID==b.WindowCount){stackedBarGraphPropsArray.splice(c,1)}}break;case"Tab":for(var c=tabPropsArray.length-1;c>=0;c--){if(tabPropsArray[c].CanvasID==b.CanvasID&&tabPropsArray[c].WindowID==b.WindowCount){tabPropsArray.splice(c,1)}}break;case"ImageMap":for(var c=imageMapPropsArray.length-1;c>=0;c--){if(imageMapPropsArray[c].CanvasID==b.CanvasID&&imageMapPropsArray[c].WindowID==b.WindowCount){imageMapPropsArray.splice(c,1)}}break;case"SubMenu":for(var c=subMenuBarPropsArray.length-1;c>=0;c--){if(subMenuBarPropsArray[c].CanvasID==b.CanvasID&&subMenuBarPropsArray[c].WindowID==b.WindowCount){for(var d=0;d<subMenuBarPropsArray[c].ChildMenuWindowIDs.length;d++){destroyControl(b.CanvasID,subMenuBarPropsArray[c].ChildMenuWindowIDs[d])}subMenuBarPropsArray.splice(c,1)}}break;case"MenuBar":for(var c=menuBarPropsArray.length-1;c>=0;c--){if(menuBarPropsArray[c].CanvasID==b.CanvasID&&menuBarPropsArray[c].WindowID==b.WindowCount){for(var d=0;d<menuBarPropsArray[c].ChildMenuWindowIDs.length;d++){destroyControl(b.CanvasID,menuBarPropsArray[c].ChildMenuWindowIDs[d])}menuBarPropsArray.splice(c,1)}}break;case"TextBox":for(var c=textBoxPropsArray.length-1;c>=0;c--){if(textBoxPropsArray[c].CanvasID==b.CanvasID&&textBoxPropsArray[c].WindowID==b.WindowCount){textBoxPropsArray.splice(c,1)}}break;case"ImageFader":for(var c=imageFaderPropsArray.length-1;c>=0;c--){if(imageFaderPropsArray[c].CanvasID==b.CanvasID&&imageFaderPropsArray[c].WindowID==b.WindowCount){imageFaderPropsArray.splice(c,1)}}break;case"ImageSlider":for(var c=imageSliderPropsArray.length-1;c>=0;c--){if(imageSliderPropsArray[c].CanvasID==b.CanvasID&&imageSliderPropsArray[c].WindowID==b.WindowCount){imageSliderPropsArray.splice(c,1)}}break;case"MultiLineLabel":for(var c=multiLineLabelPropsArray.length-1;c>=0;c--){if(multiLineLabelPropsArray[c].CanvasID==b.CanvasID&&multiLineLabelPropsArray[c].WindowID==b.WindowCount){multiLineLabelPropsArray.splice(c,1)}}break;case"WordProcessor":for(var c=wordProcessorPropsArray.length-1;c>=0;c--){if(wordProcessorPropsArray[c].CanvasID==b.CanvasID&&wordProcessorPropsArray[c].WindowID==b.WindowCount){wordProcessorPropsArray.splice(c,1)}}break;case"VirtualKeyboard":for(var c=virtualKeyboardPropsArray.length-1;c>=0;c--){if(virtualKeyboardPropsArray[c].CanvasID==b.CanvasID&&virtualKeyboardPropsArray[c].WindowID==b.WindowCount){virtualKeyboardPropsArray.splice(c,1)}}break;case"Splitter":for(var c=splitterPropsArray.length-1;c>=0;c--){if(splitterPropsArray[c].CanvasID==b.CanvasID&&splitterPropsArray[c].WindowID==b.WindowCount){splitterPropsArray.splice(c,1)}}break}destroyWindow(b.CanvasID,b.WindowCount)}function getWindowByControlNameID(b){for(var a=0;a<windows.length;a++){if(windows[a].ControlNameID==b){return windows[a]}}}var labelPropsArray=new Array();function getLabelProps(c,a){for(var b=0;b<labelPropsArray.length;b++){if(labelPropsArray[b].CanvasID==c&&labelPropsArray[b].WindowID==a){return labelPropsArray[b]}}}function CCLLabel(){}CCLLabel.prototype={CanvasID:"",ControlNameID:"l1",X:0,Y:0,Width:0,Height:0,Depth:0,Text:"Label",TextHeight:12,TextFontString:"12pt Ariel",TextColor:"#000000",AutoAdjustWidth:1,IsHyperlink:0,URL:null,NoBrowserHistory:null,IsNewBrowserWindow:null,NameOfNewBrowserWindow:null,WidthOfNewBrowserWindow:null,HeightOfNewBrowserWindow:null,NewBrowserWindowIsResizable:null,NewBrowserWindowHasScrollBars:null,NewBrowserWindowHasToolbar:null,NewBrowserWindowHasLocationOrURLOrAddressBox:null,NewBrowserWindowHasDirectoriesOrExtraButtons:null,NewBrowserWindowHasStatusBar:null,NewBrowserWindowHasMenuBar:null,NewBrowserWindowCopyHistory:null,DrawFunction:null,Alignment:null,ClickFunction:null,BackGroundColor:null,Tag:null,Initialize:function(){return createLabel(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.DrawFunction,this.Depth,this.Alignment,this.ClickFunction,this.BackGroundColor,this.AutoAdjustWidth,this.Tag,this.IsHyperlink,this.URL,this.NoBrowserHistory,this.IsNewBrowserWindow,this.NameOfNewBrowserWindow,this.WidthOfNewBrowserWindow,this.HeightOfNewBrowserWindow,this.NewBrowserWindowIsResizable,this.NewBrowserWindowHasScrollBars,this.NewBrowserWindowHasToolbar,this.NewBrowserWindowHasLocationOrURLOrAddressBox,this.NewBrowserWindowHasDirectoriesOrExtraButtons,this.NewBrowserWindowHasStatusBar,this.NewBrowserWindowHasMenuBar,this.NewBrowserWindowCopyHistory)}};function createLabel(D,b,r,q,C,z,v,d,a,l,j,J,o,c,i,s,K,B,h,p,g,w,G,I,u,H,F,A,t,f,e,m){if(s==1){var E=getCtx(D);E.font=l;C=E.measureText(v).width}var k=createWindow(D,r,q,C,z,J,null,"Label",b);var n=new CCLLabel();labelPropsArray.push({CanvasID:D,WindowID:k,X:r,Y:q,Width:C,Height:z,Text:v,TextHeight:a,TextFontString:l,TextColor:d,IsHyperlink:B,URL:h,NoBrowserHistory:p,IsNewBrowserWindow:g,NameOfNewBrowserWindow:w,WidthOfNewBrowserWindow:G,HeightOfNewBrowserWindow:I,NewBrowserWindowIsResizable:u,NewBrowserWindowHasScrollBars:H,NewBrowserWindowHasToolbar:F,NewBrowserWindowHasLocationOrURLOrAddressBox:A,NewBrowserWindowHasDirectoriesOrExtraButtons:t,NewBrowserWindowHasStatusBar:f,NewBrowserWindowHasMenuBar:e,NewBrowserWindowCopyHistory:m,DrawFunction:j,Alignment:o,ClickFunction:c,BackGroundColor:i,Tag:K});if(j!=undefined&&j!=null){registerWindowDrawFunction(k,function(x,L){var y=getLabelProps(x,L);y.DrawFunction(x,L)},D)}else{registerWindowDrawFunction(k,function(){var y=getCtx(D);var x=getLabelProps(D,k);y.font=x.TextFontString;if(x.BackGroundColor){y.fillStyle=x.BackGroundColor;y.beginPath();y.rect(x.X,x.Y,x.Width,x.Height);y.fill()}y.fillStyle=x.TextColor;y.fillText(x.Text,x.X+(x.Alignment=="center"?((x.Width-y.measureText(x.Text).width)/2):0),x.Y+x.Height-((x.Height-x.TextHeight)/2))},D)}if(c!=null){registerClickFunction(k,c,D)}else{if(B==1){registerClickFunction(k,function(){if(g==1){var y="";var x=0;if(G!=null){y+="width="+G;x=1}if(I!=null){y+=(x==1?",":"")+"height="+I}if(u!=null){y+=(x==1?",":"")+"resizable="+u}if(H!=null){y+=(x==1?",":"")+"scrollbars="+H}if(F!=null){y+=(x==1?",":"")+"toolbar="+F}if(A!=null){y+=(x==1?",":"")+"location="+A}if(t!=null){y+=(x==1?",":"")+"directories="+t}if(f!=null){y+=(x==1?",":"")+"status="+f}if(e!=null){y+=(x==1?",":"")+"menubar="+e}if(m!=null){y+=(x==1?",":"")+"copyhistory="+m}window.open(h,w,y)}else{if(p==1){window.location.replace(h)}else{window.location.href=h}}},D)}}return k}var buttonPropsArray=new Array();function getButtonProps(c,a){for(var b=0;b<buttonPropsArray.length;b++){if(buttonPropsArray[b].CanvasID==c&&buttonPropsArray[b].WindowID==a){return buttonPropsArray[b]}}}function defaultButtonDrawFunction(a,h){var e=0;var d=0;var i=getCtx(a);i.save();var c=getButtonProps(a,h);if(c.IsPressed==1){c.IsPressed=0;e=5;d=5}if(c.Theme==1){i.beginPath();i.moveTo(e+c.X,d+c.Y+c.EdgeRadius);i.arc(e+c.X+c.EdgeRadius,d+c.Y+c.EdgeRadius,c.EdgeRadius,Math.PI,(Math.PI/180)*270,false);i.lineTo(e+c.X+c.Width-c.EdgeRadius,d+c.Y);i.arc(e+c.X+c.Width-c.EdgeRadius,d+c.Y+c.EdgeRadius,c.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);i.lineTo(e+c.X+c.Width,d+c.Y+c.Height-c.EdgeRadius);i.arc(e+c.X+c.Width-c.EdgeRadius,d+c.Y+c.Height-c.EdgeRadius,c.EdgeRadius,0,Math.PI/2,false);i.lineTo(e+c.X+c.EdgeRadius,d+c.Y+c.Height);i.arc(e+c.X+c.EdgeRadius,d+c.Y+c.Height-c.EdgeRadius,c.EdgeRadius,Math.PI/2,Math.PI,false);i.closePath();var f=i.createLinearGradient(e+c.X,d+c.Y,e+c.X,d+c.Y+c.Height);f.addColorStop(0,"#536fa0");f.addColorStop(1,"#274580");i.fillStyle=f;i.fill();i.strokeStyle="#1f3a73";i.stroke();f=i.createLinearGradient(e+c.X,d+c.Y+((c.Height-c.TextHeight)/2),e+c.X,d+c.Y-((c.Height-c.TextHeight)/2)+c.Height);f.addColorStop(0,"#fafbfc");f.addColorStop(1,"#dde2ea");i.fillStyle=f;i.shadowBlur=5;i.shadowColor="#636e7f";i.font=c.TextFontString;i.fillText(c.Text,e+c.X+((c.Width-i.measureText(c.Text).width)/2),d+c.Y+c.Height-((c.Height-c.TextHeight)/2))}else{if(c.Theme==2){var f=i.createLinearGradient(e+c.X,d+c.Y,e+c.X,d+c.Y+c.Height);f.addColorStop(0,"#7888ff");f.addColorStop(1,"#d0d3fe");i.shadowBlur=5;i.shadowColor=f;i.beginPath();i.moveTo(e+c.X,d+c.Y+c.EdgeRadius);i.arc(e+c.X+c.EdgeRadius,d+c.Y+c.EdgeRadius,c.EdgeRadius,Math.PI,(Math.PI/180)*270,false);i.lineTo(e+c.X+c.Width-c.EdgeRadius-5,d+c.Y);i.arc(e+c.X+c.Width-c.EdgeRadius-5,d+c.Y+c.EdgeRadius,c.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);i.lineTo(e+c.X+c.Width-5,d+c.Y+c.Height-c.EdgeRadius-5);i.arc(e+c.X+c.Width-c.EdgeRadius-5,d+c.Y+c.Height-c.EdgeRadius-5,c.EdgeRadius,0,Math.PI/2,false);i.lineTo(e+c.X+c.EdgeRadius,d+c.Y+c.Height-5);i.arc(e+c.X+c.EdgeRadius,d+c.Y+c.Height-c.EdgeRadius-5,c.EdgeRadius,Math.PI/2,Math.PI,false);i.closePath();f=i.createLinearGradient(e+c.X,d+c.Y+9,e+c.X,d+c.Y+c.Height-9);f.addColorStop(0,"#7a83c6");f.addColorStop(1,"#5787dc");i.strokeStyle=f;i.lineWidth=1;i.stroke();i.beginPath();i.moveTo(e+c.X+1,d+c.Y+c.EdgeRadius+1);i.arc(e+c.X+c.EdgeRadius+1,d+c.Y+c.EdgeRadius+1,c.EdgeRadius,Math.PI,(Math.PI/180)*270,false);i.lineTo(e+c.X+c.Width-c.EdgeRadius-6,d+c.Y+1);i.arc(e+c.X+c.Width-c.EdgeRadius-6,d+c.Y+c.EdgeRadius+1,c.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);i.lineTo(e+c.X+c.Width-6,d+c.Y+c.Height-c.EdgeRadius-6);i.arc(e+c.X+c.Width-c.EdgeRadius-6,d+c.Y+c.Height-c.EdgeRadius-6,c.EdgeRadius,0,Math.PI/2,false);i.lineTo(e+c.X+c.EdgeRadius+1,d+c.Y+c.Height-6);i.arc(e+c.X+c.EdgeRadius+1,d+c.Y+c.Height-c.EdgeRadius-6,c.EdgeRadius,Math.PI/2,Math.PI,false);i.closePath();f=i.createLinearGradient(e+c.X,d+c.Y+1,e+c.X,d+c.Y+c.Height-6);f.addColorStop(0,"#a0abe9");f.addColorStop(1,"#80b2fb");i.strokeStyle=f;i.lineWidth=1;i.stroke();i.beginPath();i.moveTo(e+c.X+2,d+c.Y+c.EdgeRadius+2);i.arc(e+c.X+c.EdgeRadius+2,d+c.Y+c.EdgeRadius+2,c.EdgeRadius,Math.PI,(Math.PI/180)*270,false);i.lineTo(e+c.X+c.Width-c.EdgeRadius-7,d+c.Y+2);i.arc(e+c.X+c.Width-c.EdgeRadius-7,d+c.Y+c.EdgeRadius+2,c.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);i.lineTo(e+c.X+c.Width-7,d+c.Y+c.Height-c.EdgeRadius-7);i.arc(e+c.X+c.Width-c.EdgeRadius-7,d+c.Y+c.Height-c.EdgeRadius-7,c.EdgeRadius,0,Math.PI/2,false);i.lineTo(e+c.X+c.EdgeRadius+2,d+c.Y+c.Height-7);i.arc(e+c.X+c.EdgeRadius+2,d+c.Y+c.Height-c.EdgeRadius-7,c.EdgeRadius,Math.PI/2,Math.PI,false);i.closePath();f=i.createLinearGradient(e+c.X,d+c.Y+2,e+c.X,d+c.Y+c.Height-7);f.addColorStop(0,"#99a4e4");f.addColorStop(1,"#4c7ce2");i.fillStyle=f;i.fill();f=i.createLinearGradient(e+c.X,d+c.Y+((c.Height-c.TextHeight)/2),e+c.X,d+c.Y-((c.Height-c.TextHeight)/2)+c.Height);f.addColorStop(0,"#fafbfc");f.addColorStop(1,"#dde2ea");i.fillStyle=f;i.shadowBlur=5;i.shadowColor="#636e7f";i.font=c.TextFontString;i.fillText(c.Text,e+c.X+((c.Width-i.measureText(c.Text).width-5)/2),d+c.Y+c.Height-5-((c.Height-c.TextHeight-5)/2))}else{i.beginPath();i.moveTo(e+c.X,d+c.Y+c.EdgeRadius);i.arc(e+c.X+c.EdgeRadius,d+c.Y+c.EdgeRadius,c.EdgeRadius,Math.PI,(Math.PI/180)*270,false);i.lineTo(e+c.X+c.Width-c.EdgeRadius,d+c.Y);i.arc(e+c.X+c.Width-c.EdgeRadius,d+c.Y+c.EdgeRadius,c.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);i.lineTo(e+c.X+c.Width,d+c.Y+c.Height-c.EdgeRadius);i.arc(e+c.X+c.Width-c.EdgeRadius,d+c.Y+c.Height-c.EdgeRadius,c.EdgeRadius,0,Math.PI/2,false);i.lineTo(e+c.X+c.EdgeRadius,d+c.Y+c.Height);i.arc(e+c.X+c.EdgeRadius,d+c.Y+c.Height-c.EdgeRadius,c.EdgeRadius,Math.PI/2,Math.PI,false);i.closePath();i.fillStyle=c.BorderColor;i.fill();var b=i.createLinearGradient(e+c.X,d+c.Y,e+c.X,d+c.Y+c.Height);b.addColorStop(0,c.TopColorStart);b.addColorStop(1,c.TopColorEnd);i.fillStyle=b;i.beginPath();i.rect(e+c.X+c.EdgeRadius,d+c.Y+c.EdgeRadius,c.Width-(2*c.EdgeRadius),(c.Height/2)-c.EdgeRadius);i.fill();var j=i.createLinearGradient(e+c.X,d+c.Y,e+c.X,d+c.Y+c.Height);j.addColorStop(0,c.BottomColorStart);j.addColorStop(1,c.BottomColorEnd);i.fillStyle=j;i.beginPath();i.rect(e+c.X+c.EdgeRadius,d+c.Y+(c.Height/2),c.Width-(2*c.EdgeRadius),(c.Height/2)-c.EdgeRadius);i.fill();i.font=c.TextFontString;i.fillStyle=c.TextColor;i.fillText(c.Text,e+c.X+((c.Width-i.measureText(c.Text).width)/2),d+c.Y+c.Height-((c.Height-c.TextHeight)/2))}}if(c.HasGloss==1){i.beginPath();i.moveTo(e+c.X+2,d+c.Y+c.EdgeRadius+2);i.arc(e+c.X+c.EdgeRadius+2,d+c.Y+c.EdgeRadius+2,c.EdgeRadius,Math.PI,(Math.PI/180)*270,false);i.lineTo(e+c.X+c.Width-c.EdgeRadius-2,d+c.Y+2);i.arc(e+c.X+c.Width-c.EdgeRadius-2,d+c.Y+c.EdgeRadius+2,c.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);i.lineTo(e+c.X+c.Width-2,d+c.Y+((c.Height-4)/2)-c.EdgeRadius+2);i.arc(e+c.X+c.Width-c.EdgeRadius-2,d+c.Y+((c.Height-4)/2)-c.EdgeRadius+2,c.EdgeRadius,0,Math.PI/2,false);i.lineTo(e+c.X+c.EdgeRadius+2,d+c.Y+((c.Height-4)/2)+2);i.arc(e+c.X+c.EdgeRadius+2,d+c.Y+((c.Height-4)/2)-c.EdgeRadius+2,c.EdgeRadius,Math.PI/2,Math.PI,false);i.closePath();var f=i.createLinearGradient(e+c.X,d+c.Y+2,e+c.X,d+c.Y+((c.Height-4)/2)+5);f.addColorStop(0,"rgba(255,255,255,0.4)");f.addColorStop(1,"rgba(255,255,255,0.05)");i.fillStyle=f;i.fill()}i.restore()}function CCLButton(){}CCLButton.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Text:null,EdgeRadius:null,BottomColorStart:null,BottomColorEnd:null,TopColorStart:null,TopColorEnd:null,TextHeight:null,TextFontString:null,TextColor:null,IsPressed:0,BorderColor:null,IsHyperlink:null,URL:null,NoBrowserHistory:null,IsNewBrowserWindow:null,NameOfNewBrowserWindow:null,WidthOfNewBrowserWindow:null,HeightOfNewBrowserWindow:null,NewBrowserWindowIsResizable:null,NewBrowserWindowHasScrollBars:null,NewBrowserWindowHasToolbar:null,NewBrowserWindowHasLocationOrURLOrAddressBox:null,NewBrowserWindowHasDirectoriesOrExtraButtons:null,NewBrowserWindowHasStatusBar:null,NewBrowserWindowHasMenuBar:null,NewBrowserWindowCopyHistory:null,Tag:null,Theme:null,HasGloss:null,ControlNameID:null,Depth:null,ClickFunction:null,DrawFunction:null,Initialize:function(){return createButton(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.EdgeRadius,this.Depth,this.Theme,this.HasGloss,this.ClickFunction,this.DrawFunction,this.BottomColorStart,this.BottomColorEnd,this.TopColorStart,this.TopColorEnd,this.BorderColor,this.Tag,this.IsHyperlink,this.URL,this.NoBrowserHistory,this.IsNewBrowserWindow,this.NameOfNewBrowserWindow,this.WidthOfNewBrowserWindow,this.HeightOfNewBrowserWindow,this.NewBrowserWindowIsResizable,this.NewBrowserWindowHasScrollBars,this.NewBrowserWindowHasToolbar,this.NewBrowserWindowHasLocationOrURLOrAddressBox,this.NewBrowserWindowHasDirectoriesOrExtraButtons,this.NewBrowserWindowHasStatusBar,this.NewBrowserWindowHasMenuBar,this.NewBrowserWindowCopyHistory)}};function createButton(D,J,I,H,a,d,w,K,r,l,j,i,A,q,e,c,s,F,b,k,E,L,n,f,N,m,o,v,p,h,G,M,B,C,g,z,t){var u=createWindow(D,I,H,a,d,i,null,"Button",J);buttonPropsArray.push({CanvasID:D,WindowID:u,X:I,Y:H,Width:a,Height:d,Text:w,EdgeRadius:j,BottomColorStart:s,BottomColorEnd:F,TopColorStart:b,TopColorEnd:k,TextHeight:r,TextFontString:l,TextColor:K,IsPressed:0,BorderColor:E,IsHyperlink:n,URL:f,NoBrowserHistory:N,IsNewBrowserWindow:m,NameOfNewBrowserWindow:o,WidthOfNewBrowserWindow:v,HeightOfNewBrowserWindow:p,NewBrowserWindowIsResizable:h,NewBrowserWindowHasScrollBars:G,NewBrowserWindowHasToolbar:M,NewBrowserWindowHasLocationOrURLOrAddressBox:B,NewBrowserWindowHasDirectoriesOrExtraButtons:C,NewBrowserWindowHasStatusBar:g,NewBrowserWindowHasMenuBar:z,NewBrowserWindowCopyHistory:t,Tag:L,Theme:A,HasGloss:q});registerClickFunction(u,function(){if(n==1){if(m==1){var y="";var x=0;if(v!=null){y+="width="+v;x=1}if(p!=null){y+=(x==1?",":"")+"height="+p}if(h!=null){y+=(x==1?",":"")+"resizable="+h}if(G!=null){y+=(x==1?",":"")+"scrollbars="+G}if(M!=null){y+=(x==1?",":"")+"toolbar="+M}if(B!=null){y+=(x==1?",":"")+"location="+B}if(newbroserwindowhasdirectoriesorextrabuttons!=null){y+=(x==1?",":"")+"directories="+newbroserwindowhasdirectoriesorextrabuttons}if(g!=null){y+=(x==1?",":"")+"status="+g}if(z!=null){y+=(x==1?",":"")+"menubar="+z}if(t!=null){y+=(x==1?",":"")+"copyhistory="+t}window.open(f,(navigator.userAgent.toLowerCase().indexOf("msie")==-1?o:o.replace(/ /g,"")),y)}else{if(N==1){window.location.replace(f)}else{window.location.href=f}}}else{getButtonProps(D,u).IsPressed=0;e(D,u)}},D);registerMouseDownFunction(u,function(y,x){getButtonProps(y,x).IsPressed=1},D);registerMouseUpFunction(D,function(y,x){getButtonProps(y,x).IsPressed=0},D);if(c!=undefined&&c!=null){registerWindowDrawFunction(u,function(){c(D,u)},D)}else{registerWindowDrawFunction(u,function(){defaultButtonDrawFunction(D,u)},D)}return u}var scrollBarPropsArray=new Array();function getScrollBarProps(c,a){for(var b=0;b<scrollBarPropsArray.length;b++){if(scrollBarPropsArray[b].CanvasID==c&&scrollBarPropsArray[b].WindowID==a){return scrollBarPropsArray[b]}}}function drawScrollBar(a,e){var j=getScrollBarProps(a,e);var h=j.X,f=j.Y,c=j.Len,d=(j.MaxItems==0?1:j.MaxItems),i=j.SelectedID;var k=getCtx(a);if(j.Alignment==1){k.clearRect(j.X,j.Y,15,j.Len);var b=k.createLinearGradient(h,f,h+15,f);b.addColorStop(0,"#e3e3e3");b.addColorStop(0.5,"#ededed");b.addColorStop(1,"#e5e5e5");k.fillStyle=b;k.beginPath();k.rect(h,f,15,c);k.fill();k.lineCap="butt";k.strokeStyle="#3c7fb1";k.beginPath();k.rect(h,f,15,15);k.stroke();k.fillStyle="#dcf0fb";k.beginPath();k.rect(h+1,f+1,6,13);k.fill();k.fillStyle="#a7d8f3";k.beginPath();k.rect(h+8,f+1,6,13);k.fill();k.strokeStyle="#c0e4f8";k.beginPath();k.moveTo(h+7,f+1);k.lineTo(h+7,f+14);k.stroke();var b=k.createLinearGradient(h+7,f+6,h+7,f+10);b.addColorStop(0,"#4e9ac4");b.addColorStop(1,"#0d2a3a");k.fillStyle=b;k.beginPath();k.moveTo(h+8,f+6);k.lineTo(h+11,f+10);k.lineTo(h+4,f+10);k.closePath();k.fill();k.lineCap="butt";k.strokeStyle="#3c7fb1";k.beginPath();k.rect(h,f+c-15,15,15);k.stroke();k.fillStyle="#dcf0fb";k.beginPath();k.rect(h+1,f+c-15+1,6,13);k.fill();k.fillStyle="#a7d8f3";k.beginPath();k.rect(h+8,f+c-15+1,6,13);k.fill();k.strokeStyle="#c0e4f8";k.beginPath();k.moveTo(h+7,f+c-15+1);k.lineTo(h+7,f+c-15+14);k.stroke();var b=k.createLinearGradient(h+7,f+c-15+6,h+7,f+c-15+10);b.addColorStop(0,"#0d2a3a");b.addColorStop(1,"#4e9ac4");k.fillStyle=b;k.beginPath();k.moveTo(h+4,f+c-15+6);k.lineTo(h+11,f+c-15+6);k.lineTo(h+7,f+c-15+10);k.closePath();k.fill();k.lineWidth=1;k.strokeStyle="#15598a";k.beginPath();k.rect(h,f+((i*(c-55))/d)+16,15,25);k.stroke();k.fillStyle="#6ac1e5";k.beginPath();k.rect(h+8,f+((i*(c-55))/d)+16+1,6,23);k.fill();k.fillStyle="#b7e4f7";k.beginPath();k.rect(h+1,f+((i*(c-55))/d)+16+1,6,23);k.fill();k.strokeStyle="#8fd5f3";k.beginPath();k.moveTo(h+8,f+((i*(c-55))/d)+16+1);k.lineTo(h+8,f+((i*(c-55))/d)+16+22);k.stroke();var b=k.createLinearGradient(h+4,f+((i*(c-55))/d)+16+8,h+10,f+((i*(c-55))/d)+16+8);b.addColorStop(0,"#2b404b");b.addColorStop(1,"#5888a1");k.strokeStyle=b;k.beginPath();k.moveTo(h+4,f+((i*(c-55))/d)+16+8);k.lineTo(h+10,f+((i*(c-55))/d)+16+8);k.stroke();k.beginPath();k.moveTo(h+4,f+((i*(c-55))/d)+16+11);k.lineTo(h+10,f+((i*(c-55))/d)+16+11);k.stroke();k.beginPath();k.moveTo(h+4,f+((i*(c-55))/d)+16+14);k.lineTo(h+10,f+((i*(c-55))/d)+16+14);k.stroke();var b=k.createLinearGradient(h+4,f+((i*(c-55))/d)+16+8,h+10,f+((i*(c-55))/d)+16+8);b.addColorStop(0,"#447791");b.addColorStop(1,"#96bed3");k.strokeStyle=b;k.beginPath();k.moveTo(h+4,f+((i*(c-55))/d)+16+9);k.lineTo(h+10,f+((i*(c-55))/d)+16+9);k.stroke();k.beginPath();k.moveTo(h+4,f+((i*(c-55))/d)+16+12);k.lineTo(h+10,f+((i*(c-55))/d)+16+12);k.stroke();k.beginPath();k.moveTo(h+4,f+((i*(c-55))/d)+16+15);k.lineTo(h+10,f+((i*(c-55))/d)+16+15);k.stroke()}else{k.clearRect(j.X,j.Y,j.Len,15);var b=k.createLinearGradient(h,f,h,f+15);b.addColorStop(0,"#e3e3e3");b.addColorStop(0.5,"#ededed");b.addColorStop(1,"#e5e5e5");k.fillStyle=b;k.beginPath();k.rect(h,f,c,15);k.fill();k.lineCap="butt";k.strokeStyle="#3c7fb1";k.beginPath();k.rect(h,f,15,15);k.stroke();k.fillStyle="#dcf0fb";k.beginPath();k.rect(h+1,f+1,13,6);k.fill();k.fillStyle="#a7d8f3";k.beginPath();k.rect(h+1,f+8,13,6);k.fill();k.strokeStyle="#c0e4f8";k.beginPath();k.moveTo(h+1,f+7);k.lineTo(h+14,f+7);k.stroke();var b=k.createLinearGradient(h+6,f+7,h+10,f+7);b.addColorStop(0,"#4e9ac4");b.addColorStop(1,"#0d2a3a");k.fillStyle=b;k.beginPath();k.moveTo(h+6,f+8);k.lineTo(h+10,f+11);k.lineTo(h+10,f+4);k.closePath();k.fill();k.lineCap="butt";k.strokeStyle="#3c7fb1";k.beginPath();k.rect(h+c-15,f,15,15);k.stroke();k.fillStyle="#dcf0fb";k.beginPath();k.rect(h+c-15+1,f,13,6);k.fill();k.fillStyle="#a7d8f3";k.beginPath();k.rect(h+c-15+1,f+8,13,6);k.fill();k.strokeStyle="#c0e4f8";k.beginPath();k.moveTo(h+c-15+1,f+7);k.lineTo(h+c-1,f+7);k.stroke();var b=k.createLinearGradient(h+c-15+6,f+7,h+c-15+10,f+7);b.addColorStop(0,"#0d2a3a");b.addColorStop(1,"#4e9ac4");k.fillStyle=b;k.beginPath();k.moveTo(h+c-15+6,f+4);k.lineTo(h+c-15+10,f+8);k.lineTo(h+c-15+6,f+11);k.closePath();k.fill();k.lineWidth=1;k.strokeStyle="#15598a";k.beginPath();k.rect(h+((i*(c-55))/d)+16,f,25,15);k.stroke();k.fillStyle="#6ac1e5";k.beginPath();k.rect(h+((i*(c-55))/d)+16+1,f+8,23,6);k.fill();k.fillStyle="#b7e4f7";k.beginPath();k.rect(h+((i*(c-55))/d)+16+1,f+1,23,6);k.fill();k.strokeStyle="#8fd5f3";k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+1,f+8);k.lineTo(h+((i*(c-55))/d)+16+22,f+8);k.stroke();var b=k.createLinearGradient(h+((i*(c-55))/d)+16+8,f+4,h+((i*(c-55))/d)+16+8,f+10);b.addColorStop(0,"#2b404b");b.addColorStop(1,"#5888a1");k.strokeStyle=b;k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+8,f+4);k.lineTo(h+((i*(c-55))/d)+16+8,f+10);k.stroke();k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+11,f+4);k.lineTo(h+((i*(c-55))/d)+16+11,f+10);k.stroke();k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+14,f+4);k.lineTo(h+((i*(c-55))/d)+16+14,f+10);k.stroke();var b=k.createLinearGradient(h+((i*(c-55))/d)+16+8,f+4,h+((i*(c-55))/d)+16+8,f+10);b.addColorStop(0,"#447791");b.addColorStop(1,"#96bed3");k.strokeStyle=b;k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+9,f+4);k.lineTo(h+((i*(c-55))/d)+16+9,f+10);k.stroke();k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+12,f+4);k.lineTo(h+((i*(c-55))/d)+16+12,f+10);k.stroke();k.beginPath();k.moveTo(h+((i*(c-55))/d)+16+15,f+4);k.lineTo(h+((i*(c-55))/d)+16+15,f+10);k.stroke()}}function scrollBarClick(d,b,f){var c=getScrollBarProps(d,b);var h=f.calcX;var a=f.calcY;if(c.Alignment==1){if(h>c.X&&h<c.X+15&&a>c.Y&&a<c.Y+15&&c.SelectedID-1>=0){if(c.CustomIncrementFunction){c.CustomIncrementFunction(getSelectedTag(c.CanvasID,c.WindowID),c,0)}--c.SelectedID}else{if(h>c.X&&h<c.X+15&&a>c.Y+c.Len-15&&a<c.Y+c.Len&&c.SelectedID+1<c.MaxItems){if(c.CustomIncrementFunction){c.CustomIncrementFunction(getSelectedTag(c.CanvasID,c.WindowID),c,1)}++c.SelectedID}}}else{if(h>c.X&&h<c.X+15&&a>c.Y&&a<c.Y+15&&c.SelectedID-1>=0){if(c.CustomIncrementFunction){c.CustomIncrementFunction(getSelectedTag(c.CanvasID,c.WindowID),c,0)}--c.SelectedID}else{if(h>c.X+c.Len-15&&h<c.X+c.Len&&a>c.Y&&a<c.Y+15&&c.SelectedID+1<c.MaxItems){if(c.CustomIncrementFunction){c.CustomIncrementFunction(getSelectedTag(c.CanvasID,c.WindowID),c,1)}++c.SelectedID}}}var g=getWindowProps(d,c.OwnedByWindowID);if(g){invalidateRect(d,null,g.X,g.Y,g.Width,g.Height)}}function scrollBarMouseDown(d,b,f){var c=getScrollBarProps(d,b);var a=f.calcX;var g=f.calcY;if(c.Alignment==1){if(a>c.X&&a<c.X+15&&g>c.Y+((c.SelectedID*(c.Len-55))/c.MaxItems)+16&&g<c.Y+((c.SelectedID*(c.Len-55))/c.MaxItems)+16+25){c.MouseDownState=1}}else{if(g>c.Y&&g<c.Y+15&&a>c.X+((c.SelectedID*(c.Len-55))/c.MaxItems)+16&&a<c.X+((c.SelectedID*(c.Len-55))/c.MaxItems)+16+25){c.MouseDownState=1}}}function scrollBarMouseMove(f,b,g){var d=getScrollBarProps(f,b);var c=d.SelectedID;if(d.MouseDownState==1){if(d.Alignment==1){var i=g.calcY;if(i<d.Y){d.SelectedID=1}else{if(i>d.Y+d.Len){d.SelectedID=d.MaxItems}else{d.SelectedID=Math.floor(((i-d.Y)*d.MaxItems)/d.Len)}}}else{var a=g.calcX;if(a<d.X){d.SelectedID=1}else{if(a>d.X+d.Len){d.SelectedID=d.MaxItems}else{d.SelectedID=Math.floor(((a-d.X)*d.MaxItems)/d.Len)}}}if(d.CustomMouseMoveFunction!=null){d.CustomMouseMoveFunction(d,d.SelectedID)}}if(d.SelectedID!=c){var h=getWindowProps(f,d.OwnedByWindowID);if(h){invalidateRect(f,null,h.X,h.Y,h.Width,h.Height)}}}function scrollBarMouseUp(c,a){var b=getScrollBarProps(c,a);b.MouseDownState=0}function scrollBarLostFocus(c,a){var b=getScrollBarProps(c,a);b.MouseDownState=0}var scrollbarSelectedTags=new Array();function setSelectedTag(d,a,e){var c=0;for(var b=0;b<scrollbarSelectedTags.length;b++){if(scrollbarSelectedTags[b][0]==d&&scrollbarSelectedTags[b][1]==a){c=1;scrollbarSelectedTags[b][2]=e;break}}if(c==0){scrollbarSelectedTags.push([d,a,e])}}function getSelectedTag(c,a){for(var b=0;b<scrollbarSelectedTags.length;b++){if(scrollbarSelectedTags[b][0]==c&&scrollbarSelectedTags[b][1]==a){return scrollbarSelectedTags[b][2]}}}function CCLScrollbar(){}CCLScrollbar.prototype={CanvasID:null,WindowID:null,X:null,Y:null,Len:null,SelectedID:null,MaxItems:null,Alignment:null,MouseDownState:null,Tag:null,OwnedByWindowID:null,DrawFunction:null,CustomIncrementFunction:null,CustomMouseMoveFunction:null,ControlNameID:null,Depth:null,ClickFunction:null,SelectedTag:null,Initialize:function(){return createScrollBar(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Len,this.Depth,this.MaxItems,this.Alignment,this.OwnedByWindowID,this.DrawFunction,this.ClickFunction,this.Tag,this.CustomIncrementFunction,this.SelectedTag,this.CustomMouseMoveFunction)}};function createScrollBar(a,d,o,n,j,f,k,m,i,e,c,p,b,h,g){var l;if(m==1){l=createWindow(a,o,n,15,j,f,null,"ScrollBar",d)}else{l=createWindow(a,o,n,j,15,f,null,"ScrollBar",d)}scrollBarPropsArray.push({CanvasID:a,WindowID:l,X:o,Y:n,Len:j,SelectedID:0,MaxItems:k,Alignment:m,MouseDownState:0,Tag:p,OwnedByWindowID:i,DrawFunction:e,CustomIncrementFunction:b,CustomMouseMoveFunction:g});if(c==null){registerClickFunction(l,scrollBarClick,a)}else{registerClickFunction(l,c,a)}if(e==null){registerWindowDrawFunction(l,function(){drawScrollBar(a,l)},a)}else{registerWindowDrawFunction(l,function(){e(a,l)},a)}registerMouseDownFunction(l,scrollBarMouseDown,a);registerMouseMoveFunction(l,scrollBarMouseMove,a);registerMouseUpFunction(l,scrollBarMouseUp,a);registerLostFocusFunction(a,l,scrollBarLostFocus);return l}var gridPropsArray=new Array();function getGridProps(c,a){for(var b=0;b<gridPropsArray.length;b++){if(gridPropsArray[b].CanvasID==c&&gridPropsArray[b].WindowID==a){return gridPropsArray[b]}}}function CCLGrid(){}CCLGrid.prototype={CanvasID:null,WindowID:null,X:null,Y:null,Width:null,Height:null,RowData:null,HeaderData:null,RowDataTextColor:null,RowDataTextFontString:null,HeaderDataTextColor:null,HeaderDataTextHeight:null,HeaderDataTextFontString:null,CellClickFunction:null,DataRowHeight:null,ColumnWidthArray:null,HeaderRowHeight:null,HasBorder:null,BorderColor:null,BorderLineWidth:null,VScrollBarWindowId:null,HScrollBarWindowId:null,HeaderBackgroundStartColor:null,HeaderBackgroundEndColor:null,AltRowBgColorStart1:null,AltRowBgColorEnd1:null,AltRowBgColorStart2:null,AltRowBgColorEnd2:null,Tag:null,HasSelectedRow:null,SelectedRowBgColor:null,HasSelectedCell:null,SelectedCellBgColor:null,SelectedRow:null,SelectedCell:null,HasSorting:null,SortableColumnsArray:null,HasSortImages:null,SortImageURLsArray:null,SortImageShowIndex:null,SortedData:null,CustomSortFunction:null,HasFilters:null,FilterColumnsArray:null,HasFilterImageIcon:null,FilterImageIcon:null,FilteredData:null,SortClickExtents:null,HasUIDs:null,UIDs:null,ControlNameID:null,DrawHeaderCellFunction:null,DrawRowDataCellFunction:null,RowDataTextHeight:null,Depth:null,Initialize:function(){return createGrid(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.RowData,this.HeaderData,this.RowDataTextColor,this.RowDataTextHeight,this.RowDataTextFontString,this.HeaderDataTextColor,this.HeaderDataTextHeight,this.HeaderDataTextFontString,this.DrawRowDataCellFunction,this.DrawHeaderCellFunction,this.CellClickFunction,this.DataRowHeight,this.HeaderRowHeight,this.ColumnWidthArray,this.HasBorder,this.BorderColor,this.BorderLineWidth,this.HeaderBackgroundStartColor,this.HeaderBackgroundEndColor,this.AltRowBgColorStart1,this.AltRowBgColorEnd1,this.AltRowBgColorStart2,this.AltRowBgColorEnd2,this.Tag,this.HasSelectedRow,this.SelectedRowBgColor,this.HasSelectedCell,this.SelectedCellBgColor,this.HasSorting,this.SortableColumnsArray,this.HasSortImages,this.SortImageURLsArray,this.SortImageShowIndex,this.CustomSortFunction,this.HasUIDs,this.UIDs,this.HasFilters,this.FilterColumnsArray,this.HasFilterImageIcon,this.FilterImageIcon)}};function createGrid(L,R,Q,P,a,d,g,T,h,e,B,ac,I,aa,K,D,t,F,H,s,c,Z,M,n,X,v,q,o,p,m,V,E,w,C,ab,O,l,N,r,S,j,W,b,k,J,u,A){var z=createWindow(L,Q,P,a,d,g,null,"Grid");var G=0;for(var Y=0;Y<c.length;Y++){G+=c[Y]}var f=s+(H*T.length);var ad=null;if(f>d){ad=createScrollBar(L,R+"VS",Q+a,P,d,g,T.length,1,z)}var U=null;if(G>a){U=createScrollBar(L,R+"HS",Q,P+d,a,g,c.length,0,z)}gridPropsArray.push({CanvasID:L,WindowID:z,X:Q,Y:P,Width:a,Height:d,RowData:T,HeaderData:h,RowDataTextColor:e,RowDataTextFontString:ac,HeaderDataTextColor:I,HeaderDataTextHeight:aa,HeaderDataTextFontString:K,CellClickFunction:F,DataRowHeight:H,ColumnWidthArray:c,HeaderRowHeight:s,HasBorder:Z,BorderColor:M,BorderLineWidth:n,VScrollBarWindowId:ad,HScrollBarWindowId:U,HeaderBackgroundStartColor:X,HeaderBackgroundEndColor:v,AltRowBgColorStart1:q,AltRowBgColorEnd1:o,AltRowBgColorStart2:p,AltRowBgColorEnd2:m,Tag:V,HasSelectedRow:E,SelectedRowBgColor:w,HasSelectedCell:C,SelectedCellBgColor:ab,SelectedRow:-1,SelectedCell:-1,HasSorting:O,SortableColumnsArray:l,HasSortImages:N,SortImageURLsArray:r,SortImageShowIndex:S,SortedData:T,CustomSortFunction:j,HasFilters:k,FilterColumnsArray:J,HasFilterImageIcon:u,FilterImageIcon:A,FilteredData:T,SortClickExtents:new Array(),HasUIDs:W,OrigUIDs:b,SortedUIDs:b,DrawHeaderCellFunction:t,DrawRowDataCellFunction:D,RowDataTextHeight:B});if(O==1&&checkIfAllUnsorted(getGridProps(L,z))==0){if(j!=null){j(getGridProps(L,z))}else{sortGridData(getGridProps(L,z))}}registerWindowDrawFunction(z,drawGrid,L);registerClickFunction(z,clickGrid,L);return z}function drawGrid(b,n){var h=getGridProps(b,n);var d=getScrollBarProps(b,h.VScrollBarWindowId);var s=getScrollBarProps(b,h.HScrollBarWindowId);var p=getCtx(b);var o=0;if(d!=null){o=d.SelectedID}var e=0;if(s!=null){e=s.SelectedID}var j=0;h.SortClickExtents=new Array();for(var m=e;m<h.ColumnWidthArray.length;m++){if(j>=h.Width){break}j+=h.ColumnWidthArray[m];var k=p.createLinearGradient(h.X+j-h.ColumnWidthArray[m],h.Y,h.X+j-h.ColumnWidthArray[m],h.Y+h.HeaderRowHeight);k.addColorStop(0,h.HeaderBackgroundStartColor);k.addColorStop(1,h.HeaderBackgroundEndColor);p.fillStyle=k;p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y,(j>h.Width?h.ColumnWidthArray[m]+h.Width-j:h.ColumnWidthArray[m]),h.HeaderRowHeight);p.fill();p.save();p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y,(j>h.Width?h.ColumnWidthArray[m]+h.Width-j:h.ColumnWidthArray[m]),h.HeaderRowHeight);p.clip();p.fillStyle=h.HeaderDataTextColor;p.font=h.HeaderDataTextFontString;p.fillText(h.HeaderData[m],h.X+j-h.ColumnWidthArray[m],h.Y+h.HeaderRowHeight-((h.HeaderRowHeight-h.HeaderDataTextHeight)/2));p.restore();if(h.HasBorder==1){p.strokeStyle=h.BorderColor;p.lineWidth=h.BorderLineWidth;p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y,h.ColumnWidthArray[m]+h.Width-j,h.HeaderRowHeight);p.stroke()}var l=getGridSortedColumnIndex(h,m);if(h.HasSorting==1&&l>-1){var i=h.Y+((h.HeaderRowHeight-9)/2);if(h.SortableColumnsArray[l][2]=="Ascending"){p.strokeStyle="#FFFFFF";p.beginPath();p.moveTo(h.X+j-6,i+3);p.lineTo(h.X+j-6,i+12);p.lineTo(h.X+j-9,i+9);p.moveTo(h.X+j-2,i+9);p.lineTo(h.X+j-6,i+12);p.stroke();h.SortClickExtents.push([m,h.X+j-9,i+3,7,9])}else{if(h.SortableColumnsArray[l][2]=="Descending"){p.strokeStyle="#FFFFFF";p.beginPath();p.moveTo(h.X+j-6,i+12);p.lineTo(h.X+j-6,i+3);p.lineTo(h.X+j-9,i+5);p.moveTo(h.X+j-2,i+5);p.lineTo(h.X+j-6,i+3);p.stroke();h.SortClickExtents.push([m,h.X+j-9,i+3,7,9])}else{if(h.SortableColumnsArray[l][2]=="Unsorted"){p.strokeStyle="#FFFFFF";p.beginPath();p.rect(h.X+j-11,i+3,9,9);p.stroke();h.SortClickExtents.push([m,h.X+j-11,i+3,9,9])}}}}}var f=0;for(var a=o;a<(h.HasSorting==1?h.SortedData.length:h.RowData.length);a++){if(((a-o)*h.DataRowHeight)+h.HeaderRowHeight>=h.Height){break}var j=0;for(var m=e;m<h.ColumnWidthArray.length;m++){if(j>=h.Width){break}j+=h.ColumnWidthArray[m];p.save();p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)+h.HeaderRowHeight,(j>h.Width?h.ColumnWidthArray[m]+h.Width-j:h.ColumnWidthArray[m]),h.DataRowHeight);p.clip();var q=p.createLinearGradient(h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)+h.HeaderRowHeight,h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)+h.HeaderRowHeight+h.DataRowHeight);if(f==0){q.addColorStop(0,h.AltRowBgColorStart1);q.addColorStop(1,h.AltRowBgColorEnd1)}else{q.addColorStop(0,h.AltRowBgColorStart2);q.addColorStop(1,h.AltRowBgColorEnd2)}p.fillStyle=q;p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)+h.HeaderRowHeight,(j>h.Width?h.ColumnWidthArray[m]+h.Width-j:h.ColumnWidthArray[m]),h.DataRowHeight);p.fill();if(h.HasSelectedRow==1&&h.SelectedRowBgColor&&a==h.SelectedRow){p.fillStyle=h.SelectedRowBgColor;p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)+h.HeaderRowHeight,(j>h.Width?h.ColumnWidthArray[m]+h.Width-j:h.ColumnWidthArray[m]),h.DataRowHeight);p.fill()}if(h.HasSelectedCell==1&&h.SelectedCellBgColor&&m==h.SelectedCell){p.fillStyle=h.SelectedCellBgColor;p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)-((h.DataRowHeight-h.HeaderDataTextHeight)/2)+h.HeaderRowHeight+h.DataRowHeight,h.ColumnWidthArray[m],h.DataRowHeight);p.fill()}p.beginPath();if((h.HasSorting==1?h.SortedData:h.RowData)[a][m]){p.fillStyle=h.RowDataTextColor;p.font=h.RowDataTextFontString;p.fillText((h.HasSorting==1?h.SortedData:h.RowData)[a][m],h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)-((h.DataRowHeight-h.HeaderDataTextHeight)/2)+h.HeaderRowHeight+h.DataRowHeight)}p.restore();if(h.HasBorder==1){p.strokeStyle=h.BorderColor;p.lineWidth=h.BorderLineWidth;p.beginPath();p.rect(h.X+j-h.ColumnWidthArray[m],h.Y+((a-o)*h.DataRowHeight)+h.HeaderRowHeight,h.ColumnWidthArray[m]+h.Width-j,h.DataRowHeight);p.stroke()}}if(f==1){f=0}else{f=1}}}function clickGrid(b,o,m){var g=getGridProps(b,o);var d=getScrollBarProps(b,g.VScrollBarWindowId);var u=getScrollBarProps(b,g.HScrollBarWindowId);var q=m.calcX;var p=m.calcY;var s=0;if(d!=null){s=d.SelectedID}var f=0;if(u!=null){f=u.SelectedID}for(var a=s;a<g.RowData.length;a++){if(((a-s)*g.DataRowHeight)+g.HeaderRowHeight>=g.Height){break}var l=0;for(var n=f;n<g.ColumnWidthArray.length;n++){if(l>=g.Width){break}l+=g.ColumnWidthArray[n];if(q>g.X+l-g.ColumnWidthArray[n]&&p>g.Y+((a-s)*g.DataRowHeight)+g.HeaderRowHeight&&q<g.X+l-g.ColumnWidthArray[n]+(l>g.Width?g.ColumnWidthArray[n]+g.Width-l:g.ColumnWidthArray[n])&&p<g.DataRowHeight+g.Y+((a-s)*g.DataRowHeight)+g.HeaderRowHeight){g.SelectedRow=a;g.SelectedCell=n;if(g.CellClickFunction){g.CellClickFunction(b,o,n+1,a+1)}return}}}var t=0;if(g.HasSorting==1){for(var k=0;k<g.SortClickExtents.length;k++){if(q>g.SortClickExtents[k][1]&&q<g.SortClickExtents[k][1]+g.SortClickExtents[k][3]&&p>g.SortClickExtents[k][2]&&p<g.SortClickExtents[k][2]+g.SortClickExtents[k][4]){for(var h=0;h<g.SortableColumnsArray.length;h++){if(g.SortableColumnsArray[h][0]==g.SortClickExtents[k][0]){if(g.SortableColumnsArray[h][2]=="Unsorted"){g.SortableColumnsArray[h][2]="Ascending";t=1}else{if(g.SortableColumnsArray[h][2]=="Ascending"){g.SortableColumnsArray[h][2]="Descending";t=1}else{if(g.SortableColumnsArray[h][2]="Descending"){g.SortableColumnsArray[h][2]="Unsorted";t=1}}}}}}}}if(t==1){if(g.CustomSortFunction!=null){g.CustomSortFunction(g)}else{sortGridData(g)}invalidateRect(g.CanvasID,null,g.X,g.Y,g.Width,g.Height)}}function getGridSortedColumnIndex(b,d){if(b.SortableColumnsArray){for(var a=0;a<b.SortableColumnsArray.length;a++){if(b.SortableColumnsArray[a][0]==d){return a}}}return -1}function checkIfAllUnsorted(b){for(var a=0;a<b.SortableColumnsArray.length;a++){if(b.SortableColumnsArray[a][2]!="Unsorted"){return 0}}return 1}function sortGridData(d){if(d.SortedData&&d.SortedData.length>1&&checkIfAllUnsorted(d)==0){var e=new Array();var f=new Array();e.push(d.SortedData[0]);if(d.HasUIDs==1){f.push(d.SortedUIDs[0])}for(var a=1;a<d.SortedData.length;a++){var j=e.length;for(var b=0;b<e.length;b++){var i=1;for(var k=0;k<d.SortedData[a].length;k++){var h=getGridSortedColumnIndex(d,k);if(h>-1){if(d.SortableColumnsArray[h][1]=="Alphabetical"&&d.SortableColumnsArray[h][2]!="Unsorted"){var g;if(d.SortableColumnsArray[h][1]=="Alphabetical"){g=d.SortedData[a][k]&&e[b][k]?d.SortedData[a][k].localeCompare(e[b][k]):d.SortedData[a][k]&&!e[b][k]?1:!d.SortedData[a][k]&&!e[b][k]?0:-1}else{if(d.SortableColumnsArray[h][1]=="Numerical"||d.SortableColumnsArray[h][1]=="Date"){g=d.SortedData[a][k]&&e[b][k]?Number(d.SortedData[a][k])>Number(e[b][k])?1:Number(d.SortedData[a][k])<Number(e[b][k])?-1:0:!d.SortedData[a][k]&&!e[b][k]?0:d.SortedData[a][k]&&!e[b][k]?1:-1}}if(d.SortableColumnsArray[h][2]=="Ascending"){if(g==1){g=-1}else{if(g=-1){g=1}}}if(g<=i){i=g}}}}if(i==1){j=b;break}else{j=b+1}}e.splice(j,0,d.SortedData[a]);if(d.HasUIDs==1){f.splice(j,0,d.SortedUIDs[a])}}d.SortedData=e;if(d.HasUIDs==1){d.SortedUIDs=f}}else{d.SortedData=d.RowData;if(d.HasUIDs==1){d.SortedUIDs=d.OrigUIDs}}}var comboboxPropsArray=new Array();function getComboboxPropsByTextAreaWindowId(c,a){for(var b=0;b<comboboxPropsArray.length;b++){if(comboboxPropsArray[b].CanvasID==c&&comboboxPropsArray[b].TextAreaWindowID==a){return comboboxPropsArray[b]}}}function getComboboxPropsByButtonWindowId(c,a){for(var b=0;b<comboboxPropsArray.length;b++){if(comboboxPropsArray[b].CanvasID==c&&comboboxPropsArray[b].ButtonWindowID==a){return comboboxPropsArray[b]}}}function getComboboxPropsByListAreaWindowId(c,a){for(var b=0;b<comboboxPropsArray.length;b++){if(comboboxPropsArray[b].CanvasID==c&&comboboxPropsArray[b].ListAreaWindowID==a){return comboboxPropsArray[b]}}}function getComboboxPropsByScrollBarWindowId(c,a){for(var b=0;b<comboboxPropsArray.length;b++){if(comboboxPropsArray[b].CanvasID==c&&comboboxPropsArray[b].VScrollBarWindowID==a){return comboboxPropsArray[b]}}}function CCLCombobox(){}CCLCombobox.prototype={CanvasID:null,TextAreaWindowID:null,ButtonWindowID:null,ListAreaWindowID:null,VScrollBarWindowID:null,X:null,Y:null,Width:null,Height:null,Data:null,SelectedID:null,TextAreaTextColor:null,TextAreaTextHeight:null,TextAreaFontString:null,ListAreaTextColor:null,ListAreaTextHeight:null,ListAreaFontString:null,OnSelectionChanged:null,Tag:null,DrawListAreaFunction:null,ListAreaClickFunction:null,ControlNameID:null,ButtonClickFunction:null,DrawButtonFunction:null,DrawTextAreaFunction:null,Depth:null,Initialize:function(){return createComboBox(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.DrawTextAreaFunction,this.DrawButtonFunction,this.DrawListAreaFunction,this.ButtonClickFunction,this.ListAreaClickFunction,this.TextAreaTextColor,this.TextAreaTextHeight,this.TextAreaFontString,this.ListAreaTextColor,this.ListAreaTextHeight,this.ListAreaFontString,this.OnSelectionChanged,this.Tag)}};function createComboBox(o,b,h,e,n,j,z,w,k,q,t,v,a,d,g,f,p,m,l,s,A){var i=createWindow(o,h,e,n-j,j,z,null,"ComboBoxTextArea",b+"ComboBoxTextArea");var c=createWindow(o,h+n-j,e,j,j,z,null,"ComboBoxButton",b+"ComboBoxButton");var r=createWindow(o,h,e+j,n-15,100,z,null,"ComboBoxListArea",b+"ComboBoxListArea");var u=createScrollBar(o,b+"VS",h+n-15,e+j,100,z,w.length,1,r,function(){drawComboboxScrollBar(o,u)},null);comboboxPropsArray.push({CanvasID:o,WindowID:i,TextAreaWindowID:i,ButtonWindowID:c,ListAreaWindowID:r,VScrollBarWindowID:u,X:h,Y:e,Width:n,Height:j,Data:w,SelectedID:0,TextAreaTextColor:d,TextAreaTextHeight:g,TextAreaFontString:f,ListAreaTextColor:p,ListAreaTextHeight:m,ListAreaFontString:l,OnSelectionChanged:s,Tag:A,DrawListAreaFunction:t,ListAreaClickFunction:a,ButtonClickFunction:v,DrawButtonFunction:q,DrawTextAreaFunction:k});if(k!=null){registerWindowDrawFunction(i,function(){k(o,i)},o)}else{registerWindowDrawFunction(i,function(){drawComboboxTextArea(o,i)},o)}if(q!=null){registerWindowDrawFunction(c,function(){q(o,c)},o)}else{registerWindowDrawFunction(c,function(){drawComboboxButton(o,c)},o)}if(t!=null){registerWindowDrawFunction(r,function(){t(o,r)},o)}else{registerWindowDrawFunction(r,function(){drawComboboxListArea(o,r)},o)}if(v!=null){registerClickFunction(c,v,o)}else{registerClickFunction(c,comboboxButtonClick,o)}if(a!=null){registerClickFunction(r,a,o)}else{registerClickFunction(r,comboboxListAreaClick,o)}registerModalWindow(o,r);registerHiddenWindow(o,r,1);registerModalWindow(o,u);registerHiddenWindow(o,u,1);registerLostFocusFunction(o,r,function(){comboboxListAreaLostFocus(o,r)});registerLostFocusFunction(o,i,function(){comboboxTextAreaLostFocus(o,i)});registerLostFocusFunction(o,u,function(){comboboxScrollBarLostFocus(o,u)});registerLostFocusFunction(o,c,function(){comboboxButtonLostFocus(o,c)});return i}function drawComboboxScrollBar(b,a){drawScrollBar(b,a)}function drawComboboxTextArea(c,a){var d=getComboboxPropsByTextAreaWindowId(c,a);var b=getCtx(c);b.clearRect(d.X,d.Y,d.Width,d.Height);b.fillStyle=d.TextAreaTextColor;b.font=d.TextAreaFontString;if(d.SelectedID<d.Data.length&&d.SelectedID>=0){b.fillText(d.Data[d.SelectedID],d.X+5,d.Y+d.Height-(d.TextAreaTextHeight/2))}else{b.fillText(d.Data[0],d.X+5,d.Y+d.Height-(d.TextAreaTextHeight/2))}b.strokeStyle="#b7bfc8";b.beginPath();b.rect(d.X,d.Y,d.Width-d.Height,d.Height);b.stroke()}function drawComboboxButton(d,a){var e=getComboboxPropsByButtonWindowId(d,a);var b=getCtx(d);b.lineCap="butt";b.strokeStyle="#3c7fb1";b.beginPath();b.rect(e.X+e.Width-e.Height,e.Y,e.Height,e.Height);b.stroke();b.fillStyle="#dcf0fb";b.beginPath();b.rect(e.X+e.Width-e.Height+1,e.Y+1,(e.Height/2)-2,e.Height-2);b.fill();b.strokeStyle="#c0e4f8";b.moveTo(e.X+e.Width-(e.Height/2)+1,e.Y+1);b.lineTo(e.X+e.Width-(e.Height/2)+1,e.Y+e.Height-1);b.stroke();b.fillStyle="#a7d8f3";b.beginPath();b.rect(e.X+e.Width-(e.Height/2)+1,e.Y+1,(e.Height/2)-2,e.Height-2);b.fill();var c=b.createLinearGradient(e.X+e.Width-(e.Height/2)-1,e.Y+(e.Height/2)-1,e.X+e.Width-(e.Height/2)-1,e.Y+(e.Height/2)+3);c.addColorStop(0,"#0d2a3a");c.addColorStop(1,"#4e9ac4");b.fillStyle=c;b.beginPath();b.moveTo(e.X+e.Width-(e.Height/2)-4,e.Y+(e.Height/2)-1);b.lineTo(e.X+e.Width-(e.Height/2)+3,e.Y+(e.Height/2)-1);b.lineTo(e.X+e.Width-(e.Height/2)-1,e.Y+(e.Height/2)+3);b.closePath();b.fill()}function comboboxButtonClick(b,a){var c=getComboboxPropsByButtonWindowId(b,a);if(checkIfHiddenWindow(b,c.ListAreaWindowID)==1){setHiddenWindowStatus(b,c.VScrollBarWindowID,0);setHiddenWindowStatus(b,c.ListAreaWindowID,0)}else{setHiddenWindowStatus(b,c.VScrollBarWindowID,1);setHiddenWindowStatus(b,c.ListAreaWindowID,1)}invalidateRect(b,null,c.X,c.Y,c.Width+1,c.Height+101)}function drawComboboxListArea(e,a){var f=getComboboxPropsByListAreaWindowId(e,a);var c=getScrollBarProps(e,f.VScrollBarWindowID);var b=getCtx(e);b.fillStyle="#FFFFFF";b.beginPath();b.rect(f.X,f.Y+f.Height,f.Width-15,100);b.fill();b.fillStyle=f.ListAreaTextColor;b.font=f.ListAreaFontString;for(var d=c.SelectedID;d<f.Data.length&&((f.ListAreaTextHeight+6)*(d-c.SelectedID+1))<100;d++){b.fillText(f.Data[d],f.X+5,f.Y+f.Height+((f.ListAreaTextHeight+6)*(d-c.SelectedID+1)))}b.strokeStyle="#b7bfc8";b.beginPath();b.rect(f.X,f.Y+f.Height,f.Width-15,100);b.stroke()}function comboboxListAreaClick(a,g,f){var h=getComboboxPropsByListAreaWindowId(a,g);var b=getScrollBarProps(a,h.VScrollBarWindowID);var k=f.calcX;var j=f.calcY;for(var d=b.SelectedID;d<h.Data.length&&((h.ListAreaTextHeight+6)*(d-b.SelectedID+1))<100;d++){if(k>h.X&&j>h.Y+h.Height+((h.ListAreaTextHeight+6)*(d-b.SelectedID))&&k<h.X+h.Width-15&&j<h.Y+h.Height+((h.ListAreaTextHeight+6)*(d-b.SelectedID+1))){if(h.SelectedID!=d){h.SelectedID=d;setHiddenWindowStatus(a,h.VScrollBarWindowID,1);setHiddenWindowStatus(a,h.ListAreaWindowID,1);var c=getCanvas(a);invalidateRect(a,null,0,0,c.width,c.height);if(h.OnSelectionChanged!=null){h.OnSelectionChanged(a,h.TextAreaWindowID,d)}}return}}}function comboboxListAreaLostFocus(b,a){var c=getComboboxPropsByListAreaWindowId(b,a);if(doesWindowHaveFocus(b,c.VScrollBarWindowID)==0&&doesWindowHaveFocus(b,c.TextAreaWindowID)==0&&doesWindowHaveFocus(b,c.ButtonWindowID)==0&&doingEventForWindowID!=c.ListAreaWindowID&&doingEventForWindowID!=c.VScrollBarWindowID){setHiddenWindowStatus(b,c.VScrollBarWindowID,1);setHiddenWindowStatus(b,c.ListAreaWindowID,1);invalidateRect(b,null,c.X,c.Y,c.Width+1,c.Height+101)}}function comboboxTextAreaLostFocus(b,a){var c=getComboboxPropsByTextAreaWindowId(b,a);if(doesWindowHaveFocus(b,c.VScrollBarWindowID)==0&&doesWindowHaveFocus(b,c.ListAreaWindowID)==0&&doesWindowHaveFocus(b,c.ButtonWindowID)==0&&doingEventForWindowID!=c.ListAreaWindowID&&doingEventForWindowID!=c.VScrollBarWindowID){setHiddenWindowStatus(b,c.VScrollBarWindowID,1);setHiddenWindowStatus(b,c.ListAreaWindowID,1);invalidateRect(b,null,c.X,c.Y,c.Width+1,c.Height+101)}}function comboboxButtonLostFocus(b,a){var c=getComboboxPropsByButtonWindowId(b,a);if(doesWindowHaveFocus(b,c.VScrollBarWindowID)==0&&doesWindowHaveFocus(b,c.ListAreaWindowID)==0&&doesWindowHaveFocus(b,c.TextAreaWindowID)==0&&doingEventForWindowID!=c.ListAreaWindowID&&doingEventForWindowID!=c.VScrollBarWindowID){setHiddenWindowStatus(b,c.VScrollBarWindowID,1);setHiddenWindowStatus(b,c.ListAreaWindowID,1);invalidateRect(b,null,c.X,c.Y,c.Width+1,c.Height+101)}}function comboboxScrollBarLostFocus(b,a){var c=getComboboxPropsByScrollBarWindowId(b,a);if(doesWindowHaveFocus(b,c.TextAreaWindowID)==0&&doesWindowHaveFocus(b,c.ListAreaWindowID)==0&&doesWindowHaveFocus(b,c.ButtonWindowID)==0&&doingEventForWindowID!=c.ListAreaWindowID&&doingEventForWindowID!=c.VScrollBarWindowID){setHiddenWindowStatus(b,c.VScrollBarWindowID,1);setHiddenWindowStatus(b,c.ListAreaWindowID,1);invalidateRect(b,null,c.X,c.Y,c.Width+1,c.Height+101)}}var checkboxPropsArray=new Array();function getcheckboxProps(c,a){for(var b=0;b<checkboxPropsArray.length;b++){if(checkboxPropsArray[b].CanvasID==c&&checkboxPropsArray[b].WindowID==a){return checkboxPropsArray[b]}}}function drawCheckbox(e,a){var c=getcheckboxProps(e,a);var b=getCtx(e);b.save();b.shadowOffsetX=1;b.shadowOffsetY=1;b.shadowBlur=5;b.shadowColor="#e3e3e3";b.strokeStyle="#3c7fb1";b.beginPath();b.rect(c.X,c.Y,15,15);b.stroke();b.lineCap="round";if(c.Status==1){b.lineWidth=4;var d=b.createLinearGradient(c.X,c.Y,c.X+15,c.Y+15);d.addColorStop(0,"#abffaf");d.addColorStop(1,"#00ff0c");b.strokeStyle=d;b.beginPath();b.moveTo(c.X+3,c.Y+9);b.lineTo(c.X+6,c.Y+12);b.lineTo(c.X+18,c.Y-3);b.stroke()}else{b.lineWidth=3;var d=b.createLinearGradient(c.X,c.Y,c.X+15,c.Y+15);d.addColorStop(0,"#ff2a2a");d.addColorStop(1,"#ff6b6b");b.strokeStyle=d;b.beginPath();b.moveTo(c.X+4,c.Y+4);b.lineTo(c.X+11,c.Y+11);b.moveTo(c.X+11,c.Y+4);b.lineTo(c.X+4,c.Y+11);b.stroke()}b.restore()}function CCLCheckbox(){}CCLCheckbox.prototype={CanvasID:null,X:null,Y:null,Status:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createCheckbox(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Depth,this.Status,this.Tag)}};function createCheckbox(f,e,c,h,g,d,b){var a=createWindow(f,c,h,15,15,g,null,"CheckBox",e);checkboxPropsArray.push({CanvasID:f,WindowID:a,X:c,Y:h,Status:d,Tag:b});registerClickFunction(a,function(){var i=getcheckboxProps(f,a);if(i.Status==1){i.Status=0}else{i.Status=1}},f);registerWindowDrawFunction(a,function(){drawCheckbox(f,a)},f);return a}var radiobuttonPropsArray=new Array();function getRadioButtonProps(c,a){for(var b=0;b<radiobuttonPropsArray.length;b++){if(radiobuttonPropsArray[b].CanvasID==c&&radiobuttonPropsArray[b].WindowID==a){return radiobuttonPropsArray[b]}}}function CCLRadioButtonGroup(){}CCLRadioButtonGroup.prototype={CanvasID:null,WindowID:null,X:null,Y:null,Width:null,Height:null,Alignment:null,GroupName:null,Labels:null,SelectedID:null,LabelTextColor:null,LabelFontString:null,Radius:null,LabelTextHeight:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createRadioButtonGroup(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Alignment,this.Depth,this.GroupName,this.Labels,this.SelectedID,this.LabelTextColor,this.LabelFontString,this.LabelTextHeight,this.Radius,this.Tag)}};function createRadioButtonGroup(m,a,j,h,g,u,e,q,b,o,r,s,d,v){var c=document.getElementById(m);var n=c.getContext("2d");n.font=r;var k=0;if(2*d>=s+8){k=2*d}else{k=s+8}var l=0;for(var p=0;p<q.length;p++){var t=n.measureText(q[p]).width;l+=t+8+(2*d)}var f=createWindow(m,j,h,l,k,u,null,"RadioButtonGroup",a);radiobuttonPropsArray.push({CanvasID:m,WindowID:f,X:j,Y:h,Width:l,Height:k,Alignment:g,GroupName:e,Labels:q,SelectedID:b,LabelTextColor:o,LabelFontString:r,Radius:d,ButtonExtents:new Array(),LabelTextHeight:s,Tag:v});registerWindowDrawFunction(f,function(z,C){var B=getRadioButtonProps(z,C);var x=getCtx(z);var D=0;x.font=B.LabelFontString;var w=new Array();for(var A=0;A<B.Labels.length;A++){x.fillStyle=B.LabelTextColor;x.fillText(B.Labels[A],B.X+D,B.Y+B.Height-((B.Height-B.LabelTextHeight)/2));var y=x.measureText(B.Labels[A]).width;x.fillStyle="#fcfcfc";x.beginPath();x.arc(B.X+D+y+4+B.Radius,B.Y+B.Radius+((B.Height-(B.Radius*2))/2),B.Radius,0,Math.PI*2,false);x.fill();x.lineWidth=1;x.strokeStyle="#c4c4c4";x.beginPath();x.arc(B.X+D+y+4+B.Radius,B.Y+B.Radius+((B.Height-(B.Radius*2))/2),B.Radius-1,(Math.PI/180)*315,(Math.PI/180)*135,false);x.stroke();x.strokeStyle="#141414";x.beginPath();x.arc(B.X+D+y+4+B.Radius,B.Y+B.Radius+((B.Height-(B.Radius*2))/2),B.Radius-1,(Math.PI/180)*135,(Math.PI/180)*315,false);x.stroke();x.strokeStyle="#808080";x.beginPath();x.arc(B.X+D+y+4+B.Radius,B.Y+B.Radius+((B.Height-(B.Radius*2))/2),B.Radius-1,(Math.PI/180)*135,(Math.PI/180)*315,false);x.stroke();if(A==B.SelectedID){x.fillStyle="#51852f";x.beginPath();x.arc(B.X+D+y+4+B.Radius,B.Y+B.Radius+((B.Height-(B.Radius*2))/2),B.Radius-4,0,Math.PI*2,false);x.fill()}w.push({X:B.X+D+y+4,Y:B.Y,Width:B.Radius*2,Height:B.Height});D+=y+8+(2*B.Radius)}B.ButtonExtents=w},m);registerClickFunction(f,function(w,A,z){var y=getRadioButtonProps(w,A);var C=z.calcX;var B=z.calcY;for(var x=0;x<y.ButtonExtents.length;x++){if(C>y.ButtonExtents[x].X&&C<y.ButtonExtents[x].X+y.ButtonExtents[x].Width&&B>y.ButtonExtents[x].Y&&B<y.ButtonExtents[x].Y+y.ButtonExtents[x].Height){y.SelectedID=x;break}}},m);return f}var imageControlPropsArray=new Array();function getImageControlProps(c,a){for(var b=0;b<imageControlPropsArray.length;b++){if(imageControlPropsArray[b].CanvasID==c&&imageControlPropsArray[b].WindowID==a){return imageControlPropsArray[b]}}}var imageControlImages=new Array();function setImageControlImage(a,d){var c=0;for(var b=0;b<imageControlImages.length;b++){if(imageControlImages[b].CanvasID==a.CanvasID&&imageControlImages[b].WindowID==a.WindowID){c=1;imageControlImages[b].Image=d}}if(c==0){imageControlImages.push({CanvasID:a.CanvasID,WindowID:a.WindowID,Image:d})}}function getImageControlImage(a){for(var b=0;b<imageControlImages.length;b++){if(imageControlImages[b].CanvasID==a.CanvasID&&imageControlImages[b].WindowID==a.WindowID){return imageControlImages[b].Image}}}function CCLImage(){}CCLImage.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImageURL:null,ClickFunction:null,AlreadyDrawnImage:null,IsHyperlink:null,URL:null,NoBrowserHistory:null,IsNewBrowserWindow:null,NameOfNewBrowserWindow:null,WidthOfNewBrowserWindow:null,HeightOfNewBrowserWindow:null,NewBrowserWindowIsResizable:null,NewBrowserWindowHasScrollBars:null,NewBrowserWindowHasToolbar:null,NewBrowserWindowHasLocationOrURLOrAddressBox:null,NewBrowserWindowHasDirectoriesOrExtraButtons:null,NewBrowserWindowHasStatusBar:null,NewBrowserWindowHasMenuBar:null,NewBrowserWindowCopyHistory:null,Tag:null,Tile:null,ControlNameID:null,Depth:null,Initialize:function(){return createImage(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.imgurl,this.ClickFunction,this.Tile,this.Tag,this.IsHyperlink,this.URL,this.NoBrowserHistory,this.IsNewBrowserWindow,this.NameOfNewBrowserWindow,this.WidthOfNewBrowserWindow,this.HeightOfNewBrowserWindow,this.NewBrowserWindowIsResizable,this.NewBrowserWindowHasScrollBars,this.NewBrowserWindowHasToolbar,this.NewBrowserWindowHasLocationOrURLOrAddressBox,this.NewBrowserWindowHasDirectoriesOrExtraButtons,this.NewBrowserWindowHasStatusBar,this.NewBrowserWindowHasMenuBar,this.NewBrowserWindowCopyHistory)}};function createImage(t,a,k,i,r,n,C,s,b,B,D,q,f,j,e,o,w,A,l,z,v,p,u,d,c,h){var g=createWindow(t,k,i,r,n,C,null,"Image",a);var m=new Image();m.onload=function(){invalidateRect(t,null,k,i,r,n)};imageControlPropsArray.push({CanvasID:t,WindowID:g,X:k,Y:i,Width:r,Height:n,ImageURL:s,ClickFunction:b,AlreadyDrawnImage:0,IsHyperlink:q,URL:f,NoBrowserHistory:j,IsNewBrowserWindow:e,NameOfNewBrowserWindow:o,WidthOfNewBrowserWindow:w,HeightOfNewBrowserWindow:A,NewBrowserWindowIsResizable:l,NewBrowserWindowHasScrollBars:z,NewBrowserWindowHasToolbar:v,NewBrowserWindowHasLocationOrURLOrAddressBox:p,NewBrowserWindowHasDirectoriesOrExtraButtons:u,NewBrowserWindowHasStatusBar:d,NewBrowserWindowHasMenuBar:c,NewBrowserWindowCopyHistory:h,Tag:D,Tile:B});m.src=s;setImageControlImage(getImageControlProps(t,g),m);registerWindowDrawFunction(g,function(x,J){var L=getCtx(x);var F=getImageControlProps(x,J);var G=getImageControlImage(F);if(G&&G.complete==true){if(F.Tile==1){var K=getWindowProps(x,J);if(K){var I=Math.ceil(K.Width/G.width);var H=Math.ceil(K.Height/G.height);for(var y=0;y<H;y++){for(var E=0;E<I;E++){L.drawImage(G,F.X+(E*G.width),F.Y+(y*G.height))}}}}else{L.drawImage(G,F.X,F.Y)}}},t);if(b!=null){registerClickFunction(g,function(){b(t,g)},t)}else{if(q==1){registerClickFunction(g,function(){if(e==1){var y="";var x=0;if(w!=null){y+="width="+w;x=1}if(A!=null){y+=(x==1?",":"")+"height="+A}if(l!=null){y+=(x==1?",":"")+"resizable="+l}if(z!=null){y+=(x==1?",":"")+"scrollbars="+z}if(v!=null){y+=(x==1?",":"")+"toolbar="+v}if(p!=null){y+=(x==1?",":"")+"location="+p}if(newbroserwindowhasdirectoriesorextrabuttons!=null){y+=(x==1?",":"")+"directories="+newbroserwindowhasdirectoriesorextrabuttons}if(d!=null){y+=(x==1?",":"")+"status="+d}if(c!=null){y+=(x==1?",":"")+"menubar="+c}if(h!=null){y+=(x==1?",":"")+"copyhistory="+h}window.open(f,o,y)}else{if(j==1){window.location.replace(f)}else{window.location.href=f}}},t)}}return g}var treeViewPropsArray=new Array();var iconImages=new Array();function getTreeViewProps(c,a){for(var b=0;b<treeViewPropsArray.length;b++){if(treeViewPropsArray[b].CanvasID==c&&treeViewPropsArray[b].WindowID==a){return treeViewPropsArray[b]}}}function findNumberOfExpandedNodesInAll(a){var c=0;for(var b=0;b<a.length;b++){if(a[b].Expanded==1){c++}if(a[b].ChildNodes.length>0){c+=findNumberOfExpandedNodesInAll(a[b].ChildNodes)}}return c}function findIfImageAlreadyInIconImages(c,a){for(var b=0;b<a.length;b++){if(a[b].ImageURL==c){return 1}}return 0}function fillIconImages(b,a){for(var c=0;c<b.length;c++){if(b[c].ImageURL!=null&&b[c].ImageURL.length>0&&findIfImageAlreadyInIconImages(b[c].ImageURL,a)==0){var d=new Image();d.onload=function(){};d.src=b[c].ImageURL;a.push({ImageURL:b[c].ImageURL,Image:d})}if(b[c].ChildNodes.length>0){fillIconImages(b[c].ChildNodes,a)}}return a}function findNodeIndex(c,a){for(var b=0;b<a.length;b++){if(c==a[b]){return b}else{if(a[b].ChildNodes&&a[b].ChildNodes.length>0){return b+findNodeIndex(c,a[b].ChildNodes)}}}return 0}function treeviewVSCustomIncrementFunction(b,e,c){var a=new Array();for(var d=0;d<b.TreeviewNodeInstancesRootNodes.length;d++){a.push(b.TreeviewNodeInstancesRootNodes[d]);if(b.TreeviewNodeInstancesRootNodes[d].ChildNodes.length>0&&b.TreeviewNodeInstancesRootNodes[d].Expanded==1){fillChildNodes(b.TreeviewNodeInstancesRootNodes[d].ChildNodes,a)}}for(var d=0;d<a.length;d++){if(getSelectedTag(e.CanvasID,e.WindowID)==a[d]){if(c==1){if(d+1<a.length){setSelectedTag(e.CanvasID,e.WindowID,a[d+1])}}else{if(d-1>=0){setSelectedTag(e.CanvasID,e.WindowID,a[d-1])}}break}}for(var d=0;d<treeViewPropsArray.length;d++){if(getTreeviewNodes(treeViewPropsArray[d])==b.TreeviewNodeInstancesRootNodes){invalidateRect(treeViewPropsArray[d].CanvasID,null,treeViewPropsArray[d].X,treeViewPropsArray[d].Y,treeViewPropsArray[d].Width,treeViewPropsArray[d].Height);setTreeviewSelectedNode(treeViewPropsArray[d],getSelectedTag(e.CanvasID,e.WindowID));break}}}function treeviewVSCustomMouseMoveFunction(f,b){var e=null;for(var d=0;d<treeViewPropsArray.length;d++){if(f.WindowID==treeViewPropsArray[d].VScrollBarWindowID){e=treeViewPropsArray[d]}}if(e!=null){var a=new Array();var c=getTreeviewNodes(e);for(var d=0;d<c.length;d++){a.push(c[d]);if(c[d].ChildNodes.length>0&&c[d].Expanded==1){fillChildNodes(c[d].ChildNodes,a)}}if(b>=0&&b<a.length){setSelectedTag(f.CanvasID,f.WindowID,a[b]);setTreeviewSelectedNode(e,a[b])}}}var treeviewNodesArray=new Array();function setTreeviewNodes(a,b){var d=0;for(var c=0;c<treeviewNodesArray.length;c++){if(treeviewNodesArray[c][0]==a.CanvasID&&treeviewNodesArray[c][1]==a.WindowID){d=1;treeviewNodesArray[c][2]=b}}if(d==0){treeviewNodesArray.push([a.CanvasID,a.WindowID,b])}}function getTreeviewNodes(a){for(var b=0;b<treeviewNodesArray.length;b++){if(treeviewNodesArray[b][0]==a.CanvasID&&treeviewNodesArray[b][1]==a.WindowID){return treeviewNodesArray[b][2]}}}var treeviewSelectedNodeArray=new Array();function setTreeviewSelectedNode(a,c){var d=0;for(var b=0;b<treeviewSelectedNodeArray.length;b++){if(treeviewSelectedNodeArray[b][0]==a.CanvasID&&treeviewSelectedNodeArray[b][1]==a.WindowID){d=1;treeviewSelectedNodeArray[b][2]=c}}if(d==0){treeviewSelectedNodeArray.push([a.CanvasID,a.WindowID,c])}}function getTreeviewSelectedNode(a){for(var b=0;b<treeviewSelectedNodeArray.length;b++){if(treeviewSelectedNodeArray[b][0]==a.CanvasID&&treeviewSelectedNodeArray[b][1]==a.WindowID){return treeviewSelectedNodeArray[b][2]}}}var treeviewClickLabelExtentsArray=new Array();function setTreeviewClickLabelExtents(b,a){var d=0;for(var c=0;c<treeviewClickLabelExtentsArray.length;c++){if(treeviewClickLabelExtentsArray[c][0]==b.CanvasID&&treeviewClickLabelExtentsArray[c][1]==b.WindowID){d=1;treeviewClickLabelExtentsArray[c][2]=a}}if(d==0){treeviewClickLabelExtentsArray.push([b.CanvasID,b.WindowID,a])}}function getTreeviewClickLabelExtents(a){for(var b=0;b<treeviewClickLabelExtentsArray.length;b++){if(treeviewClickLabelExtentsArray[b][0]==a.CanvasID&&treeviewClickLabelExtentsArray[b][1]==a.WindowID){return treeviewClickLabelExtentsArray[b][2]}}}var treeviewClickButtonExtentsArray=new Array();function setTreeviewClickButtonExtents(b,a){var d=0;for(var c=0;c<treeviewClickButtonExtentsArray.length;c++){if(treeviewClickButtonExtentsArray[c][0]==b.CanvasID&&treeviewClickButtonExtentsArray[c][1]==b.WindowID){d=1;treeviewClickButtonExtentsArray[c][2]=a}}if(d==0){treeviewClickButtonExtentsArray.push([b.CanvasID,b.WindowID,a])}}function getTreeviewClickButtonExtents(a){for(var b=0;b<treeviewClickButtonExtentsArray.length;b++){if(treeviewClickButtonExtentsArray[b][0]==a.CanvasID&&treeviewClickButtonExtentsArray[b][1]==a.WindowID){return treeviewClickButtonExtentsArray[b][2]}}}function CCLTreeview(){}CCLTreeview.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,VScrollBarWindowID:null,HScrollBarWindowID:null,ClickNodeFunction:null,Tag:null,HasIcons:null,IconWidth:null,IconHeight:null,TextColor:null,TextFontString:null,TextHeight:null,ControlNameID:null,Depth:null,Nodes:null,SelectedNode:null,Initialize:function(){return createTreeView(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Nodes,this.TextColor,this.TextFontString,this.TextHeight,this.ClickNodeFunction,this.Tag,this.HasIcons,this.IconWidth,this.IconHeight,this.SelectedNode)}};function createTreeView(p,a,h,f,m,j,v,n,s,g,i,r,w,d,q,u,k){var e=createWindow(p,h,f,m,j,v,null,"TreeView",a);var c=findNumberOfExpandedNodesInAll(n);iconImages=(d==1?fillIconImages(n,new Array()):new Array());var l=createScrollBar(p,a+"VS",h+m,f,j,v,c,1,e,null,null,null,treeviewVSCustomIncrementFunction,k!=null?k:n!=null&&n.length>0?n[0]:null,treeviewVSCustomMouseMoveFunction);var t=createScrollBar(p,a+"HS",h,f+j,m,v,c,0,e);var b=new Array();var o=new Array();treeViewPropsArray.push({CanvasID:p,WindowID:e,X:h,Y:f,Width:m,Height:j,VScrollBarWindowID:l,HScrollBarWindowID:t,ClickNodeFunction:r,Tag:w,HasIcons:d,IconWidth:q,IconHeight:u,TextColor:s,TextFontString:g,TextHeight:i});setTreeviewSelectedNode(getTreeViewProps(p,e),k!=null?k:n!=null&&n.length>0?n[0]:null);setTreeviewNodes(getTreeViewProps(p,e),n);setTreeviewClickLabelExtents(getTreeViewProps(p,e),o);setTreeviewClickButtonExtents(getTreeViewProps(p,e),b);registerWindowDrawFunction(e,drawTreeView,p);registerClickFunction(e,clickTreeView,p);return e}function toggleNodeExpandedState(a,b){if(b.Expanded==0){b.Expanded=1}else{b.Expanded=0}}function clickTreeView(a,g,f){var c=getTreeViewProps(a,g);var k=getScrollBarProps(a,c.VScrollBarWindowID);var j=f.calcX;var h=f.calcY;var d=getTreeviewClickButtonExtents(c);for(var b=0;b<d.length;b++){if(d[b].Node&&j>d[b].X&&j<d[b].X+9&&h>d[b].Y&&h<d[b].Y+9){toggleNodeExpandedState(c,d[b].Node);k.MaxItems=checkHowManyChildNodesAreExpandedInAll(getTreeviewNodes(c));invalidateRect(a,null,c.X,c.Y,c.Width,c.Height);return}}if(c.ClickNodeFunction!=null){var l=getTreeviewClickLabelExtents(c);for(var b=0;b<l.length;b++){if(l[b].TreeviewClickLabelExtentsNode&&j>l[b].X&&j<l[b].X+l[b].Width&&h>l[b].Y&&h<l[b].Y+l[b].TextHeight){c.ClickNodeFunction(a,g,l[b].TreeviewClickLabelExtentsNode);setTreeviewSelectedNode(c,l[b].TreeviewClickLabelExtentsNode);invalidateRect(a,null,c.X,c.Y,c.Width,c.Height);return}}}}function checkIfParentsAreExpanded(b,c){if(c.TreeviewNodeInstancesParentNode==null){return 1}var a=c;while(a.TreeviewNodeInstancesParentNode!=null){if(a.Expanded==0){return 0}a=a.TreeviewNodeInstancesParentNode}return 1}function checkIfStringAndConvertToInt(a){if(typeof a=="string"){return parseInt(a)}return a}function fillChildNodes(b,a){for(var c=0;c<b.length;c++){a.push(b[c]);if(b[c].ChildNodes.length>0&&b[c].Expanded==1){fillChildNodes(b[c].ChildNodes,a)}}}function drawTreeView(a,j){var g=getTreeViewProps(a,j);var l=getCtx(a);l.save();l.strokeStyle="#C0C0C0";l.beginPath();l.rect(g.X,g.Y,g.Width,g.Height);l.stroke();l.beginPath();l.rect(g.X,g.Y,g.Width,g.Height);l.clip();l.fillStyle=g.TextColor;l.font=g.TextFontString;var b=0;setTreeviewClickLabelExtents(g,new Array());var h=new Array();var e=getTreeviewNodes(g);for(var f=0;f<e.length;f++){h.push(e[f]);if(e[f].ChildNodes.length>0&&e[f].Expanded==1){fillChildNodes(e[f].ChildNodes,h)}}var d=0;for(var f=0;f<h.length&&b<g.Height;f++){if(h[f]==getTreeviewSelectedNode(g)){d=1}if(d==1){var k=4+g.Y+b;var c=findNodeLevel(h[f]);drawTreeViewNode(l,h[f],4+g.X,4+g.Y+b,g.TextColor,g.TextFontString,g.TextHeight,c,g.IconWidth,g.IconHeight,g);b+=(g.TextHeight>g.IconHeight?(g.TextHeight>9?g.TextHeight:9):(g.IconHeight>9?g.IconHeight:9))+8}}l.restore()}function findNodeLevel(a){if(a.TreeviewNodeInstancesParentNode==null){return 0}else{return 1+findNodeLevel(a.TreeviewNodeInstancesParentNode)}}function numberOfChildNodes(c){var b=c.ChildNodes.length;if(b>0){for(var a=0;a<c.ChildNodes.length;a++){b+=numberOfChildNodes(c.ChildNodes[a])}}return b}function checkHowManyChildNodesAreExpanded(c){var b=c.ChildNodes.length;if(b>0){for(var a=0;a<c.ChildNodes.length;a++){if(c.ChildNodes[a].Expanded==1){b++;if(c.ChildNodes[a].ChildNodes.length>0){b+=checkHowManyChildNodesAreExpanded(c.ChildNodes[a])}}}}return b}function checkHowManyChildNodesAreExpandedInAll(a){var c=0;for(var b=0;b<a.length;b++){if(a[b].Expanded==1){c++;if(a[b].ChildNodes.length>0){c+=a[b].ChildNodes.length;c+=checkHowManyChildNodesAreExpandedInAll(a[b].ChildNodes)}}}return c}function drawTreeViewNode(n,c,l,j,b,o,k,a,f,i,d){l+=a*8+(a==0?2:10);if(c.ChildNodes.length>0){n.strokeStyle="#3c7fb1";n.beginPath();n.rect(l,j,10,10);var e=getTreeviewClickButtonExtents(d);e.push({X:l,Y:j,Node:c});setTreeviewClickButtonExtents(d,e);n.stroke();n.fillStyle="#dcf0fb";n.beginPath();n.rect(l+1,j+1,8,5);n.fill();n.fillStyle="#a7d8f3";n.beginPath();n.rect(l+1,j+6,8,4);n.fill();n.strokeStyle="#000000";n.beginPath();n.moveTo(l+2,j+5);n.lineTo(l+8,j+5);n.stroke();if(c.Expanded==0){n.beginPath();n.moveTo(l+5,j+2);n.lineTo(l+5,j+8);n.stroke()}numOfChildNodes=checkHowManyChildNodesAreExpanded(c);if(c.ChildNodes.length>0){if(numOfChildNodes==0){n.strokeStyle="#000000";n.beginPath();n.moveTo(l+5,j+2);n.lineTo(l+5,j+8);n.stroke()}}}else{}var g=0;if(c.ImageURL!=null){for(var m=0;m<iconImages.length;m++){if(c.ImageURL==iconImages[m].ImageURL){n.drawImage(iconImages[m].Image,l+13,j);g+=f+5;break}}}n.fillStyle=b;n.font=o;n.fillText(c.Label,l+13+g,j+k);var h=getTreeviewClickLabelExtents(d);h.push({X:l+13,Y:j,Width:n.measureText(c.Label).width+g,TextHeight:k,TreeviewClickLabelExtentsNode:c})}function insertTreeviewNode(f,b,e,a){var c=getTreeViewProps(f,b);for(var d=0;d<c.Data.length;d++){if(e){if(c.Data[d][0]==e){c.Data.splice(d,0,a)}}else{c.Data.push(a)}}}function addChildNodes(c,e,g,b,d,a){var f={TreeviewNodeInstancesParentNode:e,TreeviewNodeInstancesRootNodes:c,ImageURL:g,Expanded:b,ChildNodes:new Array(),Label:d,CustomExtraInfo:a};if(e==null){c.push(f)}else{e.ChildNodes.push(f)}return f}var calenderPropsArray=new Array();function getCalenderProps(c,a){for(var b=0;b<calenderPropsArray.length;b++){if(calenderPropsArray[b].CanvasID==c&&calenderPropsArray[b].WindowID==a){return calenderPropsArray[b]}}}function drawCalender(a,h){var l=getCalenderProps(a,h);var o=getCtx(a);var n=new Date("1 "+l.VisibleMonth+" "+l.VisibleYear);var p=new Date();o.fillStyle=l.HeaderBackgroundColor;o.beginPath();o.rect(l.X,l.Y,l.Width,l.HeaderHeight);o.fill();o.fillStyle=l.BodyBackgroundColor;o.beginPath();o.rect(l.X,l.Y+l.HeaderHeight,l.Width,l.Height-l.HeaderHeight);o.fill();var k=new Array();o.fillStyle="#C0C0C0";o.font=l.TextHeaderFontString;var f=o.measureText("September").width;var d=o.measureText("0000").width;var c=l.X+((l.Width-(68+f+d))/2);o.beginPath();o.moveTo(c+4,l.Y+((l.HeaderHeight-11)/2)+6);o.lineTo(c+15,l.Y+((l.HeaderHeight-11)/2));o.lineTo(c+15,l.Y+((l.HeaderHeight-11)/2)+11);o.closePath();o.fill();k.push({X:c+4,Y:l.Y+((l.HeaderHeight-11)/2),Width:11,Height:11});o.beginPath();o.moveTo(c+23+f,l.Y+((l.HeaderHeight-11)/2));o.lineTo(c+23+f,l.Y+((l.HeaderHeight-11)/2)+11);o.lineTo(c+34+f,l.Y+((l.HeaderHeight-11)/2)+6);o.closePath();o.fill();k.push({X:c+23+f,Y:l.Y+((l.HeaderHeight-11)/2),Width:11,Height:11});o.beginPath();o.moveTo(c+38+f,l.Y+((l.HeaderHeight-11)/2)+6);o.lineTo(c+49+f,l.Y+((l.HeaderHeight-11)/2));o.lineTo(c+49+f,l.Y+((l.HeaderHeight-11)/2)+11);o.closePath();o.fill();k.push({X:c+38+f,Y:l.Y+((l.HeaderHeight-11)/2),Width:11,Height:11});o.beginPath();o.moveTo(c+57+f+d,l.Y+((l.HeaderHeight-11)/2));o.lineTo(c+57+f+d,l.Y+((l.HeaderHeight-11)/2)+11);o.lineTo(c+68+f+d,l.Y+((l.HeaderHeight-11)/2)+6);o.closePath();o.fill();k.push({X:c+57+f+d,Y:l.Y+((l.HeaderHeight-11)/2),Width:11,Height:11});l.ButtonClickExtents=k;o.fillStyle=l.TextHeaderColor;o.fillText(l.VisibleMonth,c+19+((f-o.measureText(l.VisibleMonth).width)/2),l.Y+((l.HeaderHeight-l.TextHeaderHeight)/2)+l.TextHeaderHeight);o.fillText(l.VisibleYear,c+53+f,l.Y+((l.HeaderHeight-l.TextHeaderHeight)/2)+l.TextHeaderHeight);var g=(n.getDay()>0?new Date(n.getTime()-(n.getDay()*24*60*60*1000)):n);var m=new Array();var e=null;for(var b=0;b<7;b++){switch(b){case 0:e="Sun";break;case 1:e="Mon";break;case 2:e="Tue";break;case 3:e="Wed";break;case 4:e="Thu";break;case 5:e="Fri";break;case 6:e="Sat";break}o.fillStyle=l.DayLabelTextColor;o.font=l.DayLabelTextFontString;o.fillText(e,l.X+4+((b%7)*l.DayCellWidth)+((l.DayCellWidth-o.measureText(e).width)/2),l.Y+l.HeaderHeight+4+l.DayCellHeight-((l.DayCellHeight-l.DayLabelTextHeight)/2))}for(var b=0;b<42;b++,g=new Date(g.getTime()+(24*60*60*1000))){m.push({X:l.X+4+((b%7)*l.DayCellWidth),Y:l.Y+l.HeaderHeight+4+((Math.floor(b/7)+1)*l.DayCellHeight),Date:g});var j=0;if(l.MouseHoverDate!=null&&g.getMonth()==l.MouseHoverDate.getMonth()&&g.getDate()==l.MouseHoverDate.getDate()&&g.getFullYear()==l.MouseHoverDate.getFullYear()){j=1;o.fillStyle=l.MouseOverHightLightColor;o.beginPath();o.rect(l.X+4+((b%7)*l.DayCellWidth),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+1)*l.DayCellHeight),l.DayCellWidth,l.DayCellHeight);o.fill()}if(g.getMonth()!=n.getMonth()){o.fillStyle=l.DayDateInactiveTextColor;o.font=l.DayDateInactiveTextFontString;o.fillText(g.getDate().toString(),l.X+4+((b%7)*l.DayCellWidth)+((l.DayCellWidth-o.measureText(g.getDate().toString()).width)/2),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+2)*l.DayCellHeight)-((l.DayCellHeight-l.TodayTextHeight)/2))}else{if(l.SelectedDay!=null&&g.getMonth()==l.SelectedDay.getMonth()&&g.getDate()==l.SelectedDay.getDate()&&g.getFullYear()==l.SelectedDay.getFullYear()){o.fillStyle=l.SelectedDayHighLightColor;o.beginPath();o.rect(l.X+4+((b%7)*l.DayCellWidth),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+1)*l.DayCellHeight),l.DayCellWidth,l.DayCellHeight);o.fill();o.fillStyle=l.SelectedDayTextColor;o.font=l.SelectedDayTextFontString;o.fillText(g.getDate().toString(),l.X+4+((b%7)*l.DayCellWidth)+((l.DayCellWidth-o.measureText(g.getDate().toString()).width)/2),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+2)*l.DayCellHeight)-((l.DayCellHeight-l.SelectedDayTextHeight)/2))}else{if(g.getMonth()==p.getMonth()&&g.getDate()==p.getDate()&&g.getFullYear()==p.getFullYear()){if(j==0){o.fillStyle=l.TodayHighLightColor;o.beginPath();o.rect(l.X+4+((b%7)*l.DayCellWidth),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+1)*l.DayCellHeight),l.DayCellWidth,l.DayCellHeight);o.fill()}o.fillStyle=l.TodayTextColor;o.font=l.TodayTextFontString;o.fillText(g.getDate().toString(),l.X+4+((b%7)*l.DayCellWidth)+((l.DayCellWidth-o.measureText(g.getDate().toString()).width)/2),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+2)*l.DayCellHeight)-((l.DayCellHeight-l.TodayTextHeight)/2))}else{o.fillStyle=l.DayDateActiveColor;o.font=l.DayDateActiveTextFontString;o.fillText(g.getDate().toString(),l.X+4+((b%7)*l.DayCellWidth)+((l.DayCellWidth-o.measureText(g.getDate().toString()).width)/2),l.Y+l.HeaderHeight+4+((Math.floor(b/7)+2)*l.DayCellHeight)-((l.DayCellHeight-l.DayDateActiveTextHeight)/2))}}}}l.DateClickExtents=m}function CCLCalendar(){}CCLCalendar.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,VisibleMonth:null,VisibleYear:null,SelectedDay:null,DayCellWidth:null,DayCellHeight:null,HeaderHeight:null,TextHeaderColor:null,TextHeaderHeight:null,TextHeaderFontString:null,DayDateActiveColor:null,DayDateActiveTextHeight:null,DayDateActiveTextFontString:null,DayDateInactiveTextColor:null,DayDateInactiveTextHeight:null,DayDateInactiveTextFontString:null,SelectedDayTextColor:null,SelectedDayTextHeight:null,SelectedDayTextFontString:null,SelectedDayHighLightColor:null,TodayTextColor:null,TodayTextHeight:null,TodayTextFontString:null,TodayHighLightColor:null,OnDayClickFunction:null,HeaderBackgroundColor:null,BodyBackgroundColor:null,MouseOverHightLightColor:null,MouseHoverDate:null,DayLabelTextColor:null,DayLabelTextHeight:null,Tag:null,DayLabelTextFontString:null,ControlNameID:null,Depth:null,Initialize:function(){return createCalendar(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.VisibleMonth,this.VisibleYear,this.SelectedDay,this.DayCellWidth,this.DayCellHeight,this.HeaderHeight,this.HeaderBackgroundColor,this.BodyBackgroundColor,this.TextHeaderColor,this.TextHeaderHeight,this.TextHeaderFontString,this.DayDateActiveColor,this.DayDateActiveTextHeight,this.DayDateActiveTextFontString,this.DayDateInactiveTextColor,this.DayDateInactiveTextHeight,this.DayDateInactiveTextFontString,this.SelectedDayTextColor,this.SelectedDayTextHeight,this.SelectedDayTextFontString,this.SelectedDayHighLightColor,this.TodayTextColor,this.TodayTextHeight,this.TodayTextFontString,this.TodayHighLightColor,this.MouseOverHightLightColor,this.OnDayClickFunction,this.DayLabelTextColor,this.DayLabelTextHeight,this.DayLabelTextFontString,this.Tag)}};function createCalendar(r,B,A,v,a,d,g,J,e,G,p,k,q,j,w,h,n,I,K,f,c,F,b,M,o,i,t,H,L,C,l,s,E,u,O,z,N,D){var m=createWindow(r,A,v,a,d,g,null,"Calender",B);calenderPropsArray.push({CanvasID:r,WindowID:m,X:A,Y:v,Width:a,Height:d,VisibleMonth:J,VisibleYear:e,SelectedDay:new Date(G),DayCellWidth:p,DayCellHeight:k,HeaderHeight:q,TextHeaderColor:h,TextHeaderHeight:n,TextHeaderFontString:I,DayDateActiveColor:K,DayDateActiveTextHeight:f,DayDateActiveTextFontString:c,DayDateInactiveTextColor:F,DayDateInactiveTextHeight:b,DayDateInactiveTextFontString:M,SelectedDayTextColor:o,SelectedDayTextHeight:i,SelectedDayTextFontString:t,SelectedDayHighLightColor:H,TodayTextColor:L,TodayTextHeight:C,TodayTextFontString:l,TodayHighLightColor:s,OnDayClickFunction:u,HeaderBackgroundColor:j,BodyBackgroundColor:w,MouseOverHightLightColor:E,MouseHoverDate:null,ButtonClickExtents:null,DateClickExtents:null,DayLabelTextColor:O,DayLabelTextHeight:z,Tag:D,DayLabelTextFontString:N});registerWindowDrawFunction(m,drawCalender,r);registerClickFunction(m,calenderClick,r);registerMouseOverFunction(m,calenderMouseOver,r);return m}function getMonthName(a){switch(a){case 0:return"January";case 1:return"Febuary";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December"}}function calenderClick(g,b,h){var f=getCalenderProps(g,b);var a=h.calcX;var j=h.calcY;var d=new Date("1 "+f.VisibleMonth+" "+f.VisibleYear);for(var c=0;c<f.ButtonClickExtents.length;c++){if(a>f.ButtonClickExtents[c].X&&a<f.ButtonClickExtents[c].X+f.ButtonClickExtents[c].Width&&j>f.ButtonClickExtents[c].Y&&j<f.ButtonClickExtents[c].Y+f.ButtonClickExtents[c].Height){switch(c){case 0:if(d.getMonth()==0){f.VisibleMonth="December";f.VisibleYear=(parseInt(f.VisibleYear,10)-1).toString()}else{f.VisibleMonth=getMonthName(d.getMonth()-1)}return;case 1:if(d.getMonth()==11){f.VisibleMonth="January";f.VisibleYear=(parseInt(f.VisibleYear,10)+1).toString()}else{f.VisibleMonth=getMonthName(d.getMonth()+1)}return;case 2:f.VisibleYear=(parseInt(f.VisibleYear,10)-1).toString();return;case 3:f.VisibleYear=(parseInt(f.VisibleYear,10)+1).toString();return}}}for(var c=0;c<f.DateClickExtents.length;c++){if(a>f.DateClickExtents[c].X&&a<f.DateClickExtents[c].X+f.DayCellWidth&&j>f.DateClickExtents[c].Y&&j<f.DateClickExtents[c].Y+f.DayCellHeight){f.SelectedDay=f.DateClickExtents[c].Date;if(f.OnDayClickFunction!=null){f.OnDayClickFunction(f.CanvasID,f.WindowID,f.SelectedDay)}return}}}function calenderMouseOver(f,b,g){var d=getCalenderProps(f,b);var a=g.calcX;var h=g.calcY;for(var c=0;c<d.DateClickExtents.length;c++){if(a>d.DateClickExtents[c].X&&a<d.DateClickExtents[c].X+d.DayCellWidth&&h>d.DateClickExtents[c].Y&&h<d.DateClickExtents[c].Y+d.DayCellHeight){d.MouseHoverDate=d.DateClickExtents[c].Date;return}}}var progressBarPropsArray=new Array();function getProgressBarProps(c,a){for(var b=0;b<progressBarPropsArray.length;b++){if(progressBarPropsArray[b].CanvasID==c&&progressBarPropsArray[b].WindowID==a){return progressBarPropsArray[b]}}}function CCLProgressBar(){}CCLProgressBar.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Color:null,MaxValue:null,MinValue:null,CurrentValue:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Color,this.MaxValue,this.MinValue,this.CurrentValue,this.Tag)}};function createProgressBar(a,d,j,h,c,k,f,e,i,m,b,l){var g=createWindow(a,j,h,c,k,f,null,"ProgressBar",d);progressBarPropsArray.push({CanvasID:a,WindowID:g,X:j,Y:h,Width:c,Height:k,Color:e,MaxValue:i,MinValue:m,CurrentValue:b,Tag:l});registerWindowDrawFunction(g,drawProgressBar,a);return g}function setProgressBarCurrentValue(d,a,c){var b=getProgressBarProps(d,a);b.CurrentValue=c;invalidateRect(d,null,b.X,b.Y,b.Width,b.Height)}function drawProgressBar(a,h){var i=getProgressBarProps(a,h);var j=getCtx(a);var c=j.createLinearGradient(i.X,i.Y,i.X,i.Y+i.Height);c.addColorStop(0,"#f4f5f6");c.addColorStop(1,"#eaeced");j.fillStyle=c;j.beginPath();j.moveTo(i.X,i.Y+5);j.arc(i.X+5,i.Y+5,5,Math.PI,(Math.PI*270)/180,false);j.lineTo(i.X+i.Width-5,i.Y);j.arc(i.X+i.Width-5,i.Y+5,5,(Math.PI*270)/180,Math.PI*2,false);j.lineTo(i.X+i.Width,i.Y+i.Height-5);j.arc(i.X+i.Width-5,i.Y+i.Height-5,5,0,Math.PI/2,false);j.lineTo(i.X+5,i.Y+i.Height);j.arc(i.X+5,i.Y+i.Height-5,5,Math.PI/2,Math.PI,false);j.closePath();j.fill();j.strokeStyle="#a9b2bb";j.beginPath();j.moveTo(i.X,i.Y+5);j.arc(i.X+5,i.Y+5,5,Math.PI,(Math.PI*270)/180,false);j.lineTo(i.X+i.Width-5,i.Y);j.arc(i.X+i.Width-5,i.Y+5,5,(Math.PI*270)/180,Math.PI*2,false);j.stroke();j.strokeStyle="#768694";j.beginPath();j.moveTo(i.X+i.Width,i.Y+5);j.lineTo(i.X+i.Width,i.Y+i.Height-5);j.arc(i.X+i.Width-5,i.Y+i.Height-5,5,0,Math.PI/2,false);j.moveTo(i.X+5,i.Y+i.Height);j.arc(i.X+5,i.Y+i.Height-5,5,Math.PI/2,Math.PI,false);j.lineTo(i.X,i.Y+5);j.stroke();j.strokeStyle="#657582";j.beginPath();j.moveTo(i.X+5,i.Y+i.Height);j.lineTo(i.X+i.Width-5,i.Y+i.Height);j.stroke();var b=((i.CurrentValue-i.MinValue)*i.Width)/(i.MaxValue-i.MinValue);var k=j.createLinearGradient(i.X,i.Y,i.X,i.Y+i.Height);var e=parseInt(i.Color.substr(1,2),16);var f=parseInt(i.Color.substr(3,2),16);var d=parseInt(i.Color.substr(5,2),16);k.addColorStop(0,"#"+getlowcomp(e)+getlowcomp(f)+getlowcomp(d));k.addColorStop(0.5,i.Color);k.addColorStop(1,"#"+gethighcomp(e)+gethighcomp(f)+gethighcomp(d));j.fillStyle=k;j.beginPath();j.moveTo(i.X+2,i.Y+7);j.arc(i.X+7,i.Y+7,5,Math.PI,(Math.PI*270)/180,false);j.lineTo(i.X+b-7,i.Y+2);j.arc(i.X+b-7,i.Y+7,5,(Math.PI*270)/180,Math.PI*2,false);j.lineTo(i.X+b-2,i.Y+i.Height-7);j.arc(i.X+b-7,i.Y+i.Height-7,5,0,Math.PI/2,false);j.lineTo(i.X+7,i.Y+i.Height-2);j.arc(i.X+7,i.Y+i.Height-7,5,Math.PI/2,Math.PI,false);j.closePath();j.fill()}var sliderPropsArray=new Array();function getSliderProps(c,a){for(var b=0;b<sliderPropsArray.length;b++){if(sliderPropsArray[b].CanvasID==c&&sliderPropsArray[b].WindowID==a){return sliderPropsArray[b]}}}function drawSlider(f,b){var e=getSliderProps(f,b);var c=getCtx(f);c.strokeStyle="#a3aeb9";c.beginPath();c.rect(e.X,e.Y+(e.HandleHeight/2)-1,e.Width,3);c.stroke();c.strokeStyle="#e6eff7";c.beginPath();c.moveTo(e.X+1,e.Y+(e.HandleHeight/2));c.lineTo(e.X+e.Width-1,e.Y+(e.HandleHeight/2));c.stroke();var a=((e.CurrentValue-e.MinValue)*e.Width)/(e.MaxValue-e.MinValue)-(e.HandleWidth/2);var d=c.createLinearGradient(e.X+a,e.Y,e.X+a,e.Y+e.HandleHeight);d.addColorStop(0,"#fdfdfd");d.addColorStop(1,"#ced4d9");c.fillStyle=d;c.beginPath();c.rect(e.X+a,e.Y,e.HandleWidth,e.HandleHeight);c.fill();c.strokeStyle="#a0abb7";c.beginPath();c.moveTo(e.X+a+1,e.Y);c.lineTo(e.X+a+e.HandleWidth-1,e.Y);c.stroke();c.strokeStyle="#8094a4";c.beginPath();c.moveTo(e.X+a,e.Y+1);c.lineTo(e.X+a,e.Y+e.HandleHeight-1);c.moveTo(e.X+a+e.HandleWidth,e.Y+1);c.lineTo(e.X+a+e.HandleWidth,e.Y+e.HandleHeight-1);c.stroke();c.strokeStyle="#617584";c.beginPath();c.moveTo(e.X+a+1,e.Y+e.HandleHeight);c.lineTo(e.X+a+e.HandleWidth-1,e.Y+e.HandleHeight);c.stroke()}function sliderMouseDown(c,a){var b=getSliderProps(c,a);b.MouseDownState=1}function sliderMouseMove(d,b,f){var c=getSliderProps(d,b);if(c.MouseDownState==1){var a=f.calcX;if(a<c.X){c.CurrentValue=c.MinValue}else{if(a>c.X+c.Width){c.CurrentValue=c.MaxValue}else{c.CurrentValue=c.MinValue+(((a-c.X)*(c.MaxValue-c.MinValue))/c.Width)}}}}function sliderMouseUp(c,a){var b=getSliderProps(c,a);b.MouseDownState=0}function CCLSlider(){}CCLSlider.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,HandleWidth:null,HandleHeight:null,MaxValue:null,MinValue:null,MouseDownState:null,Tag:null,ControlNameID:null,Depth:null,Value:null,Initialize:function(){return createSlider(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.HandleWidth,this.MaxValue,this.MinValue,this.Value,this.Tag)}};function createSlider(a,c,h,f,b,k,d,j,g,m,i,l){var e=createWindow(a,h,f,b,k,d,null,"Slider",c);sliderPropsArray.push({CanvasID:a,WindowID:e,X:h,Y:f,Width:b,Height:k,HandleWidth:j,HandleHeight:k,MaxValue:g,MinValue:m,CurrentValue:i,MouseDownState:0,Tag:l});registerWindowDrawFunction(e,drawSlider,a);registerMouseDownFunction(e,sliderMouseDown,a);registerMouseUpFunction(e,sliderMouseUp,a);registerMouseMoveFunction(e,sliderMouseMove,a);return e}var datePickerPropsArray=new Array();function getDatePickerPropsByTextBoxAreaWindowID(c,a){for(var b=0;b<datePickerPropsArray.length;b++){if(datePickerPropsArray[b].CanvasID==c&&datePickerPropsArray[b].TextBoxAreaWindowID==a){return datePickerPropsArray[b]}}}function getDatePickerPropsByButtonWindowID(c,a){for(var b=0;b<datePickerPropsArray.length;b++){if(datePickerPropsArray[b].CanvasID==c&&datePickerPropsArray[b].ButtonWindowID==a){return datePickerPropsArray[b]}}}function getDatePickerPropsByCalenderWindowID(c,a){for(var b=0;b<datePickerPropsArray.length;b++){if(datePickerPropsArray[b].CanvasID==c&&datePickerPropsArray[b].CalenderWindowID==a){return datePickerPropsArray[b]}}}function CCLDatePicker(){}CCLDatePicker.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,TextBoxAreaTextColor:null,TextBoxAreaTextHeight:null,TextBoxAreaTextFontString:null,Tag:null,ControlNameID:null,Depth:null,VisibleMonth:null,VisibleYear:null,SelectedDay:null,DayCellWidth:null,DayCellHeight:null,HeaderHeight:null,TextHeaderColor:null,TextHeaderHeight:null,TextHeaderFontString:null,DayDateActiveColor:null,DayDateActiveTextHeight:null,DayDateActiveTextFontString:null,DayDateInactiveTextColor:null,DayDateInactiveTextHeight:null,DayDateInactiveTextFontString:null,SelectedDayTextColor:null,SelectedDayTextHeight:null,SelectedDayTextFontString:null,SelectedDayHighLightColor:null,TodayTextColor:null,TodayTextHeight:null,TodayTextFontString:null,TodayHighLightColor:null,OnDayClickFunction:null,HeaderBackgroundColor:null,BodyBackgroundColor:null,MouseOverHightLightColor:null,MouseHoverDate:null,DayLabelTextColor:null,DayLabelTextHeight:null,Tag:null,DayLabelTextFontString:null,CalenderHeight:null,Initialize:function(){return(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.VisibleMonth,this.VisibleYear,this.SelectedDay,this.DayCellWidth,this.DayCellHeight,this.HeaderHeight,this.HeaderBackgroundColor,this.BodyBackgroundColor,this.TextHeaderColor,this.TextHeaderHeight,this.TextHeaderFontString,this.DayDateActiveColor,this.DayDateActiveTextHeight,this.DayDateActiveTextFontString,this.DayDateInactiveTextColor,this.DayDateInactiveTextHeight,this.DayDateInactiveTextFontString,this.SelectedDayTextColor,this.SelectedDayTextHeight,this.SelectedDayTextFontString,this.SelectedDayHighLightColor,this.TodayTextColor,this.TodayTextHeight,this.TodayTextFontString,this.TodayHighLightColor,this.MouseOverHightLightColor,this.OnDayClickFunction,this.DayLabelTextColor,this.DayLabelTextHeight,this.DayLabelTextFontString,this.TextBoxAreaTextColor,this.TextBoxAreaTextHeight,this.TextBoxAreaTextFontString,this.CalenderHeight,this.Tag)}};function createDatePicker(v,G,F,C,a,d,h,P,e,M,t,p,u,o,D,i,r,O,Q,g,c,L,b,S,s,m,z,N,R,I,q,w,K,B,U,E,T,n,H,l,A,J){var f=createWindow(v,F,C,a-d,d,h,null,"DatePickerTextArea",G+"DatePickerTextArea");var k=createWindow(v,F+a-d,C,d,d,h,null,"DatePickerButton",G+"DatePickerButton");var j=createCalendar(v,G+"DatePickerCalender",F,C+d,a,A,h,P,e,M,t,p,u,o,D,i,r,O,Q,g,c,L,b,S,s,m,z,N,R,I,q,w,K,function(){var y=getDatePickerPropsByTextBoxAreaWindowID(v,f);var x=getCalenderProps(v,y.CalenderWindowID);if(B!=null){B(v,y.CalenderWindowID,x.SelectedDay)}setHiddenWindowStatus(v,y.CalenderWindowID,1)},U,E,T);datePickerPropsArray.push({CanvasID:v,WindowID:f,TextBoxAreaWindowID:f,ButtonWindowID:k,CalenderWindowID:j,X:F,Y:C,Width:a,Height:d,TextBoxAreaTextColor:n,TextBoxAreaTextHeight:H,TextBoxAreaTextFontString:l,Tag:J});registerModalWindow(v,j);registerHiddenWindow(v,j,1);registerClickFunction(k,function(x,V){var W=getDatePickerPropsByButtonWindowID(x,V);if(checkIfHiddenWindow(v,W.CalenderWindowID)==1){setHiddenWindowStatus(v,W.CalenderWindowID,0)}else{setHiddenWindowStatus(v,W.CalenderWindowID,1)}var y=getCalenderProps(x,W.CalenderWindowID);invalidateRect(x,null,y.X,y.Y,y.Width,y.Height)},v);registerWindowDrawFunction(f,function(V,X){var Y=getDatePickerPropsByTextBoxAreaWindowID(V,X);var W=getCalenderProps(V,Y.CalenderWindowID);var y=getCtx(V);y.strokeStyle="#a3aeb9";y.beginPath();y.rect(Y.X,Y.Y,Y.Width-Y.Height,Y.Height);y.stroke();if(W.SelectedDay!=null){y.fillStyle=Y.TextBoxAreaTextColor;y.font=Y.TextBoxAreaTextFontString;var x=W.SelectedDay.getDate().toString()+"/"+(W.SelectedDay.getMonth()+1).toString()+"/"+W.SelectedDay.getFullYear().toString();y.fillText(x,Y.X+4,Y.Y+Y.Height-((Y.Height-Y.TextBoxAreaTextHeight)/2))}},v);registerWindowDrawFunction(k,function(x,W){var X=getDatePickerPropsByButtonWindowID(x,W);var y=getCtx(x);y.lineCap="butt";y.strokeStyle="#3c7fb1";y.beginPath();y.rect(X.X+X.Width-X.Height,X.Y,X.Height,X.Height);y.stroke();y.fillStyle="#dcf0fb";y.beginPath();y.rect(X.X+X.Width-X.Height+1,X.Y+1,(X.Height/2)-2,X.Height-2);y.fill();y.strokeStyle="#c0e4f8";y.moveTo(X.X+X.Width-(X.Height/2)+1,X.Y+1);y.lineTo(X.X+X.Width-(X.Height/2)+1,X.Y+X.Height-1);y.stroke();y.fillStyle="#a7d8f3";y.beginPath();y.rect(X.X+X.Width-(X.Height/2)+1,X.Y+1,(X.Height/2)-2,X.Height-2);y.fill();var V=y.createLinearGradient(X.X+X.Width-(X.Height/2)-1,X.Y+(X.Height/2)-1,X.X+X.Width-(X.Height/2)-1,X.Y+(X.Height/2)+3);V.addColorStop(0,"#0d2a3a");V.addColorStop(1,"#4e9ac4");y.fillStyle=V;y.beginPath();y.moveTo(X.X+X.Width-(X.Height/2)-4,X.Y+(X.Height/2)-1);y.lineTo(X.X+X.Width-(X.Height/2)+3,X.Y+(X.Height/2)-1);y.lineTo(X.X+X.Width-(X.Height/2)-1,X.Y+(X.Height/2)+3);y.closePath();y.fill()},v);registerModalWindow(v,j);registerHiddenWindow(v,j,1);registerLostFocusFunction(v,j,function(){datePickerCalenderWindowLostFocus(v,j)});registerLostFocusFunction(v,f,function(){datePickerTextBoxWindowLostFocus(v,f)});registerLostFocusFunction(v,k,function(){datePickerButtonLostFocus(v,k)});return f}function datePickerCalenderWindowLostFocus(b,a){var c=getDatePickerPropsByCalenderWindowID(b,a);if(doesWindowHaveFocus(b,c.TextBoxAreaWindowID)==0&&doesWindowHaveFocus(b,c.ButtonWindowID)==0&&doingEventForWindowID!=c.CalenderWindowID){setHiddenWindowStatus(b,c.CalenderWindowID,1)}}function datePickerTextBoxWindowLostFocus(b,a){var c=getDatePickerPropsByTextBoxAreaWindowID(b,a);if(doesWindowHaveFocus(b,c.CalenderWindowID)==0&&doesWindowHaveFocus(b,c.ButtonWindowID)==0&&doingEventForWindowID!=c.CalenderWindowID){setHiddenWindowStatus(b,c.CalenderWindowID,1)}}function datePickerButtonLostFocus(b,a){var c=getDatePickerPropsByButtonWindowID(b,a);if(doesWindowHaveFocus(b,c.CalenderWindowID)==0&&doesWindowHaveFocus(b,c.TextBoxAreaWindowID)==0&&doingEventForWindowID!=c.CalenderWindowID){setHiddenWindowStatus(b,c.CalenderWindowID,1)}}var panelPropsArray=new Array();function getPanelProps(c,a){for(var b=0;b<panelPropsArray.length;b++){if(panelPropsArray[b].CanvasID==c&&panelPropsArray[b].WindowID==a){return panelPropsArray[b]}}}function CCLPanel(){}CCLPanel.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ExpandedWidth:null,ExpandedHeight:null,CollapsedWidth:null,CollapsedHeight:null,IsCollapsable:null,HasBorder:null,BorderColor:null,HasBackgroundGradient:null,BackgroundStartColor:null,BackgroundEndColor:null,HeaderHeight:null,HeaderBackgroundStartColor:null,HeaderBackgroundEndColor:null,ExpandCollapseButtonColor:null,IsExpanded:null,ExpandCollapseButtonRadius:null,PanelLabel:null,PanelLabelTextColor:null,PanelLabelTextHeight:null,PanelLabelTextFontString:null,OriginalWidth:null,OriginalHeight:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.HasBorder,this.BorderColor,this.HasBackgroundGradient,this.BackgroundStartColor,this.BackgroundEndColor,this.IsCollapsable,this.CollapsedWidth,this.CollapsedHeight,this.PanelLabel,this.PanelLabelTextColor,this.PanelLabelTextHeight,this.PanelLabelTextFontString,this.HeaderBackgroundStartColor,this.HeaderBackgroundEndColor,this.HeaderHeight,this.ExpandCollapseButtonColor,this.IsExpanded,this.ExpandCollapseButtonRadius,this.Tag)}};function createPanel(q,d,k,j,p,n,A,f,b,w,o,e,l,u,c,m,s,z,t,h,r,g,v,a,C,B){var i=createWindow(q,k,j,(l==1?(a==1?p:u):p),(l==1?(a==1?n:g):n),A,null,"Panel",d);panelPropsArray.push({CanvasID:q,WindowID:i,X:k,Y:j,Width:p,Height:n,ExpandedWidth:p,ExpandedHeight:n,CollapsedWidth:u,CollapsedHeight:c,IsCollapsable:l,HasBorder:f,BorderColor:b,HasBackgroundGradient:w,BackgroundStartColor:o,BackgroundEndColor:e,HeaderHeight:g,HeaderBackgroundStartColor:h,HeaderBackgroundEndColor:r,ExpandCollapseButtonColor:v,IsExpanded:a,ExpandCollapseButtonRadius:C,PanelLabel:m,PanelLabelTextColor:s,PanelLabelTextHeight:z,PanelLabelTextFontString:t,OriginalWidth:p,OriginalHeight:n,Tag:B});registerWindowDrawFunction(i,function(I,x){var F=getPanelProps(I,x);var J=getCtx(I);if(F.IsCollapsable==1){if(F.IsExpanded==1){if(F.HasBackgroundGradient==1){var D=J.createLinearGradient(F.X,F.Y,F.X,F.Y+F.Height);D.addColorStop(0,F.BackgroundStartColor);D.addColorStop(1,F.BackgroundEndColor);J.fillStyle=D;J.beginPath();J.rect(F.X,F.Y,F.Width,F.Height);J.fill()}if(F.HasBorder==1){J.strokeStyle=F.BorderColor;J.beginPath();J.rect(F.X,F.Y,F.Width,F.Height);J.stroke()}}else{if(F.HasBorder==1){J.strokeStyle=F.BorderColor;J.beginPath();J.rect(F.X,F.Y,F.Width,F.HeaderHeight);J.stroke()}}var y=J.createLinearGradient(F.X,F.Y,F.X,F.Y+F.HeaderHeight);y.addColorStop(0,F.HeaderBackgroundStartColor);y.addColorStop(1,F.HeaderBackgroundEndColor);J.fillStyle=y;J.beginPath();J.rect(F.X,F.Y,F.Width,F.HeaderHeight);J.fill();J.fillStyle=F.PanelLabelTextColor;J.font=F.PanelLabelTextFontString;J.fillText(F.PanelLabel,F.X+((F.Width-F.ExpandCollapseButtonRadius-J.measureText(F.PanelLabel).width)/2),F.Y+F.HeaderHeight-((F.HeaderHeight-F.PanelLabelTextHeight)/2));var K=J.createRadialGradient(F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-F.ExpandCollapseButtonRadius,0,F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-F.ExpandCollapseButtonRadius,F.ExpandCollapseButtonRadius);var G=parseInt(F.ExpandCollapseButtonColor.substr(1,2),16);var H=parseInt(F.ExpandCollapseButtonColor.substr(3,2),16);var E=parseInt(F.ExpandCollapseButtonColor.substr(5,2),16);K.addColorStop(0,"#"+gethighcomp(G)+gethighcomp(H)+gethighcomp(E));K.addColorStop(0.9,F.ExpandCollapseButtonColor);K.addColorStop(1,"#"+getlowcomp(G)+getlowcomp(H)+getlowcomp(E));J.fillStyle=K;J.beginPath();J.arc(F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-F.ExpandCollapseButtonRadius,F.ExpandCollapseButtonRadius,0,Math.PI*2,false);J.fill();J.strokeStyle="#000000";J.beginPath();if(F.IsExpanded==1){J.moveTo(F.X+F.Width-8-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)+4-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-2-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)+4-F.ExpandCollapseButtonRadius);J.moveTo(F.X+F.Width-8-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)+1-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-5-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)+1-F.ExpandCollapseButtonRadius)}else{J.moveTo(F.X+F.Width-8-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-4-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)+2-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-4-F.ExpandCollapseButtonRadius);J.moveTo(F.X+F.Width-8-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-1-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-4-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)+5-F.ExpandCollapseButtonRadius);J.lineTo(F.X+F.Width-F.ExpandCollapseButtonRadius,F.Y+F.HeaderHeight-((F.HeaderHeight-(F.ExpandCollapseButtonRadius*2))/2)-1-F.ExpandCollapseButtonRadius)}J.stroke()}else{if(F.HasBackgroundGradient==1){var D=J.createLinearGradient(F.X,F.Y,F.X,F.Y+F.Height);D.addColorStop(0,F.BackgroundStartColor);D.addColorStop(1,F.BackgroundEndColor);J.fillStyle=D;J.beginPath();J.rect(F.X,F.Y,F.Width,F.Height);J.fill()}if(F.HasBorder==1){J.strokeStyle=F.BorderColor;J.beginPath();J.rect(F.X,F.Y,F.Width,F.Height);J.stroke()}}},q);if(l==1){registerClickFunction(i,function(E,G,H){var I=getPanelProps(E,G);var F=getWindowProps(E,G);if(F){var D=H.calcX;var J=H.calcY;if(D>I.X+I.Width-4-(I.ExpandCollapseButtonRadius*2)&&D<I.X+I.Width-4&&J>I.Y+ +((I.HeaderHeight-(I.ExpandCollapseButtonRadius*2))/2)&&J<I.Y+I.HeaderHeight-((I.HeaderHeight-(I.ExpandCollapseButtonRadius*2))/2)){if(I.IsExpanded==1){I.IsExpanded=0;I.Width=I.CollapsedWidth;I.Height=I.HeaderHeight+I.CollapsedHeight;F.Width=I.CollapsedWidth;F.Height=I.HeaderHeight+I.CollapsedHeight}else{I.IsExpanded=1;I.Width=I.OriginalWidth;I.Height=I.OriginalHeight;F.Width=I.OriginalWidth;F.Height=I.OriginalHeight}}invalidateRect(E,null,I.X,I.Y,I.OriginalWidth,I.OriginalHeight)}},q)}else{registerClickFunction(i,function(){},q)}registerMouseDownFunction(i,function(){},q);registerMouseMoveFunction(i,function(){},q);registerMouseUpFunction(i,function(){},q);return i}var barGraphsPropsArray=new Array();function getBarGraphProps(c,a){for(var b=0;b<barGraphsPropsArray.length;b++){if(barGraphsPropsArray[b].CanvasID==c&&barGraphsPropsArray[b].WindowID==a){return barGraphsPropsArray[b]}}}function CCLBarGraph(){}CCLBarGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,BarWidth:null,AxisLabelsTextHeight:null,AxisLabelsTextFontString:null,AxisLabelsTextColor:null,MarginLeft:null,GapBetweenBars:null,BarClickFunction:null,AlreadyUnregisteredAnimation:null,HasLegend:null,MarginRight:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createBarGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.BarWidth,this.AxisLabelsTextColor,this.AxisLabelsTextHeight,this.AxisLabelsTextFontString,this.MarginLeft,this.GapBetweenBars,this.BarClickFunction,this.HasLegend,this.MarginRight,this.Tag)}};function createBarGraph(r,a,k,j,q,n,v,u,o,f,z,d,A,s,h,e,l,p,m,i,c,b,t,w){var g=createWindow(r,k,j,q,n,v,null,"BarGraph",a);barGraphsPropsArray.push({CanvasID:r,WindowID:g,X:k,Y:j,Width:q,Height:n,Data:u,MaxValue:o,NumMarksY:f,Title:z,TitleTextColor:d,TitleTextHeight:A,TitleTextFontString:s,BarWidth:h,BarLabelsWithBoundingBoxes:new Array(),H:n-l-8-20,AxisLabelsTextHeight:l,AxisLabelsTextFontString:p,AxisLabelsTextColor:e,MarginLeft:m,GapBetweenBars:i,BarClickFunction:c,AlreadyUnregisteredAnimation:0,HasLegend:b,MarginRight:t,Tag:w});registerClickFunction(g,function(y,E,C){var x=getBarGraphProps(y,E);var F=C.calcX;var D=C.calcY;for(var B=0;B<x.BarLabelsWithBoundingBoxes.length;B++){if(F>=x.BarLabelsWithBoundingBoxes[B].X&&F<=x.BarLabelsWithBoundingBoxes[B].X+x.BarLabelsWithBoundingBoxes[B].Width&&D>=x.BarLabelsWithBoundingBoxes[B].Y&&D<=x.BarLabelsWithBoundingBoxes[B].Y+x.BarLabelsWithBoundingBoxes[B].Height){if(x.BarClickFunction!=null){x.BarClickFunction(y,E,B);return}}}},r);registerWindowDrawFunction(g,function(I,x){var J=getBarGraphProps(I,x);var L=getCtx(I);var E=J.H;if(J.AlreadyUnregisteredAnimation==0&&E<J.TitleTextHeight+8){J.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(I,x)}L.clearRect(0,0,canvas.width,canvas.height);L.save();L.fillStyle=J.TitleTextColor;L.font=J.TitleTextFontString;L.lineWidth=2;L.fillText(J.Title,J.X+(J.Width-L.measureText(J.Title).width)/2,J.Y+J.TitleTextHeight+4);L.lineWidth=1;L.fillStyle=J.AxisLabelsTextColor;L.font=J.AxisLabelsTextFontString;var G=J.Height-J.TitleTextHeight-J.AxisLabelsTextHeight-16;L.beginPath();L.moveTo(J.X+J.MarginLeft,J.Y+J.TitleTextHeight+8+G);L.lineTo(J.X+J.MarginLeft,J.Y+J.TitleTextHeight+8);L.stroke();for(var H=0;H<J.NumMarksY;H++){var B=(J.MaxValue/J.NumMarksY)*H;B=Math.round(B*100)/100;var D=L.measureText(B.toString()).width;var F=G/J.NumMarksY;L.fillText(B.toString(),J.X+J.MarginLeft-D-5,J.Y+J.TitleTextHeight+8+(J.AxisLabelsTextHeight/2)+G-(H*F));L.beginPath();L.moveTo(J.X+J.MarginLeft,J.Y+J.TitleTextHeight+8+G-(H*F));L.lineTo(J.X+J.MarginLeft+(J.Data.length*(J.BarWidth+J.GapBetweenBars))+J.GapBetweenBars,J.Y+J.TitleTextHeight+8+G-(H*F));L.stroke()}J.BarLabelsWithBoundingBoxes=new Array();for(var C=0;C<J.Data.length;C++){if(J.HasLegend!=1){var K=L.measureText(J.Data[C][0]).width;L.fillStyle=J.AxisLabelsTextColor;L.font=J.AxisLabelsTextFontString;if(K<J.BarWidth){L.fillText(J.Data[C][0],J.X+J.MarginLeft+J.GapBetweenBars+(C*(J.BarWidth+J.GapBetweenBars))+((J.BarWidth-K)/2),J.Y+J.Height-4)}else{L.fillText(J.Data[C][0],J.X+J.MarginLeft+J.GapBetweenBars+(C*(J.BarWidth+J.GapBetweenBars))-((K-J.BarWidth)/2),J.Y+J.Height-4)}}drawrect(I,x,L,J,C,G)}if(J.HasLegend==1){for(var y=0;y<J.Data.length;y++){L.fillStyle=u[y][2];L.fillRect(J.X+J.Width-J.MarginRight,J.Y+J.Height-8-J.AxisLabelsTextHeight-(y*(8+J.AxisLabelsTextHeight)),30,J.AxisLabelsTextHeight);L.fillText(u[y][0],J.X+J.Width-J.MarginRight+35,J.Y+J.Height-8-(y*(8+J.AxisLabelsTextHeight)))}}if(E>=J.TitleTextHeight+8){J.H-=5}L.restore()},r);registerAnimatedWindow(r,g);return g}function drawrect(a,g,n,h,b,e){var k=h.H;if(h.H<h.TitleTextHeight+8+e-((e*h.Data[b][1])/h.MaxValue)){k=e-((e*h.Data[b][1])/h.MaxValue)}h.BarLabelsWithBoundingBoxes.push({X:h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars)),Y:h.Y+h.TitleTextHeight+8+k,Width:h.BarWidth,Height:e-k});var l=n.createLinearGradient(h.X,h.Y+h.TitleTextHeight+8,h.X,h.Y+h.Height-h.AxisLabelsTextHeight-8);var m=h.Data[b][2];var d=parseInt(m.substr(1,2),16);var f=parseInt(m.substr(3,2),16);var c=parseInt(m.substr(5,2),16);l.addColorStop(0,"#"+getlowcomp(d)+getlowcomp(f)+getlowcomp(c));l.addColorStop(0.5,m);l.addColorStop(1,"#"+gethighcomp(d)+gethighcomp(f)+gethighcomp(c));n.fillStyle=l;n.shadowOffsetX=5;n.shadowOffsetY=5;n.shadowBlur=5;n.shadowColor="#"+getlowcomp(d)+getlowcomp(f)+getlowcomp(c);n.beginPath();n.moveTo(h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars)),h.Y+h.TitleTextHeight+8+5+k);n.arc(h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars))+5,h.Y+h.TitleTextHeight+8+5+k,5,Math.PI,(Math.PI/180)*270,false);n.lineTo(h.X+h.MarginLeft+h.GapBetweenBars+h.BarWidth-5+(b*(h.BarWidth+h.GapBetweenBars)),h.Y+h.TitleTextHeight+8+k);n.arc(h.X+h.MarginLeft+h.GapBetweenBars+h.BarWidth-5+(b*(h.BarWidth+h.GapBetweenBars)),h.Y+h.TitleTextHeight+8+5+k,5,(Math.PI/180)*270,0,false);n.lineTo(h.X+h.MarginLeft+h.GapBetweenBars+h.BarWidth+(b*(h.BarWidth+20)),h.Y+h.TitleTextHeight+8+e);n.lineTo(h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars)),h.Y+h.TitleTextHeight+8+e);n.closePath();n.fill();n.shadowOffsetX=0;n.shadowOffsetY=0;n.shadowBlur=0;n.shadowColor="#FFFFFF";l=n.createLinearGradient(0,0,50,300);l.addColorStop(0,"#FFFFFF");l.addColorStop(0.5,"#000000");l.addColorStop(1,"#FFFFFF");n.fillStyle=l;n.globalAlpha=0.1;n.beginPath();n.moveTo(h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars))+5,h.Y+h.TitleTextHeight+8+5+k);n.arc(h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars))+10,h.Y+h.TitleTextHeight+8+10+k,5,Math.PI,(Math.PI/180)*270,false);n.lineTo(h.X+h.MarginLeft+h.GapBetweenBars+h.BarWidth-10+(b*(h.BarWidth+h.GapBetweenBars)),h.Y+h.TitleTextHeight+8+k+5);n.arc(h.X+h.MarginLeft+h.GapBetweenBars+h.BarWidth-10+(b*(h.BarWidth+h.GapBetweenBars)),h.Y+h.TitleTextHeight+8+10+k,5,(Math.PI/180)*270,0,false);n.lineTo(h.X+h.MarginLeft+h.GapBetweenBars+h.BarWidth+(b*(h.BarWidth+20))-5,h.Y+h.TitleTextHeight+8+e);n.lineTo(h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars))+5,h.Y+h.TitleTextHeight+8+e);n.closePath();n.fill();n.globalAlpha=1;var j=n.measureText(h.Data[b][1].toString()).width;if(j<h.BarWidth){n.fillText(h.Data[b][1].toString(),h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars))+((h.BarWidth+-j)/2),h.Y+h.TitleTextHeight+8+h.AxisLabelsTextHeight+k+((e-k)/2))}else{n.fillText(h.Data[b][1].toString(),h.X+h.MarginLeft+h.GapBetweenBars+(b*(h.BarWidth+h.GapBetweenBars))-((j-h.BarWidth)/2),h.Y+h.TitleTextHeight+8+h.AxisLabelsTextHeight+k+((e-k)/2))}}var pieChartsPropsArray=new Array();function getPieChartProps(c,a){for(var b=0;b<barGraphsPropsArray.length;b++){if(pieChartsPropsArray[b].CanvasID==c&&pieChartsPropsArray[b].WindowID==a){return pieChartsPropsArray[b]}}}function CCLPieChart(){}CCLPieChart.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,LabelTextColor:null,LabelTextHeight:null,LabelTextFontString:null,SliceClickFunction:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createPieChart(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.LabelTextColor,this.LabelTextHeight,this.LabelTextFontString,this.SliceClickFunction,this.Tag)}};function createPieChart(m,b,g,f,l,j,s,r,u,c,k,o,e,a,p,h,t){var d=createWindow(m,g,f,l,j,s,null,"PieChart",b);var q=0;for(var n=0;n<r.length;n++){q+=r[n][1]}pieChartsPropsArray.push({CanvasID:m,WindowID:d,X:g,Y:f,Width:l,Height:j,Data:r,Title:u,TitleTextColor:c,TitleTextHeight:k,TitleTextFontString:o,CurrentRadius:20,TotalValue:q,LabelTextColor:e,LabelTextHeight:a,LabelTextFontString:p,AlreadyUnregisteredAnimation:0,DeltaI:-1,DeltaX:0,DeltaY:0,SliceClickFunction:h,Tag:t});registerClickFunction(d,function(v,x,G){var B=getPieChartProps(v,x);var L=B.Data;var K=(B.Height-B.TitleTextHeight-24-(B.LabelTextHeight*2))/2;var H=0;for(var F=0;F<L.length;F++){H+=L[F][1]}var N=G.calcX;var J=G.calcY;var I=-1;var E=B.X+(B.Width-(K*2))/2+K;var D=B.Y+16+B.TitleTextHeight+B.LabelTextHeight+K;if(K*K>(N-E)*(N-E)+(J-D)*(J-D)){if(N>E&&J==D){I=0}else{if(N>E&&J>D){I=(Math.atan((J-D)/(N-E)))*180/Math.PI}else{if(N<E&&J>D){I=180-((Math.atan((J-D)/(N-E)))*180/Math.PI)}else{if(N<E&&J==D){I=180}else{if(N<E&&J<D){I=180+((Math.atan((J-D)/(N-E)))*180/Math.PI)}else{if(N==E&&J<D){I=270}else{if(N>E&&J<D){I=360+((Math.atan((J-D)/(N-E)))*180/Math.PI)}}}}}}}}var M=0;var w=0;var A=0;for(F=0;F<L.length;F++){M+=(L[F][1]*360)/H;var z=0;var y=0;if(I>=0&&w<=I&&M>=I){var C=w+((M-w)/2);if(C==0){z=40;y=0}else{if(C>0&&C<90){z=Math.cos(C*(Math.PI/180))*40;y=Math.sin(C*(Math.PI/180))*40}else{if(C==90){z=0;y=40}else{if(C>90&&C<180){z=-(Math.cos((180-C)*(Math.PI/180))*40);y=Math.sin((180-C)*(Math.PI/180))*40}else{if(C==180){z=-40;y=0}else{if(C>180&&C<270){z=-(Math.cos((180-C)*(Math.PI/180))*40);y=(Math.sin((180-C)*(Math.PI/180))*40)}else{if(C==270){z=0;y=-40}else{if(C>270&&C<360){z=Math.cos((360-C)*(Math.PI/180))*40;y=-(Math.sin((360-C)*(Math.PI/180))*40)}}}}}}}}}if(z!=0||y!=0){B.DeltaX=z;B.DeltaY=y;B.DeltaI=F;A=1;if(B.SliceClickFunction!=null){B.SliceClickFunction(v,x,F)}}if(M<90){lastx=E+Math.cos((Math.PI/180)*M)*K;lasty=D+Math.sin((Math.PI/180)*M)*K}else{if(M==90){lastx=E;lasty=D+K}else{if(M>90&&M<180){lastx=E-Math.cos((Math.PI/180)*(180-M))*K;lasty=D+Math.sin((Math.PI/180)*(180-M))*K}else{if(M==180){lastx=E-K;lasty=D}else{if(M>180&&M<270){lastx=E+Math.cos((Math.PI/180)*(M-180))*K;lasty=D+Math.sin((Math.PI/180)*(M-180))*K}else{if(M==270){lastx=E;lasty=D-K}else{if(M>270&&M<360){lastx=E-Math.cos((Math.PI/180)*(360-M))*K;lasty=D+Math.sin((Math.PI/180)*(360-M))*K}}}}}}}w=M}if(A==0){B.DeltaX=0;B.DeltaY=0;B.DeltaI=-1}},m);registerWindowDrawFunction(d,function(F,v){var x=getPieChartProps(F,v);var B=x.CurrentRadius;if(x.AlreadyUnregisteredAnimation==0&&B>=(x.Height-x.TitleTextHeight-24-(x.LabelTextHeight*2))/2){x.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(F,v)}var z=x.Data;var K=x.X+(x.Width-(B*2))/2+B;var H=x.Y+16+x.TitleTextHeight+x.LabelTextHeight+B;var I=getCtx(F);I.save();I.fillStyle=x.TitleTextColor;I.font=x.TitleTextFontString;I.fillText(x.Title,x.X+(x.Width-I.measureText(x.Title).width)/2,x.Y+4+x.TitleTextHeight);I.font=x.LabelTextFontString;var J=0;var A=0;for(var y=0;y<z.length;y++){J+=(z[y][1]*100*360)/(q*100);var D=parseInt(z[y][2].substr(1,2),16);var E=parseInt(z[y][2].substr(3,2),16);var C=parseInt(z[y][2].substr(5,2),16);var G=I.createRadialGradient(K,H,0,K,H,B);G.addColorStop(0,"#"+gethighcomp(D)+gethighcomp(E)+gethighcomp(C));G.addColorStop(0.5,z[y][2]);G.addColorStop(1,"#"+getlowcomp(D)+getlowcomp(E)+getlowcomp(C));I.fillStyle=G;I.beginPath();I.moveTo(K+(x.DeltaI==y?x.DeltaX:0),H+(x.DeltaI==y?x.DeltaY:0));I.arc(K+(x.DeltaI==y?x.DeltaX:0),H+(x.DeltaI==y?x.DeltaY:0),B,(Math.PI/180)*A,(Math.PI/180)*J,false);I.closePath();I.fill();I.strokeStyle=z[y][2];if(J<90){lastx=K+Math.cos((Math.PI/180)*J)*B;lasty=H+Math.sin((Math.PI/180)*J)*B}else{if(J==90){lastx=K;lasty=H+B}else{if(J>90&&J<180){lastx=K-Math.cos((Math.PI/180)*(180-J))*B;lasty=H+Math.sin((Math.PI/180)*(180-J))*B}else{if(J==180){lastx=K-B;lasty=H}else{if(J>180&&J<270){lastx=K+Math.cos((Math.PI/180)*(J-180))*B;lasty=H+Math.sin((Math.PI/180)*(J-180))*B}else{if(J==270){lastx=K;lasty=H-B}else{if(J>270&&J<360){lastx=K-Math.cos((Math.PI/180)*(360-J))*B;lasty=H+Math.sin((Math.PI/180)*(360-J))*B}}}}}}}A=J}if(B<(x.Height-x.TitleTextHeight-24-(x.LabelTextHeight*2))/2){x.CurrentRadius+=5}var J=0;var A=0;I.font=x.LabelTextFontString;for(var y=0;y<z.length;y++){J+=(z[y][1]*100*360)/(q*100);I.fillStyle=z[y][2];drawPieChartLabels(I,z[y][0],J,A,B,q,z[y][1],z[y][2],0,0,K+(x.DeltaI==y?x.DeltaX:0),H+(x.DeltaI==y?x.DeltaY:0),x.LabelTextHeight);A=J}for(var w=0;w<z.length;w++){I.fillStyle=z[w][2];I.fillRect(x.X+x.Width-100,x.Y+x.Height-8-x.LabelTextHeight-(w*(8+x.LabelTextHeight)),30,x.LabelTextHeight);I.fillStyle=z[w][2];I.fillText(z[w][0],x.X+x.Width-100+35,x.Y+x.Height-8-(w*(8+x.LabelTextHeight)))}I.restore()},m);registerAnimatedWindow(m,d);return d}function drawPieChartLabels(j,a,m,d,e,c,g,b,l,i,k,h,f){j.fillStyle=b;if((((m-d)/2)+d)<90){j.fillText(g.toString(),k+5+l+Math.cos((Math.PI/180)*(((m-d)/2)+d))*e,h+i+Math.sin((Math.PI/180)*(((m-d)/2)+d))*e)}else{if((((m-d)/2)+d)==90){j.fillText(g.toString(),k+5+l+Math.cos((Math.PI/180)*(((m-d)/2)+d))*e,h+i+Math.sin((Math.PI/180)*(((m-d)/2)+d))*e)}else{if((((m-d)/2)+d)>90&&(((m-d)/2)+d)<180){tw=j.measureText(g.toString()).width;j.fillText(g.toString(),k+l-tw-Math.cos((Math.PI/180)*(180-(((m-d)/2)+d)))*e,h+f+i+Math.sin((Math.PI/180)*(180-(((m-d)/2)+d)))*e)}else{if((((m-d)/2)+d)==180){j.fillText(g.toString(),k+l-Math.cos((Math.PI/180)*(180-(((m-d)/2)+d)))*e,h+f+i+Math.sin((Math.PI/180)*(180-(((m-d)/2)+d)))*e)}else{if((((m-d)/2)+d)>180&&(((m-d)/2)+d)<270){tw=j.measureText(g.toString()).width;j.fillText(g.toString(),k-f+l-tw-Math.cos((Math.PI/180)*((((m-d)/2)+d)-180))*e,h+i-Math.sin((Math.PI/180)*((((m-d)/2)+d)-180))*e)}else{if((((m-d)/2)+d)==270){tw=j.measureText(g.toString()).width;j.fillText(g.toString(),k-f+l-tw-Math.cos((Math.PI/180)*((((m-d)/2)+d)-180))*e,h+i-Math.sin((Math.PI/180)*((((m-d)/2)+d)-180))*e)}else{if((((m-d)/2)+d)>270&&(((m-d)/2)+d)<360){j.fillText(g.toString(),k+f+l+Math.cos((Math.PI/180)*(360-(((m-d)/2)+d)))*e,h+i-Math.sin((Math.PI/180)*(360-(((m-d)/2)+d)))*e)}}}}}}}}var lineGraphsPropsArray=new Array();function getLineGraphProps(c,a){for(var b=0;b<lineGraphsPropsArray.length;b++){if(lineGraphsPropsArray[b].CanvasID==c&&lineGraphsPropsArray[b].WindowID==a){return lineGraphsPropsArray[b]}}}function CCLLineGraph(){}CCLLineGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,XMaxValue:null,NumMarksX:null,YMaxValue:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,AxisLabelsTextColor:null,AxisLabelsTextHeight:null,AxisLabelsTextFontString:null,ClickFunction:null,MarginLeft:null,IsLabeledXValues:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createLineGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.XMaxValue,this.NumMarksX,this.YMaxValue,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.AxisLabelsTextColor,this.AxisLabelsTextHeight,this.AxisLabelsTextFontString,this.ClickFunction,this.MarginLeft,this.IsLabeledXValues,this.Tag)}};function createLineGraph(t,b,m,l,r,p,A,z,v,h,i,g,C,e,q,w,d,o,s,a,n,c,B){var k=createWindow(t,m,l,r,p,A,null,"LineGraph",b);var f=0;for(var u=0;u<z.length;u++){if(z[u][0].length>f){f=z[u][0].length}}lineGraphsPropsArray.push({CanvasID:t,WindowID:k,X:m,Y:l,Width:r,Height:p,Data:z,XMaxValue:v,NumMarksX:h,YMaxValue:i,NumMarksY:g,Title:C,TitleTextColor:e,TitleTextHeight:q,TitleTextFontString:w,AxisLabelsTextColor:d,AxisLabelsTextHeight:o,AxisLabelsTextFontString:s,H:2,HMax:f,LineXYs:new Array(),ClickFunction:a,AlreadyUnregisteredAnimation:0,MarginLeft:n,IsLabeledXValues:c,Tag:B});registerClickFunction(k,function(I,x,F){var E=getLineGraphProps(I,x);if(E.ClickFunction!=null){var J=E.LineXYs;var H=F.calcX;var G=F.calcY;for(var D=0;D<J.length;D++){for(var y=0;y<J[D].length-1;y++){if(H>=J[D][y][0]&&H<=J[D][y+1][0]){if((G<=J[D][y][1]&&G>=J[D][y+1][1])||(G>=J[D][y][1]&&G<=J[D][y+1][1])){l=(((J[D][y][1]-J[D][y+1][1])*(H-J[D][y][0]))/(J[D][y][0]-J[D][y+1][0]))+J[D][y][1];if(l+4>G&&l-4<G){E.ClickFunction(I,x,D)}}}}}}},t);registerWindowDrawFunction(k,function(O,x){var J=getLineGraphProps(O,x);if(J.AlreadyUnregisteredAnimation==0&&J.H>J.HMax){J.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(O,x)}J.LineXYs=new Array();var Q=getCtx(O);Q.save();Q.fillStyle=J.TitleTextColor;Q.font=J.TitleTextFontString;Q.fillText(J.Title,J.X+(J.Width-Q.measureText(J.Title).width)/2,J.Y+J.TitleTextHeight+4);Q.fillStyle="#A0A0A0";Q.font=J.AxisLabelsTextFontString;Q.beginPath();Q.moveTo(J.X+J.MarginLeft,J.Y+J.Height-J.AxisLabelsTextHeight-8);Q.lineTo(J.X+J.MarginLeft,J.Y+J.TitleTextHeight+8);Q.stroke();Q.beginPath();Q.moveTo(J.X+J.MarginLeft,J.Y+J.Height-J.AxisLabelsTextHeight-8);Q.lineTo(J.X+J.Width,J.Y+J.Height-J.AxisLabelsTextHeight-8);Q.stroke();var F=false;for(var M=0;M<J.NumMarksX;M++){if(F){Q.fillStyle="#C0C0C0";F=false}else{Q.fillStyle="#D0D0D0";F=true}Q.fillRect(J.X+J.MarginLeft+M*((J.Width-J.MarginLeft)/J.NumMarksX),J.Y+J.TitleTextHeight+8,((J.Width-J.MarginLeft)/J.NumMarksX),J.Height-J.TitleTextHeight-J.AxisLabelsTextHeight-16)}Q.fillStyle=J.AxisLabelsTextColor;Q.font=J.AxisLabelsTextFontString;Q.strokeStyle="#404040";for(var M=0;M<J.NumMarksY;M++){var E=(J.YMaxValue/J.NumMarksY)*M;var I=Q.measureText(E.toString()).width;Q.fillText(E.toString(),J.X+J.MarginLeft-4-I,J.Y+J.Height-J.AxisLabelsTextHeight-8-(M*((J.Height-J.TitleTextHeight-J.AxisLabelsTextHeight-16)/J.NumMarksY)));Q.beginPath();Q.moveTo(J.X+J.MarginLeft-3,J.Y+J.Height-J.AxisLabelsTextHeight-8-(M*((J.Height-J.TitleTextHeight-J.AxisLabelsTextHeight-16)/J.NumMarksY)));Q.lineTo(J.X+J.Width,J.Y+J.Height-J.AxisLabelsTextHeight-8-(M*((J.Height-J.TitleTextHeight-J.AxisLabelsTextHeight-16)/J.NumMarksY)));Q.stroke()}var N=new Array();if(J.IsLabeledXValues==1){var L=0;for(var H=0;H<J.Data.length;H++){if(J.Data[H][0].length>L){L=J.Data[H][0].length}}for(var H=0;H<L;H++){for(var G=0;G<J.Data.length;G++){if(H<J.Data[G][0].length){var D=0;for(var y=0;y<N.length;y++){if(N[y]==J.Data[G][0][H][0]){D=1;break}}if(D==0){N.push(J.Data[G][0][H][0])}}}}}for(var K=0;K<J.NumMarksX;K++){var E;var P;if(J.IsLabeledXValues==1){P=N.length/J.NumMarksX;if(N.length%J.NumMarksX>=J.NumMarksX/2){E=N[K*Math.ceil(P)]}else{E=N[K*Math.floor(P)]}}else{E=(J.XMaxValue/J.NumMarksX)*K}var I=Q.measureText(E.toString()).width;Q.fillText(E.toString(),J.X+J.MarginLeft+((K*(J.Width-J.MarginLeft))/J.NumMarksX)-(I/2),J.Y+J.Height-4);Q.beginPath();Q.moveTo(J.X+J.MarginLeft+((K*(J.Width-J.MarginLeft))/J.NumMarksX),J.Y+J.Height-J.AxisLabelsTextHeight-5);Q.lineTo(J.X+J.MarginLeft+((K*(J.Width-J.MarginLeft))/J.NumMarksX),J.Y+J.TitleTextHeight+8);Q.stroke()}var H=0;while(H<z.length){drawline(t,Q,J,H,N);H++}if(J.H<J.HMax){J.H+=1}Q.restore()},t);registerAnimatedWindow(t,k);return k}function findXLabelIndexForValue(c,b){for(var a=0;a<c.length;a++){if(c[a]==b){return a}}}function drawline(a,j,c,h,g){var e=parseInt(c.Data[h][1].substr(1,2),16);var f=parseInt(c.Data[h][1].substr(3,2),16);var d=parseInt(c.Data[h][1].substr(5,2),16);j.strokeStyle=c.Data[h][1];j.lineWidth=3;j.lineCap="round";j.miterLimit=0;j.shadowOffsetX=2;j.shadowOffsetY=2;j.shadowBlur=5;j.shadowColor="#"+getlowcomp(e).toString(16)+getlowcomp(f).toString(16)+getlowcomp(d).toString(16);j.beginPath();var k=new Array();k=k.concat([[c.X+c.MarginLeft+(c.IsLabeledXValues==1?(findXLabelIndexForValue(g,c.Data[h][0][0][0])*(c.Width-c.MarginLeft))/g.length:((c.Data[h][0][0][0]*(c.Width-c.MarginLeft))/c.XMaxValue)),c.Y+c.Height-c.AxisLabelsTextHeight-8-((c.Data[h][0][0][1]*(c.Height-c.TitleTextHeight-c.AxisLabelsTextHeight-16))/c.YMaxValue)]]);j.moveTo(c.X+c.MarginLeft+(c.IsLabeledXValues==1?(findXLabelIndexForValue(g,c.Data[h][0][0][0])*(c.Width-c.MarginLeft))/g.length:((c.Data[h][0][0][0]*(c.Width-c.MarginLeft))/c.XMaxValue)),c.Y+c.Height-c.AxisLabelsTextHeight-8-((c.Data[h][0][0][1]*(c.Height-c.TitleTextHeight-c.AxisLabelsTextHeight-16))/c.YMaxValue));for(var b=1;b<c.H&&b<c.Data[h][0].length;b++){k=k.concat([[c.X+c.MarginLeft+(c.IsLabeledXValues==1?(findXLabelIndexForValue(g,c.Data[h][0][b][0])*(c.Width-c.MarginLeft))/g.length:((c.Data[h][0][b][0]*(c.Width-c.MarginLeft))/c.XMaxValue)),c.Y+c.Height-c.AxisLabelsTextHeight-8-((c.Data[h][0][b][1]*(c.Height-c.TitleTextHeight-c.AxisLabelsTextHeight-16))/c.YMaxValue)]]);j.lineTo(c.X+c.MarginLeft+(c.IsLabeledXValues==1?(findXLabelIndexForValue(g,c.Data[h][0][b][0])*(c.Width-c.MarginLeft))/g.length:((c.Data[h][0][b][0]*(c.Width-c.MarginLeft))/c.XMaxValue)),c.Y+c.Height-c.AxisLabelsTextHeight-8-((c.Data[h][0][b][1]*(c.Height-c.TitleTextHeight-c.AxisLabelsTextHeight-16))/c.YMaxValue))}c.LineXYs.concat([[k]]);j.stroke()}var gaugeChartPropsArray=new Array();function getGaugeChartProps(c,a){for(var b=0;b<gaugeChartPropsArray.length;b++){if(gaugeChartPropsArray[b].CanvasID==c&&gaugeChartPropsArray[b].WindowID==a){return gaugeChartPropsArray[b]}}}function CCLGauge(){}CCLGauge.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,GaugeRadius:null,GaugeLabelTextColor:null,GaugeLabelTextHeight:null,GaugeLabelTextFontString:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.GaugeRadius,this.GaugeLabelTextColor,this.GaugeLabelTextHeight,this.GaugeLabelTextFontString,this.Tag)}};function createGauge(k,a,g,f,j,h,p,o,r,b,i,l,e,c,m,n,q){var d=createWindow(k,g,f,j,h,p,null,"Gauge",a);gaugeChartPropsArray.push({CanvasID:k,WindowID:d,X:g,Y:f,Width:j,Height:h,Data:o,Title:r,TitleTextColor:b,TitleTextHeight:i,TitleTextFontString:l,H:1,CenterX:g+j/2,CenterY:f+(h-8-i)/2+(h-8-i-(e*2))/2,GaugeRadius:e,GaugeLabelTextColor:c,GaugeLabelTextHeight:m,GaugeLabelTextFontString:n,AlreadyUnregisteredAnimation:0,Tag:q});registerWindowDrawFunction(d,function(s,x){var A=getGaugeChartProps(s,x);var E=getCtx(s);if(A.AlreadyUnregisteredAnimation==0&&A.H>100){A.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(canvaisd1,x)}E.save();E.globalAlpha=A.H/100;E.fillStyle=A.TitleTextColor;E.font=A.TitleTextFontString;E.fillText(A.Title,A.X+((A.Width-E.measureText(r).width)/2),A.Y+A.TitleTextHeight+4);var w=E.createRadialGradient(A.CenterX,A.CenterY,0,A.CenterX,A.CenterY,A.GaugeRadius-5);w.addColorStop(0,"#C0C0C0");w.addColorStop(0.5,"#A0A0A0");w.addColorStop(1,"#D0D0D0");E.fillStyle=w;E.beginPath();E.arc(A.CenterX,A.CenterY,A.GaugeRadius,0,2*Math.PI,false);E.arc(A.CenterX,A.CenterY,A.GaugeRadius-5,0,2*Math.PI,true);E.closePath();E.fill();var t=E.createRadialGradient(A.CenterX,A.CenterY,0,A.CenterX,A.CenterY,A.GaugeRadius-5);t.addColorStop(0,"#0000C0");t.addColorStop(0.5,"#0000A0");t.addColorStop(1,"#0000D0");E.fillStyle=t;E.beginPath();E.arc(A.CenterX,A.CenterY,A.GaugeRadius-5,0,2*Math.PI,false);E.fill();if(A.H<60){E.globalAlpha=0}else{E.globalAlpha=(A.H-60)/100}var J=E.createRadialGradient(A.CenterX,A.CenterY,A.GaugeRadius-50,A.CenterX,A.CenterY,A.GaugeRadius-5);J.addColorStop(0,"#000000");J.addColorStop(1,"#FFFFFF");E.fillStyle=J;E.beginPath();E.moveTo(A.CenterX-(Math.sin(Math.PI/8)*(A.GaugeRadius-10)),A.CenterY+(Math.cos(Math.PI/8)*(A.GaugeRadius-10)));E.arc(A.CenterX,A.CenterY,A.GaugeRadius-10,(Math.PI/180)*112.5,(Math.PI/180)*67.5,false);E.lineTo(A.CenterX+(Math.sin(Math.PI/8)*(A.GaugeRadius-50)),A.CenterY+(Math.cos(Math.PI/8)*(A.GaugeRadius-50)));E.arc(A.CenterX,A.CenterY,A.GaugeRadius-50,(Math.PI/180)*67.5,(Math.PI/180)*112.5,true);E.closePath();E.fill();E.globalAlpha=A.H/100;E.strokeStyle="#000000";for(var F=0;F<((A.Data[1]/A.Data[5])+1);F++){var G=((315*F)/(A.Data[1]/A.Data[5]))+112.5;if(G>360){G-=360}E.beginPath();if(G==0){E.moveTo(A.CenterX+(A.GaugeRadius-45),A.CenterY);E.lineTo(A.CenterX+(A.GaugeRadius-25),A.CenterY)}else{if(G>0&&G<90){E.moveTo(A.CenterX+(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX+(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-25)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-25)))}else{if(G==90){E.moveTo(A.CenterX,A.CenterY+(A.GaugeRadius-45));E.lineTo(A.CenterX,A.CenterY+(A.GaugeRadius-25))}else{if(G>90&&G<180){G=180-G;E.moveTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-25)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-25)))}else{if(G==180){E.moveTo(A.CenterX-(A.GaugeRadius-45),A.CenterY);E.lineTo(A.CenterX-(A.GaugeRadius-25),A.CenterY)}else{if(G>180&&G<270){G=G-180;E.moveTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY-(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-25)),A.CenterY-(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-25)))}else{if(G==270){E.moveTo(A.CenterX,A.CenterY-(A.GaugeRadius-45));E.lineTo(A.CenterX,A.CenterY-(A.GaugeRadius-25))}else{if(G>270&&G<360){G=G-270;E.moveTo(A.CenterX+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-25)),A.CenterY-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-25)))}}}}}}}}E.stroke()}E.fillStyle=A.GaugeLabelTextColor;E.font=A.GaugeLabelTextFontString;for(var F=0;F<((A.Data[1]/A.Data[5])+1);F++){var G=((315*F)/(A.Data[1]/A.Data[5]))+112.5;if(G>360){G-=360}var D=(F*A.Data[5]).toString();var H=E.measureText(D).width;var C=A.GaugeLabelTextHeight;if(G==0){E.fillText(D,A.CenterX+(A.GaugeRadius-52)-E.measureText(D).width,A.CenterY)}else{if(G>0&&G<90){E.fillText(D,A.CenterX-H+(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-52)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-52)))}else{if(G==90){E.fillText(D,A.CenterX-(H/2),A.CenterY+(A.GaugeRadius-52)-C)}else{if(G>90&&G<180){G=180-G;E.fillText(D,A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-52)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-52)))}else{if(G==180){E.fillText(D,A.CenterX-(A.GaugeRadius-52),A.CenterY-(C/2))}else{if(G>180&&G<270){G=G-180;E.fillText(D,A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-52)),A.CenterY+C-(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-52)))}else{if(G==270){E.fillText(D,A.CenterX-(H/2),A.CenterY-(A.GaugeRadius-52)+C)}else{if(G>270&&G<360){G=G-270;E.fillText(D,A.CenterX+(Math.sin((Math.PI/180)*G)*((A.GaugeRadius-52)-H)),A.CenterY-(Math.cos((Math.PI/180)*G)*((A.GaugeRadius-52)-H)))}}}}}}}}}E.strokeStyle="#000000";for(var F=0;F<((((A.Data[1]/A.Data[5])*A.Data[6]))+1);F++){if(F%A.Data[6]>0){var G=((315*F)/((A.Data[1]/A.Data[5])*A.Data[6]))+112.5;if(G>360){G-=360}E.beginPath();if(G==0){E.moveTo(A.CenterX+(A.GaugeRadius-45),A.CenterY);E.lineTo(A.CenterX+(A.GaugeRadius-35),A.CenterY)}else{if(G>0&&G<90){E.moveTo(A.CenterX+(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX+(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-35)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-35)))}else{if(G==90){E.moveTo(A.CenterX,A.CenterY+(A.GaugeRadius-45));E.lineTo(A.CenterX,A.CenterY+(A.GaugeRadius-35))}else{if(G>90&&G<180){G=180-G;E.moveTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-35)),A.CenterY+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-35)))}else{if(G==180){E.moveTo(A.CenterX-(A.GaugeRadius-45),A.CenterY);E.lineTo(A.CenterX-(A.GaugeRadius-35),A.CenterY)}else{if(G>180&&G<270){G=G-180;E.moveTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY-(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-35)),A.CenterY-(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-35)))}else{if(G==270){E.moveTo(A.CenterX,A.CenterY-(A.GaugeRadius-45));E.lineTo(A.CenterX,A.CenterY-(A.GaugeRadius-35))}else{if(G>270&&G<360){G=G-270;E.moveTo(A.CenterX+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-45)),A.CenterY-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-45)));E.lineTo(A.CenterX+(Math.sin((Math.PI/180)*G)*(A.GaugeRadius-35)),A.CenterY-(Math.cos((Math.PI/180)*G)*(A.GaugeRadius-35)))}}}}}}}}E.stroke()}}drawarc(E,A.Data[2][2],A.Data[2][0],A.Data[2][1],A.Data[1],A.CenterX,A.CenterY,A.GaugeRadius);drawarc(E,A.Data[3][2],A.Data[3][0],A.Data[3][1],A.Data[1],A.CenterX,A.CenterY,A.GaugeRadius);drawarc(E,A.Data[4][2],A.Data[4][0],A.Data[4][1],A.Data[1],A.CenterX,A.CenterY,A.GaugeRadius);var z=(((315*A.Data[7])/A.Data[1])*(A.H/100))+112.5;if(z>360){z-=360}E.translate(A.CenterX,A.CenterY);E.rotate((Math.PI/180)*z);var y="#60007C";var I=E.createLinearGradient(0,0,A.GaugeRadius-80,0);var v=parseInt(y.substr(1,2),16);var u=parseInt(y.substr(3,2),16);var B=parseInt(y.substr(5,2),16);I.addColorStop(0,"#"+getlowcomp(v)+getlowcomp(u)+getlowcomp(B));I.addColorStop(0.5,y);I.addColorStop(1,"#"+gethighcomp(v)+gethighcomp(u)+gethighcomp(B));E.fillStyle=I;E.beginPath();E.moveTo(0,10);E.lineTo(0,-10);E.lineTo(A.GaugeRadius-40,0);E.closePath();E.fill();var J=E.createRadialGradient(A.CenterX,A.CenterY,0,A.CenterX,A.CenterY,10);J.addColorStop(0,"#C0C0C0");J.addColorStop(0.5,"#A0A0A0");J.addColorStop(1,"#D0D0D0");E.fillStyle=J;E.beginPath();E.arc(0,0,10,0,Math.PI*2,false);E.fill();E.restore();if(A.H<100){A.H++}},k);registerAnimatedWindow(k,d);return d}function drawarc(n,j,a,f,l,o,m,c){var b=n.createRadialGradient(o,m,c-100,o,m,c-80);var h=parseInt(j.substr(1,2),16);var i=parseInt(j.substr(3,2),16);var e=parseInt(j.substr(5,2),16);b.addColorStop(0,"#"+getlowcomp(h)+getlowcomp(i)+getlowcomp(e));b.addColorStop(0.5,j);b.addColorStop(1,"#"+gethighcomp(h)+gethighcomp(i)+gethighcomp(e));n.fillStyle=b;var g=((315*a)/l)+112.5;if(g>360){g-=360}var k=((315*f)/l)+112.5;if(k>360){k-=360}n.beginPath();var d=0;if(g==0){n.moveTo(o+(c-100),m)}else{if(g>0&&g<90){n.moveTo(o+(Math.cos((Math.PI/180)*g)*(c-100)),m+(Math.sin((Math.PI/180)*g)*(c-100)))}else{if(g==90){n.moveTo(o,m+(c-100))}else{if(g>90&&g<180){d=180-g;n.moveTo(o-(Math.cos((Math.PI/180)*d)*(c-100)),m+(Math.sin((Math.PI/180)*d)*(c-100)))}else{if(g==180){n.moveTo(o-(c-100),m)}else{if(g>180&&g<270){d=g-180;n.moveTo(o-(Math.cos((Math.PI/180)*d)*(c-100)),m-(Math.sin((Math.PI/180)*d)*(c-100)))}else{if(g==270){n.moveTo(o,m-(c-100))}else{if(g>270&&g<360){d=g-270;n.moveTo(o+(Math.sin((Math.PI/180)*d)*(c-100)),m-(Math.cos((Math.PI/180)*d)*(c-100)))}}}}}}}}n.arc(o,m,(c-100),(Math.PI/180)*g,(Math.PI/180)*k,false);n.arc(o,m,(c-80),(Math.PI/180)*k,(Math.PI/180)*g,true);n.closePath();n.fill()}var radarGraphPropsArray=new Array();function getRadarGraphProps(c,a){for(var b=0;b<radarGraphPropsArray.length;b++){if(radarGraphPropsArray[b].CanvasID==c&&radarGraphPropsArray[b].WindowID==a){return radarGraphPropsArray[b]}}}function CCLRadarGraph(){}CCLRadarGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,ColorStr:null,NumMarks:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,MarkLabelTextColor:null,MarkLabelTextHeight:null,MarkLabelTextFontString:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createRadarGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.ColorStr,this.NumMarks,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.MarkLabelTextColor,this.MarkLabelTextHeight,this.MarkLabelTextFontString,this.Tag)}};function createRadarGraph(m,a,f,e,l,i,r,q,j,b,g,t,c,k,p,n,o,h,s){var d=createWindow(m,f,e,l,i,r,null,"RadarGraph",a);radarGraphPropsArray.push({CanvasID:m,WindowID:d,X:f,Y:e,Width:l,Height:i,Data:q,MaxValue:j,ColorStr:b,NumMarks:g,Title:t,TitleTextColor:c,TitleTextHeight:k,TitleTextFontString:p,H:20,MarkLabelTextColor:n,MarkLabelTextHeight:o,MarkLabelTextFontString:h,AlreadyUnregisteredAnimation:0,Tag:s});registerWindowDrawFunction(d,function(G,w){var u=getRadarGraphProps(G,w);var H=getCtx(G);if(u.AlreadyUnregisteredAnimation==0&&u.H>=((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8-4)/2)){u.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(G,w)}H.save();H.fillStyle=u.TitleTextColor;H.font=u.TitleTextFontString;H.fillText(u.Title,u.X+((u.Width-H.measureText(u.Title).width)/2),u.Y+u.TitleTextHeight+4);H.font=u.MarkLabelTextFontString;var y=(Math.PI*360)/(180*u.Data.length);H.translate(u.X+(u.Width/2),u.Y+u.TitleTextHeight+8+((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8)/2)+u.MarkLabelTextHeight+8);H.rotate(Math.PI*270/180);var C=parseInt(u.ColorStr.substr(1,2),16);var D=parseInt(u.ColorStr.substr(3,2),16);var B=parseInt(u.ColorStr.substr(5,2),16);var F=H.createRadialGradient(0,0,0,0,0,u.H);F.addColorStop(0,"#"+gethighcomp(C)+gethighcomp(D)+gethighcomp(B));F.addColorStop(0.5,u.ColorStr);F.addColorStop(1,"#"+getlowcomp(C)+getlowcomp(D)+getlowcomp(B));H.fillStyle=F;H.beginPath();H.moveTo(u.Data[0]*u.H/u.MaxValue,0);for(var A=1;A<u.Data.length;A++){H.rotate(y);H.lineTo(u.Data[A]*u.H/u.MaxValue,0)}H.closePath();H.fill();H.restore();H.save();H.strokeStyle="#505050";H.translate(u.X+(u.Width/2),u.Y+u.TitleTextHeight+8+((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8)/2)+u.MarkLabelTextHeight+8);H.rotate((Math.PI*270)/180);for(var A=0;A<u.Data.length;A++){H.beginPath();H.moveTo(0,0);H.lineTo(u.H,0);H.closePath();H.stroke();var v=u.H/u.NumMarks;for(var E=0;E<u.NumMarks;E++){H.beginPath();H.moveTo((E+1)*v,3);H.lineTo((E+1)*v,-3);H.closePath();H.stroke()}H.rotate(y)}H.restore();H.fillStyle=u.MarkLabelTextColor;H.font=u.MarkLabelTextFontString;if(u.H==((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8-4)/2)){H.save();H.translate(u.X+(u.Width/2),u.Y+u.TitleTextHeight+8+((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8)/2)+u.MarkLabelTextHeight+8);for(var A=0;A<u.NumMarks;A++){var z=(((A+1)*u.MaxValue)/u.NumMarks).toString();H.fillText(z,-(H.measureText(z).width+5),(u.MarkLabelTextHeight/2)-((A+1)*(((u.Height-u.TitleTextHeight-8)/2)/u.NumMarks)))}H.restore()}if(u.H+5<=((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8-4)/2)){u.H+=5}else{u.H=((u.Height-u.TitleTextHeight-8-u.MarkLabelTextHeight-8-4)/2)}},m);registerAnimatedWindow(m,d)}var lineAreaGraphPropsArray=new Array();function getLineAreaGraphProps(c,a){for(var b=0;b<lineAreaGraphPropsArray.length;b++){if(lineAreaGraphPropsArray[b].CanvasID==c&&lineAreaGraphPropsArray[b].WindowID==a){return lineAreaGraphPropsArray[b]}}}function CCLLineAreaGraph(){}CCLLineAreaGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,XMaxValue:null,YMaxValue:null,NumMarksX:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,AxisLabelsColor:null,AxisLabelsHeight:null,AxisLabelsFontString:null,MarginLeft:null,IsLabledOnXAxis:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createLineAreaGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.XMaxValue,this.YMaxValue,this.NumMarksX,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.AxisLabelsColor,this.AxisLabelsHeight,this.AxisLabelsFontString,this.MarginLeft,this.IsLabledOnXAxis,this.Tag)}};function createLineAreaGraph(p,a,k,j,o,m,u,t,r,h,g,e,w,d,n,s,c,f,b,l,q,v){var i=createWindow(p,k,j,o,m,u,null,"LineAreaGraph",a);lineAreaGraphPropsArray.push({CanvasID:p,WindowID:i,X:k,Y:j,Width:o,Height:m,Data:t,XMaxValue:r,YMaxValue:h,NumMarksX:g,NumMarksY:e,Title:w,TitleTextColor:d,TitleTextHeight:n,TitleTextFontString:s,AxisLabelsColor:c,AxisLabelsHeight:f,AxisLabelsFontString:b,H:0,MarginLeft:l,AlreadyUnregisteredAnimation:0,IsLabledOnXAxis:q,Tag:v});registerWindowDrawFunction(i,function(K,x){var D=getLineAreaGraphProps(K,x);if(D.AlreadyUnregisteredAnimation==0&&D.H>=D.Data[0].length-1){D.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(K,x)}var M=getCtx(K);M.save();M.fillStyle=D.TitleTextColor;M.font=D.TitleTextFontString;M.fillText(D.Title,D.X+((D.Width-M.measureText(D.Title).width)/2),D.Y+4+D.TitleTextHeight);M.font=D.AxisLabelsFontString;M.beginPath();M.moveTo(D.X+D.MarginLeft,D.Y+D.Height-D.AxisLabelsHeight-8);M.lineTo(D.X+D.MarginLeft,D.Y+D.TitleTextHeight+8);M.stroke();M.beginPath();M.moveTo(D.X+D.MarginLeft,D.Y+D.Height-D.AxisLabelsHeight-8);M.lineTo(D.X+D.Width,D.Y+D.Height-D.AxisLabelsHeight-8);M.stroke();var z=false;for(var H=0;H<D.NumMarksX;H++){if(z){M.fillStyle="#C0C0C0";z=false}else{M.fillStyle="#D0D0D0";z=true}M.fillRect(D.X+D.MarginLeft+H*((D.Width-D.MarginLeft)/D.NumMarksX),D.Y+D.TitleTextHeight+8,((D.Width-D.MarginLeft)/D.NumMarksX),D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16)}M.fillStyle=D.AxisLabelsColor;M.strokeStyle="#404040";for(H=0;H<D.NumMarksY;H++){var y=(D.YMaxValue/D.NumMarksY)*H;var B=M.measureText(y.toString()).width;M.fillText(y.toString(),D.X+D.MarginLeft-B-10,D.Y+D.Height-D.AxisLabelsHeight-8-(H*((D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16)/D.NumMarksY)));M.beginPath();M.moveTo(D.X+D.MarginLeft-5,D.Y+D.Height-D.AxisLabelsHeight-8-(H*((D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16)/D.NumMarksY)));M.lineTo(D.X+D.Width,D.Y+D.Height-D.AxisLabelsHeight-8-(H*((D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16)/D.NumMarksY)));M.stroke()}var I=new Array();if(D.IsLabledOnXAxis==1){for(var A=0;A<D.Data[0].length;A++){I.push(D.Data[0][A][0])}}M.fillStyle=D.AxisLabelsColor;for(var F=0;F<D.NumMarksX;F++){var y;if(D.IsLabledOnXAxis==1){increment=I.length/D.NumMarksX;if(I.length%D.NumMarksX>=D.NumMarksX/2){y=I[F*Math.ceil(increment)]}else{y=I[F*Math.floor(increment)]}}else{y=(D.XMaxValue/D.NumMarksX)*F}var B=M.measureText(y.toString()).width;M.fillText(y.toString(),D.X+D.MarginLeft+(F*((D.Width-D.MarginLeft)/D.NumMarksX))-(B/2),D.Y+D.Height-4);M.beginPath();M.moveTo(D.X+D.MarginLeft+(F*((D.Width-D.MarginLeft)/D.NumMarksX)),D.Y+D.TitleTextHeight+8+(D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16)+5);M.lineTo(D.X+D.MarginLeft+(F*((D.Width-D.MarginLeft)/D.NumMarksX)),D.Y+D.TitleTextHeight+8);M.stroke()}for(var H=0;H<D.Data[0][0][1].length;H++){var L=D.Data[1][H];var J=M.createLinearGradient(D.X+D.MarginLeft,D.Y+D.Height-D.AxisLabelsHeight-8,D.X+D.Width-D.MarginLeft,D.Y+D.Height-D.AxisLabelsHeight-8);var E=parseInt(L.substr(1,2),16);var G=parseInt(L.substr(3,2),16);var C=parseInt(L.substr(5,2),16);J.addColorStop(0,"#"+getlowcomp(E)+getlowcomp(G)+getlowcomp(C));J.addColorStop(0.5,L);J.addColorStop(1,"#"+gethighcomp(E)+gethighcomp(G)+gethighcomp(C));M.fillStyle=J;M.beginPath();M.moveTo(D.X+D.MarginLeft,D.Y+D.Height-D.AxisLabelsHeight-8);for(var A=0;A<D.H+1;A++){M.lineTo(D.X+D.MarginLeft+(D.IsLabledOnXAxis==1?(findXLabelIndexForValue(I,D.Data[0][A][0])*(D.Width-D.MarginLeft))/I.length:((D.Data[0][A][0]*(D.Width-D.MarginLeft))/D.XMaxValue)),D.Y+D.Height-D.AxisLabelsHeight-8-((D.Data[0][A][1][H]+sumyvalues(D.Data,H,A))*(D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16))/D.YMaxValue)}if(H==0){M.lineTo(D.X+D.MarginLeft+(D.IsLabledOnXAxis==1?(findXLabelIndexForValue(I,D.Data[0][D.H][0])*(D.Width-D.MarginLeft))/I.length:((D.Data[0][D.H][0]*(D.Width-D.MarginLeft))/D.XMaxValue)),D.Y+D.Height-D.AxisLabelsHeight-8)}else{for(var A=D.H;A>=0;A--){M.lineTo(D.X+D.MarginLeft+(D.IsLabledOnXAxis==1?(findXLabelIndexForValue(I,D.Data[0][A][0])*(D.Width-D.MarginLeft))/I.length:((D.Data[0][A][0]*(D.Width-D.MarginLeft))/D.XMaxValue)),D.Y+D.Height-D.AxisLabelsHeight-8-((D.Data[0][A][1][H-1]+sumyvalues(D.Data,H-1,A))*(D.Height-D.TitleTextHeight-D.AxisLabelsHeight-16))/D.YMaxValue)}}M.closePath();M.fill()}M.restore();if(D.H<D.Data[0].length-1){D.H++}},p);registerAnimatedWindow(p,i)}function sumyvalues(e,f,b){var d=0;for(var a=0;a<f;a++){d+=e[0][b][1][a]}return d}var candlesticksGraphPropsArray=new Array();function getCandlesticksGraphProps(c,a){for(var b=0;b<candlesticksGraphPropsArray.length;b++){if(candlesticksGraphPropsArray[b].CanvasID==c&&candlesticksGraphPropsArray[b].WindowID==a){return candlesticksGraphPropsArray[b]}}}function CCLCandlesticksGraph(){}CCLCandlesticksGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,XMarksLabelData:null,XMarksWidth:null,YMaxValue:null,NumMarksY:null,Title:null,TitleColor:null,TitleHeight:null,TitleFontString:null,CandleBodyWidth:null,CandleBodyColor:null,CandleLineColor:null,MarginLeft:null,AxisLabelsColor:null,AxisLabelsHeight:null,AxisLabelsFontString:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createCandlesticksGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.XMarksLabelData,this.XMarksWidth,this.YMaxValue,this.NumMarksY,this.Title,this.TitleColor,this.TitleHeight,this.TitleFontString,this.CandleBodyWidth,this.CandleBodyColor,this.CandleLineColor,this.marginleft,this.axislabelscolor,this.axislabelsheight,this.axislabelsfontstring,this.Tag)}};function createCandlesticksGraph(r,a,j,i,q,n,v,u,o,w,f,d,A,k,l,p,s,h,t,m,c,e,b,z){var g=createWindow(r,j,i,q,n,v,null,"CandlesticksGraph",a);candlesticksGraphPropsArray.push({CanvasID:r,WindowID:g,X:j,Y:i,Width:q,Height:n,Data:u,XMarksLabelData:o,XMarksWidth:w,YMaxValue:f,NumMarksY:d,Title:A,TitleColor:k,TitleHeight:l,TitleFontString:p,CandleBodyWidth:s,CandleBodyColor:h,CandleLineColor:t,MarginLeft:m,AxisLabelsColor:c,AxisLabelsHeight:e,AxisLabelsFontString:b,Tag:z});registerWindowDrawFunction(g,function(K,x){var y=getCandlesticksGraphProps(K,x);var L=getCtx(K);L.save();L.fillStyle=y.TitleColor;L.font=y.TitleFontString;L.fillText(y.Title,y.X+(y.Width-L.measureText(A).width)/2,y.Y+y.TitleHeight+4);L.strokeStyle="#C0C0C0";L.beginPath();L.moveTo(y.X+y.MarginLeft,y.Y+y.Height-8-y.AxisLabelsHeight);L.lineTo(y.X+y.MarginLeft,y.Y+y.TitleHeight+8);L.stroke();L.beginPath();L.moveTo(y.X+y.MarginLeft,y.Y+y.Height-8-y.AxisLabelsHeight);L.lineTo(y.X+y.Width,y.Y+y.Height-8-y.AxisLabelsHeight);L.stroke();var C=false;for(var I=0;I<=u.length;I++){if(C){L.fillStyle="#C0C0C0";C=false}else{L.fillStyle="#D0D0D0";C=true}L.fillRect(y.X+y.MarginLeft+(I*y.XMarksWidth),y.Y+y.TitleHeight+8,y.XMarksWidth,y.Height-y.TitleHeight-y.AxisLabelsHeight-16)}L.fillStyle=y.AxisLabelsColor;L.font=y.AxisLabelsFontString;L.strokeStyle="#404040";for(var I=0;I<y.NumMarksY;I++){var B=(y.YMaxValue/y.NumMarksY)*I;var D=L.measureText(B.toString()).width;L.fillText(B.toString(),y.X+y.MarginLeft-10-D,y.Y+y.Height-y.AxisLabelsHeight-8-(I*((y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.NumMarksY)));L.beginPath();L.moveTo(y.X+y.MarginLeft-5,y.Y+y.Height-y.AxisLabelsHeight-8-(I*((y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.NumMarksY)));L.lineTo(y.X+y.Width,y.Y+y.Height-y.AxisLabelsHeight-8-(I*((y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.NumMarksY)));L.stroke()}for(var G=0;G<y.Data.length;G++){L.beginPath();L.moveTo(y.X+y.MarginLeft+((G+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8+5);L.lineTo(y.X+y.MarginLeft+((G+1)*y.XMarksWidth),y.Y+y.TitleHeight+8);L.stroke()}for(var I=0;I<y.XMarksLabelData.length;I++){var D=L.measureText(y.XMarksLabelData[I][1].toString()).width;L.fillText(y.XMarksLabelData[I][1],y.X+y.MarginLeft+((y.XMarksLabelData[I][0]+1)*y.XMarksWidth)-(D/2),y.Y+y.Height-4)}for(var I=0;I<y.Data.length;I++){var J=L.createLinearGradient(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue),y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));var F=parseInt(y.CandleBodyColor.substr(1,2),16);var H=parseInt(y.CandleBodyColor.substr(3,2),16);var E=parseInt(y.CandleBodyColor.substr(5,2),16);J.addColorStop(0,"#"+getlowcomp(F)+getlowcomp(H)+getlowcomp(E));J.addColorStop(0.5,y.CandleBodyColor);J.addColorStop(1,"#"+gethighcomp(F)+gethighcomp(H)+gethighcomp(E));L.fillStyle=J;L.strokeStyle=y.CandleLineColor;L.beginPath();if(y.Data[I][0]<y.Data[I][1]){L.moveTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)-(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)+(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)+(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)-(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.closePath();L.fill();L.beginPath();L.moveTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][2]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.closePath();L.stroke();L.beginPath();L.moveTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][3]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.closePath();L.stroke()}else{L.strokeStyle=y.CandleBodyColor;L.moveTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)-(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)+(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)+(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth)-(y.CandleBodyWidth/2),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.closePath();L.stroke();L.strokeStyle=y.CandleLineColor;L.beginPath();L.moveTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][1]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][2]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.closePath();L.stroke();L.beginPath();L.moveTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][0]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.lineTo(y.X+y.MarginLeft+((I+1)*y.XMarksWidth),y.Y+y.Height-y.AxisLabelsHeight-8-(y.Data[I][3]*(y.Height-y.TitleHeight-y.AxisLabelsHeight-16)/y.YMaxValue));L.closePath();L.stroke()}}L.restore()},r)}var doughnutChartPropsArray=new Array();function getDoughnutChartProps(c,a){for(var b=0;b<doughnutChartPropsArray.length;b++){if(doughnutChartPropsArray[b].CanvasID==c&&doughnutChartPropsArray[b].WindowID==a){return doughnutChartPropsArray[b]}}}function CCLDoughnutChart(){}CCLDoughnutChart.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,Title:null,TitleColor:null,TitleTextHeight:null,TitleFontString:null,InnerRadius:null,MarginSides:null,LabelColor:null,LabelHeight:null,LabelFontString:null,LegendWidth:null,LegendHeight:null,LegendFontString:null,SliceClickFunction:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.Title,this.TitleColor,this.TitleTextHeight,this.TitleFontString,this.InnerRadius,this.MarginSides,this.LabelColor,this.LabelHeight,this.LabelFontString,this.LegendWidth,this.LegendHeight,this.LegendFontString,this.SliceClickFunction,this.Tag)}};function createDoughnutChart(p,b,h,f,o,k,z,w,B,j,n,m,t,v,q,l,a,e,c,s,g,A){var d=createWindow(p,h,f,o,k,z,null,"DoughnutChart",b);var u=0;for(var r=0;r<w.length;r++){u+=w[r][1]}doughnutChartPropsArray.push({CanvasID:p,WindowID:d,X:h,Y:f,Width:o,Height:k,Data:w,Title:B,TitleColor:j,TitleTextHeight:n,TitleFontString:m,InnerRadius:t,CurrentRadius:t+20,TotalValue:u,MarginSides:v,LabelColor:q,LabelHeight:l,LabelFontString:a,LegendWidth:e,LegendHeight:c,LegendFontString:s,AnimationCompleted:0,DeltaI:-1,DeltaX:0,DeltaY:0,SliceClickFunction:g,Tag:A});registerClickFunction(d,function(J,x,G){var i=getDoughnutChartProps(J,x);var E=i.Data;var D=i.TotalValue;var I=G.calcX;var H=G.calcY;var K=-1;var P=i.X+(i.Width/2)+i.MarginSides;var M=i.Y+((i.Height-i.TitleTextHeight-8-(i.LabelHeight*2))/2);if(150*150>(I-P)*(I-P)+(H-M)*(H-M)){if(I>P&&H==M){K=0}else{if(I>P&&H>M){K=(Math.atan((H-M)/(I-P)))*180/Math.PI}else{if(I<P&&H>M){K=180-((Math.atan((H-M)/(I-P)))*180/Math.PI)}else{if(I<P&&H==M){K=180}else{if(I<P&&H<M){K=180+((Math.atan((H-M)/(I-P)))*180/Math.PI)}else{if(I==P&&H<M){K=270}else{if(I>P&&H<M){K=360+((Math.atan((H-M)/(I-P)))*180/Math.PI)}}}}}}}}var O=0;var F=0;var y=0;for(r=0;r<E.length;r++){O+=(E[r][1]*360)/D;var N=0;var L=0;if(K>=0&&F<=K&&O>=K){var C=F+((O-F)/2);if(C==0){N=40;L=0}else{if(C>0&&C<90){N=Math.cos(C*(Math.PI/180))*40;L=Math.sin(C*(Math.PI/180))*40}else{if(C==90){N=0;L=40}else{if(C>90&&C<180){N=-(Math.cos((180-C)*(Math.PI/180))*40);L=Math.sin((180-C)*(Math.PI/180))*40}else{if(C==180){N=-40;L=0}else{if(C>180&&C<270){N=-(Math.cos((180-C)*(Math.PI/180))*40);L=(Math.sin((180-C)*(Math.PI/180))*40)}else{if(C==270){N=0;L=-40}else{if(C>270&&C<360){N=Math.cos((360-C)*(Math.PI/180))*40;L=-(Math.sin((360-C)*(Math.PI/180))*40)}}}}}}}}}if(N!=0||L!=0){i.DeltaX=N;i.DeltaY=L;i.DeltaI=r;y=1;if(i.SliceClickFunction!=null){i.SliceClickFunction(J,x,r)}}F=O}if(y==0){i.DeltaX=0;i.DeltaY=0;i.DeltaI=-1}},p);registerWindowDrawFunction(d,function(R,E){var K=getDoughnutChartProps(R,E);var H=getCtx(R);var N=K.TotalValue;var P=K.Data;var M=K.InnerRadius;var O=K.CurrentRadius;if(K.AnimationCompleted==0&&O>=(K.Width-(K.MarginSides*2)-K.LegendWidth)/2){unregisterAnimatedWindow(R,E);K.AnimationCompleted=1}H.save();H.fillStyle=K.TitleColor;H.font=K.TitleFontString;H.fillText(K.Title,K.X+(K.Width-H.measureText(K.Title).width)/2,K.Y+K.TitleTextHeight+4);H.font=K.LabelFontString;var J=K.X+(K.Width/2)+K.MarginSides;var I=K.Y+((K.Height-K.TitleTextHeight-8-(K.LabelHeight*2))/2);var Q=0;var C=0;for(var L=0;L<P.length;L++){Q+=(P[L][1]*100*360)/(N*100);var y=parseInt(P[L][2].substr(1,2),16);var x=parseInt(P[L][2].substr(3,2),16);var F=parseInt(P[L][2].substr(5,2),16);var D=H.createRadialGradient(J+(K.DeltaI==L?K.DeltaX:0),I+(K.DeltaI==L?K.DeltaY:0),M,J+(K.DeltaI==L?K.DeltaX:0),I+(K.DeltaI==L?K.DeltaY:0),O);D.addColorStop(0,"#"+gethighcomp(y)+gethighcomp(x)+gethighcomp(F));D.addColorStop(0.5,P[L][2]);D.addColorStop(1,"#"+getlowcomp(y)+getlowcomp(x)+getlowcomp(F));H.fillStyle=D;H.beginPath();H.arc(J+(K.DeltaI==L?K.DeltaX:0),I+(K.DeltaI==L?K.DeltaY:0),O,(Math.PI/180)*C,(Math.PI/180)*Q,false);H.arc(J+(K.DeltaI==L?K.DeltaX:0),I+(K.DeltaI==L?K.DeltaY:0),M,(Math.PI/180)*Q,(Math.PI/180)*C,true);H.closePath();H.fill();H.strokeStyle=P[L][2];C=Q}if(K.AnimationCompleted==0){K.CurrentRadius+=5}var Q=0;var C=0;for(var L=0;L<P.length;L++){Q+=(P[L][1]*100*360)/(N*100);H.strokeStyle=P[L][2];drawPieChartLabels(H,P[L][0],Q,C,O,N,P[L][1],P[L][2],0,0,J+(K.DeltaI==L?K.DeltaX:0),I+(K.DeltaI==L?K.DeltaY:0),K.LabelHeight);C=Q}H.font=K.LegendFontString;for(var G=0;G<P.length;G++){H.fillStyle=P[G][2];H.fillRect(K.X+K.Width-K.LegendWidth,K.Y+K.Height-4-K.LegendHeight-(G*(K.LegendHeight+10)),30,K.LegendHeight);H.fillStyle=P[G][2];H.fillText(P[G][0],K.X+K.Width-K.LegendWidth+35,K.Y+K.Height-4-(G*(K.LegendHeight+10)))}H.restore()},p);registerAnimatedWindow(p,d);return d}var barsMixedWithLabledLineGraphsPropsArray=new Array();function getBarsMixedWithLabledLineGraphProps(c,a){for(var b=0;b<barsMixedWithLabledLineGraphsPropsArray.length;b++){if(barsMixedWithLabledLineGraphsPropsArray[b].CanvasID==c&&barsMixedWithLabledLineGraphsPropsArray[b].WindowID==a){return barsMixedWithLabledLineGraphsPropsArray[b]}}}function CCLBarsMixedWithLabledLineGraph(){}CCLBarsMixedWithLabledLineGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,NumMarksY:null,Title:null,TitleTextColor:null,TitleTextHeight:null,TitleTextFontString:null,BarWidth:null,AxisLabelsTextHeight:null,AxisLabelsTextFontString:null,AxisLabelsTextColor:null,MarginLeft:null,GapBetweenBars:null,BarClickFunction:null,HasLegend:null,MarginRight:null,LineClickFunction:null,YMaxValue:null,Tag:null,ControlNameID:null,Depth:null,LinesData:null,Intialize:function(){return createBarsMixedWithLabledLineGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.NumMarksY,this.Title,this.TitleTextColor,this.TitleTextHeight,this.TitleTextFontString,this.BarWidth,this.AxisLabelsTextColor,this.AxisLabelsTextHeight,this.AxisLabelsTextFontString,this.MarginLeft,this.GapBetweenBars,this.BarClickFunction,this.HasLegend,this.MarginRight,this.LinesData,this.LineClickFunction,this.Tag)}};function createBarsMixedWithLabledLineGraph(u,a,m,l,t,p,A,z,q,h,C,e,s,v,j,f,n,r,o,k,d,b,w,g,c,B){var i=createWindow(u,m,l,t,p,A,null,"BarsMixedWithLabeledLineGraph",a);barsMixedWithLabledLineGraphsPropsArray.push({CanvasID:u,WindowID:i,X:m,Y:l,Width:t,Height:p,Data:z,MaxValue:q,NumMarksY:h,Title:C,TitleTextColor:e,TitleTextHeight:s,TitleTextFontString:v,BarWidth:j,BarLabelsWithBoundingBoxes:new Array(),H:p-n-8-20,AxisLabelsTextHeight:n,AxisLabelsTextFontString:r,AxisLabelsTextColor:f,MarginLeft:o,GapBetweenBars:k,BarClickFunction:d,AlreadyUnregisteredAnimation:0,HasLegend:b,MarginRight:w,LinesData:g,LineXYs:new Array(),LineClickFunction:c,YMaxValue:q,Tag:B});registerClickFunction(i,function(I,y,F){var x=getBarsMixedWithLabledLineGraphProps(I,y);var H=F.calcX;var G=F.calcY;for(var E=0;E<x.BarLabelsWithBoundingBoxes.length;E++){if(H>=x.BarLabelsWithBoundingBoxes[E].X&&H<=x.BarLabelsWithBoundingBoxes[E].X+x.BarLabelsWithBoundingBoxes[E].Width&&G>=x.BarLabelsWithBoundingBoxes[E].Y&&G<=x.BarLabelsWithBoundingBoxes[E].Y+x.BarLabelsWithBoundingBoxes[E].Height){if(x.BarClickFunction!=null){x.BarClickFunction(I,y,E);return}}}var J=x.LineXYs;for(var E=0;E<J.length;E++){for(var D=0;D<J[E].length-1;D++){if(H>=J[E][D][0]&&H<=J[E][D+1][0]){if((G<=J[E][D][1]&&G>=J[E][D+1][1])||(G>=J[E][D][1]&&G<=J[E][D+1][1])){l=(((J[E][D][1]-J[E][D+1][1])*(H-J[E][D][0]))/(J[E][D][0]-J[E][D+1][0]))+J[E][D][1];if(l+4>G&&l-4<G){x.LineClickFunction(I,y,E)}}}}}},u);registerWindowDrawFunction(i,function(R,D){var G=getBarsMixedWithLabledLineGraphProps(R,D);var L=getCtx(R);var O=G.H;if(G.AlreadyUnregisteredAnimation==0&&O<G.TitleTextHeight+8){G.AlreadyUnregisteredAnimation=1;unregisterAnimatedWindow(R,D)}G.LineXYs=new Array();L.clearRect(0,0,canvas.width,canvas.height);L.save();L.fillStyle=G.TitleTextColor;L.font=G.TitleTextFontString;L.lineWidth=2;L.fillText(G.Title,G.X+(G.Width-L.measureText(G.Title).width)/2,G.Y+G.TitleTextHeight+4);L.lineWidth=1;L.fillStyle=G.AxisLabelsTextColor;L.font=G.AxisLabelsTextFontString;var F=G.Height-G.TitleTextHeight-G.AxisLabelsTextHeight-16;L.beginPath();L.moveTo(G.X+G.MarginLeft,G.Y+G.TitleTextHeight+8+F);L.lineTo(G.X+G.MarginLeft,G.Y+G.TitleTextHeight+8);L.stroke();for(var P=0;P<G.NumMarksY;P++){var S=(G.MaxValue/G.NumMarksY)*P;S=Math.round(S*100)/100;var Q=L.measureText(S.toString()).width;var x=F/G.NumMarksY;L.fillText(S.toString(),G.X+G.MarginLeft-Q-5,G.Y+G.TitleTextHeight+8+(G.AxisLabelsTextHeight/2)+F-(P*x));L.beginPath();L.moveTo(G.X+G.MarginLeft,G.Y+G.TitleTextHeight+8+F-(P*x));L.lineTo(G.X+G.MarginLeft+(G.Data.length*(G.BarWidth+G.GapBetweenBars))+G.GapBetweenBars,G.Y+G.TitleTextHeight+8+F-(P*x));L.stroke()}G.BarLabelsWithBoundingBoxes=new Array();for(var N=0;N<G.Data.length;N++){if(G.HasLegend!=1){var I=L.measureText(G.Data[N][0]).width;L.fillStyle=G.AxisLabelsTextColor;L.font=G.AxisLabelsTextFontString;if(I<G.BarWidth){L.fillText(G.Data[N][0],G.X+G.MarginLeft+G.GapBetweenBars+(N*(G.BarWidth+G.GapBetweenBars))+((G.BarWidth-I)/2),G.Y+G.Height-4)}else{L.fillText(G.Data[N][0],G.X+G.MarginLeft+G.GapBetweenBars+(N*(G.BarWidth+G.GapBetweenBars))-((I-G.BarWidth)/2),G.Y+G.Height-4)}}drawrect(R,D,L,G,N,F)}var E=new Array();var H=0;for(var N=0;N<G.LinesData.length;N++){if(G.LinesData[N][0].length>H){H=G.LinesData[N][0].length}}for(var N=0;N<H;N++){for(var M=0;M<G.LinesData.length;M++){if(N<G.LinesData[M][0].length){var y=0;for(var J=0;J<E.length;J++){if(E[J]==G.LinesData[M][0][N][0]){y=1;break}}if(y==0){E.push(G.LinesData[M][0][N][0])}}}}var N=0;while(N<G.LinesData.length){drawlineforbarsmixedwithlinesgraph(L,G,N,E);N++}if(G.HasLegend==1){for(var K=0;K<G.Data.length;K++){L.fillStyle=z[K][2];L.fillRect(G.X+G.Width-G.MarginRight,G.Y+G.Height-8-G.AxisLabelsTextHeight-(K*(8+G.AxisLabelsTextHeight)),30,G.AxisLabelsTextHeight);L.fillText(z[K][0],G.X+G.Width-G.MarginRight+35,G.Y+G.Height-8-(K*(8+G.AxisLabelsTextHeight)))}}if(O>=G.TitleTextHeight+8){G.H-=5}L.restore()},u);registerAnimatedWindow(u,i);return i}function drawlineforbarsmixedwithlinesgraph(h,a,g,f){var d=parseInt(a.LinesData[g][1].substr(1,2),16);var e=parseInt(a.LinesData[g][1].substr(3,2),16);var c=parseInt(a.LinesData[g][1].substr(5,2),16);h.strokeStyle=a.LinesData[g][1];h.lineWidth=3;h.lineCap="round";h.miterLimit=0;h.shadowOffsetX=2;h.shadowOffsetY=2;h.shadowBlur=5;h.shadowColor="#"+getlowcomp(d).toString(16)+getlowcomp(e).toString(16)+getlowcomp(c).toString(16);h.beginPath();var j=new Array();j=j.concat([[a.X+a.MarginLeft+(findXLabelIndexForValue(f,a.LinesData[g][0][0][0])*(a.Width-a.MarginLeft))/f.length,a.Y+a.Height-a.AxisLabelsTextHeight-8-((a.LinesData[g][0][0][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16))/a.YMaxValue)]]);h.moveTo(a.X+a.MarginLeft+a.GapBetweenBars+(a.BarWidth/2)+(findXLabelIndexForValue(f,a.LinesData[g][0][0][0])*(a.Width-a.MarginLeft-a.GapBetweenBars-(a.BarWidth/2)))/f.length,a.Y+a.Height-a.AxisLabelsTextHeight-8-((a.LinesData[g][0][0][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16))/a.YMaxValue));for(var b=1;b<a.H&&b<a.LinesData[g][0].length;b++){j=j.concat([[a.X+a.MarginLeft+(findXLabelIndexForValue(f,a.LinesData[g][0][b][0])*(a.Width-a.MarginLeft))/f.length,a.Y+a.Height-a.AxisLabelsTextHeight-8-((a.LinesData[g][0][b][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16))/a.YMaxValue)]]);h.lineTo(a.X+a.MarginLeft+a.GapBetweenBars+(a.BarWidth/2)+(findXLabelIndexForValue(f,a.LinesData[g][0][b][0])*(a.GapBetweenBars+a.BarWidth)),a.Y+a.Height-a.AxisLabelsTextHeight-8-((a.LinesData[g][0][b][1]*(a.Height-a.TitleTextHeight-a.AxisLabelsTextHeight-16))/a.YMaxValue))}a.LineXYs.concat([[j]]);h.stroke()}var stackedBarGraphPropsArray=new Array();function getstackedBarGraphProps(c,a){for(var b=0;b<stackedBarGraphPropsArray.length;b++){if(stackedBarGraphPropsArray[b].CanvasID==c&&stackedBarGraphPropsArray[b].WindowID==a){return stackedBarGraphPropsArray[b]}}}function CCLStackedBarGraph(){}CCLStackedBarGraph.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,MaxValue:null,NumMarksY:null,Title:null,TitleColor:null,TitleHeight:null,TitleFontString:null,BarWidth:null,GapBetweenBarSets:null,AxisLabelsColor:null,AxisLabelsHeight:null,AxisLabelsFontString:null,BarClickFunction:null,MarginLeft:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createStackedBarGraph(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.MaxValue,this.NumMarksY,this.Title,this.TitleColor,this.TitleHeight,this.TitleFontString,this.BarWidth,this.GapBetweenBarSets,this.AxisLabelsColor,this.AxisLabelsHeight,this.AxisLabelsFontString,this.BarClickFunction,this.MarginLeft,this.Tag)}};function createStackedBarGraph(s,a,k,j,r,o,u,t,p,f,w,l,m,q,i,e,c,g,b,d,n,v){var h=createWindow(s,k,j,r,o,u,null,"StackedBarGraph",a);stackedBarGraphPropsArray.push({CanvasID:s,WindowID:h,X:k,Y:j,Width:r,Height:o,Data:t,MaxValue:p,NumMarksY:f,Title:w,TitleColor:l,TitleHeight:m,TitleFontString:q,BarWidth:i,GapBetweenBarSets:e,H:o-m-16-g,AxisLabelsColor:c,AxisLabelsHeight:g,AxisLabelsFontString:b,BarLabelsWithBoundingBoxes:new Array(),BarClickFunction:d,AlreadyUnregisteredAnimation:0,MarginLeft:n,Tag:v});registerClickFunction(h,function(F,x,C){var y=getstackedBarGraphProps(F,x);var A=y.Data;var z=0;for(var B=0;B<A.length;B++){z+=A[B][1]}var E=C.calcX;var D=C.calcY;for(var B=0;B<y.BarLabelsWithBoundingBoxes.length;B++){if(E>=y.BarLabelsWithBoundingBoxes[B][1]&&E<=y.BarLabelsWithBoundingBoxes[B][3]&&D>=y.BarLabelsWithBoundingBoxes[B][2]&&D<=y.BarLabelsWithBoundingBoxes[B][4]){if(y.BarClickFunction!=null){y.BarClickFunction(F,x,B)}}}},s);registerWindowDrawFunction(h,function(E,x){var z=getstackedBarGraphProps(E,x);if(z.AlreadyUnregisteredAnimation==0&&z.H<100){unregisterAnimatedWindow(E,x);z.AlreadyUnregisteredAnimation=1}var G=getCtx(E);G.save();G.fillStyle=z.TitleColor;G.font=z.TitleFontString;G.fillText(z.Title,z.X+(z.Width-G.measureText(z.Title).width)/2,z.Y+z.TitleHeight+4);G.font=z.AxisLabelsFontString;G.beginPath();G.moveTo(z.X+z.MarginLeft,z.Y+z.Height-z.AxisLabelsHeight-8);G.lineTo(z.X+z.MarginLeft,z.Y+z.TitleHeight+8);G.stroke();for(var D=0;D<z.NumMarksY;D++){var y=(z.MaxValue/z.NumMarksY)*D;y=Math.round(y*100)/100;var B=G.measureText(y.toString()).width;var C=(z.Height-z.TitleHeight-z.AxisLabelsHeight-16)/z.NumMarksY;G.fillText(y.toString(),z.X+z.MarginLeft-10-B,z.Y+z.Height-z.AxisLabelsHeight-8-(D*C));G.beginPath();G.moveTo(z.X+z.MarginLeft-5,z.Y+z.Height-z.AxisLabelsHeight-8-(D*C));G.lineTo(z.X+z.MarginLeft+z.GapBetweenBarSets+(z.Data.length*z.BarWidth),z.Y+z.Height-z.AxisLabelsHeight-8-(D*C));G.stroke()}z.BarLabelsWithBoundingBoxes=new Array();for(var A=0;A<z.Data.length;A++){G.fillStyle=z.AxisLabelsColor;G.font=z.AxisLabelsFontString;var F=G.measureText(z.Data[A][0]).width;if(F<z.BarWidth){G.fillText(z.Data[A][0],z.X+z.MarginLeft+(A*z.BarWidth)+((z.BarWidth-F)/2),z.Y+z.Height-4)}else{G.fillText(z.Data[A][0],z.X+z.MarginLeft+(A*z.BarWidth),z.Y+z.Height-z.AxisLabelsHeight-3)}drawmultiplerect(G,z,A)}if(z.AlreadyUnregisteredAnimation==0&&z.H>100){z.H-=5}G.restore()},s);registerAnimatedWindow(s,h);return h}function drawmultiplerect(p,c,d){p.save();var l=c.H;var j=0;for(var m=1;m<c.Data.length;m++){j+=c.Data[d][m][0]}var b=c.Height-c.TitleHeight-c.AxisLabelsHeight-16;var g=c.Height-b-c.AxisLabelsHeight-8;var o=c.Height-c.AxisLabelsHeight-8;if(c.H<g+(b-(b/c.MaxValue)*j)){l=g+(b-(b/c.MaxValue)*j)}c.BarLabelsWithBoundingBoxes.push([c.Data[d][0],c.X+c.MarginLeft+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-l,c.X+c.MarginLeft+c.GapBetweenBarSets+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o]);var a=0;for(var m=1;m<c.Data[d].length;m++){var n=c.Data[d][m][1];var k=p.createLinearGradient(c.X,c.Y,c.X+c.BarWidth,c.Y+b);var f=parseInt(n.substr(1,2),16);var h=parseInt(n.substr(3,2),16);var e=parseInt(n.substr(5,2),16);k.addColorStop(0,"#"+getlowcomp(f)+getlowcomp(h)+getlowcomp(e));k.addColorStop(0.5,n);k.addColorStop(1,"#"+gethighcomp(f)+gethighcomp(h)+gethighcomp(e));p.fillStyle=k;p.shadowOffsetX=5;p.shadowBlur=5;p.shadowColor="#"+getlowcomp(f).toString(16)+getlowcomp(h).toString(16)+getlowcomp(e).toString(16);l=(o-c.H)*c.Data[d][m][0]/j;if(c.H<g+(b-(b/c.MaxValue)*j)){l=b*c.Data[d][m][0]/c.MaxValue}p.shadowOffsetY=0;if(m<c.Data[d].length-1){p.beginPath();p.moveTo(c.X+c.MarginLeft+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l));p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l));p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-a);p.lineTo(c.X+c.MarginLeft+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-a);p.closePath();p.fill();p.shadowOffsetX=0;p.shadowOffsetY=0;p.shadowBlur=0;p.shadowColor="#FFFFFF";k=p.createLinearGradient(c.X,c.Y,c.X+c.BarWidth,c.Y+b);k.addColorStop(0,"#FFFFFF");k.addColorStop(0.5,"#000000");k.addColorStop(1,"#FFFFFF");p.fillStyle=k;p.globalAlpha=0.1;p.beginPath();p.moveTo(c.X+c.MarginLeft+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth)+5,c.Y+o-(a+l)+5);p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets-5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+5);p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets-5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-a-5);p.lineTo(c.X+c.MarginLeft+5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-a-5);p.closePath();p.fill();p.globalAlpha=1}else{p.beginPath();p.moveTo(c.X+c.MarginLeft+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+5);p.arc(c.X+c.MarginLeft+5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+5,5,Math.PI,(Math.PI/180)*270,false);p.lineTo(c.X+c.MarginLeft+c.BarWidth-c.GapBetweenBarSets-5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l));p.arc(c.X+c.MarginLeft+c.GapBetweenBarSets-5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+5,5,(Math.PI/180)*270,0,false);p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-a);p.lineTo(c.X+c.MarginLeft+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-a);p.closePath();p.fill();p.shadowOffsetX=0;p.shadowOffsetY=0;p.shadowBlur=0;p.shadowColor="#FFFFFF";k=p.createLinearGradient(c.X,c.Y,c.X+c.BarWidth,c.Y+b);k.addColorStop(0,"#FFFFFF");k.addColorStop(0.5,"#000000");k.addColorStop(1,"#FFFFFF");p.fillStyle=k;p.globalAlpha=0.1;p.beginPath();p.moveTo(c.X+c.MarginLeft+5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+10);p.arc(c.X+c.MarginLeft+10+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+10,5,Math.PI,(Math.PI/180)*270,false);p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets-10+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+5);p.arc(c.X+c.MarginLeft+c.GapBetweenBarSets-10+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-(a+l)+10,5,(Math.PI/180)*270,0,false);p.lineTo(c.X+c.MarginLeft+c.GapBetweenBarSets-5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-5-a);p.lineTo(c.X+c.MarginLeft+5+((c.BarWidth-c.GapBetweenBarSets)/2)+(d*c.BarWidth),c.Y+o-5-a);p.closePath();p.fill();p.globalAlpha=1}p.shadowOffsetX=0;p.shadowOffsetY=0;p.shadowBlur=0;p.shadowColor="#FFFFFF";a+=l;p.restore()}}var tabPropsArray=new Array();function getTabProps(c,a){for(var b=0;b<tabPropsArray.length;b++){if(tabPropsArray[b].CanvasID==c&&tabPropsArray[b].WindowID==a){return tabPropsArray[b]}}}function CCLTabControl(){}CCLTabControl.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,TabLabels:null,TabLabelColor:null,TabLabelHeight:null,TabLabelFontString:null,PanelWindowIDs:null,SelectedTabID:null,TabLabelGradientStartColor:null,TabLabelGradientEndColor:null,GapBetweenTabs:null,SelectedTabBorderColor:null,SelectedTabBorderLineWidth:null,Tag:null,ControlNameID:null,Depth:null,PanelHasBackgroundGradient:null,PanelHasBorder:null,PanelBackgroundStartColor:null,PanelBackgroundEndColor:null,PanelBorderColor:null,Initialize:function(){return createTabControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.TabLabels,this.TabLabelColor,this.TabLabelHeight,this.TabLabelFontString,this.TabLabelGradientStartColor,this.TabLabelGradientEndColor,this.PanelHasBorder,this.PanelBorderColor,this.PanelHasBackgroundGradient,this.panelBackgroundStartColor,this.panelBackgroundEndColor,this.selectedTabID,this.GapBetweenTabs,this.SelectedTabBorderColor,this.SelectedTabBorderLineWidth,this.Tag)}};function createTabControl(s,a,m,l,r,q,C,d,k,A,o,f,z,t,w,B,e,c,n,p,h,j,D){var g=createWindow(s,m,l,r,q,C,null,"Tab",a);var b=new Array();for(var u=0;u<d.length;u++){var v=createPanel(s,a+"Panel"+u.toString(),m,l+A+8,r,q-A-8,C,t,w,B,e,c);b.push(v);registerHiddenWindow(s,v,(u==n?0:1));registerChildWindow(s,v,g)}tabPropsArray.push({CanvasID:s,WindowID:g,X:m,Y:l,Width:r,Height:q,TabLabels:d,TabLabelColor:k,TabLabelHeight:A,TabLabelFontString:o,PanelWindowIDs:b,SelectedTabID:n,TabLabelGradientStartColor:f,TabLabelGradientEndColor:z,TabLabelHitAreas:new Array(),GapBetweenTabs:p,SelectedTabBorderColor:h,SelectedTabBorderLineWidth:j,Tag:D});registerWindowDrawFunction(g,function(J,x){var F=getTabProps(J,x);var L=getCtx(J);L.font=F.TabLabelFontString;var y=L.measureText(F.TabLabels[F.SelectedTabID]).width+8+((F.TabLabelHeight+8)*2);var K=0;var I=0;F.TabLabelHitAreas=new Array();var H=0;for(var G=0;G<F.TabLabels.length;G++){if(G==F.SelectedTabID+1){K+=y}if(G==F.SelectedTabID){I=K}else{H=L.measureText(F.TabLabels[G]).width+8+((F.TabLabelHeight+8)*2);if(G!=F.SelectedTabID&&K+H<F.Width){var E=L.createLinearGradient(F.X+K,F.Y,F.X+K+H,F.Y+F.TabLabelHeight+8);E.addColorStop(0,F.TabLabelGradientStartColor);E.addColorStop(1,F.TabLabelGradientEndColor);L.fillStyle=E;L.beginPath();L.moveTo(F.X+K+((G+1)*F.GapBetweenTabs),F.Y+F.TabLabelHeight+8);L.lineTo(F.X+K+((G+1)*F.GapBetweenTabs),F.Y+5);L.arc(F.X+K+((G+1)*F.GapBetweenTabs)+5,F.Y+5,5,Math.PI,(Math.PI/180)*270,false);L.lineTo(F.X+K+((G+1)*F.GapBetweenTabs)+H-5,F.Y);L.arc(F.X+K+((G+1)*F.GapBetweenTabs)+H-5,F.Y+5,5,(Math.PI/180)*270,Math.PI*2,false);L.lineTo(F.X+K+((G+1)*F.GapBetweenTabs)+H,F.Y+F.TabLabelHeight+8);L.closePath();L.fill();L.fillStyle=F.TabLabelColor;L.fillText(F.TabLabels[G],F.X+K+((G+1)*F.GapBetweenTabs)+F.TabLabelHeight+8+4,F.Y+F.TabLabelHeight+4);F.TabLabelHitAreas.push({XStart:F.X+K,XEnd:F.X+K+((F.TabLabelHeight+8)*2)+H+8,YStart:F.Y,YEnd:F.Y+F.TabLabelHeight+8,PanelWindowID:F.PanelWindowIDs[G],TabID:G})}K+=H}}K=I;var E=L.createLinearGradient(F.X,F.Y,F.X,F.Y+F.TabLabelHeight+8);E.addColorStop(0,F.TabLabelGradientStartColor);E.addColorStop(1,F.TabLabelGradientEndColor);L.fillStyle=E;L.beginPath();L.moveTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs),F.Y+F.TabLabelHeight+8);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs),F.Y+5);L.arc(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+5,F.Y+5,5,Math.PI,(Math.PI/180)*270,false);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+H-5,F.Y);L.arc(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+H-5,F.Y+5,5,(Math.PI/180)*270,Math.PI*2,false);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+H,F.Y+F.TabLabelHeight+8);L.closePath();L.fill();L.fillStyle=F.TabLabelColor;L.fillText(F.TabLabels[F.SelectedTabID],F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+F.TabLabelHeight+8+4,F.Y+F.TabLabelHeight+4);L.strokeStyle=F.SelectedTabBorderColor;L.lineWidth=F.SelectedTabBorderLineWidth;L.beginPath();L.moveTo(F.X,F.Y+F.TabLabelHeight+8);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs),F.Y+F.TabLabelHeight+8);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs),F.Y+5);L.arc(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+5,F.Y+5,5,Math.PI,(Math.PI/180)*270,false);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+H-5,F.Y);L.arc(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+H-5,F.Y+5,5,(Math.PI/180)*270,Math.PI*2,false);L.lineTo(F.X+K+((F.SelectedTabID+1)*F.GapBetweenTabs)+H,F.Y+F.TabLabelHeight+8);L.lineTo(F.X+F.Width,F.Y+F.TabLabelHeight+8);L.lineTo(F.X+F.Width,F.Y+F.Height);L.stroke();L.lineWidth=1;F.TabLabelHitAreas.push({XStart:F.X+K,XEnd:F.X+K+((F.TabLabelHeight+8)*2)+H+8,YStart:F.Y,YEnd:F.Y+F.TabLabelHeight+8,PanelWindowID:F.PanelWindowIDs[F.SelectedTabID],TabID:F.SelectedTabID})},s);registerClickFunction(g,function(y,H,G){var x=getTabProps(y,H);var J=G.calcX;var I=G.calcY;for(var E=0;E<x.TabLabelHitAreas.length;E++){if(J>x.TabLabelHitAreas[E].XStart&&J<x.TabLabelHitAreas[E].XEnd&&I>x.TabLabelHitAreas[E].YStart&&I<x.TabLabelHitAreas[E].YEnd){for(var F=0;F<x.PanelWindowIDs.length;F++){if(F!=x.TabLabelHitAreas[E].PanelWindowID){setHiddenWindowStatus(y,x.PanelWindowIDs[F],1)}}setHiddenWindowStatus(y,x.TabLabelHitAreas[E].PanelWindowID,0);x.SelectedTabID=x.TabLabelHitAreas[E].TabID}}},s);return g}var imageMapPropsArray=new Array();function getImageMapProps(c,a){for(var b=0;b<imageMapPropsArray.length;b++){if(imageMapPropsArray[b].CanvasID==c&&imageMapPropsArray[b].WindowID==a){return imageMapPropsArray[b]}}}var imageMapImages=new Array();function setImageMapImage(a,d){var c=0;for(var b=0;b<imageMapImages.length;b++){if(imageMapImages[b].CanvasID==a.CanvasID&&imageMapImages[b].WindowID==a.WindowID){c=1;imageMapImages[b].Image=d}}if(c==0){imageMapImages.push({CanvasID:a.CanvasID,WindowID:a.WindowID,Image:d})}}function getImageMapImage(a){for(var b=0;b<imageMapImages.length;b++){if(imageMapImages[b].CanvasID==a.CanvasID&&imageMapImages[b].WindowID==a.WindowID){return imageMapImages[b].Image}}}function CCLImageMapControl(){}CCLImageMapControl.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImgUrl:null,PinXYs:null,PinClickFunction:null,HasZoom:null,ImageTopLeftXOffset:null,ImageTopLeftYOffset:null,MovingMap:null,LastMovingX:null,LastMovingY:null,Scale:null,ScaleIncrementFactor:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createImageMapControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.ImgUrl,this.PinXYs,this.PinClickFunction,this.HasZoom,this.ImageTopLeftXOffset,this.ImageTopLeftYOffset,this.Scale,this.ScaleIncrementFactor,this.Tag)}};function createImageMapControl(l,b,f,e,j,i,p,k,a,o,n,m,c,q,g,r){var d=createWindow(l,f,e,j,i,p,null,"ImageMap",b);var h=new Image();h.src=k;h.onload=function(){invalidateRect(l,null,f,e,j,i)};imageMapPropsArray.push({CanvasID:l,WindowID:d,X:f,Y:e,Width:j,Height:i,ImgUrl:k,PinXYs:a,PinClickFunction:o,HasZoom:n,ImageTopLeftXOffset:m,ImageTopLeftYOffset:c,MovingMap:0,LastMovingX:0,LastMovingY:0,Scale:q,ScaleIncrementFactor:g,Tag:r});setImageMapImage(getImageMapProps(l,d),h);registerWindowDrawFunction(d,function(A,s){var t=getImageMapProps(A,s);var u=getImageMapImage(t);var B=getCtx(A);B.save();B.drawImage(u,t.ImageTopLeftXOffset,t.ImageTopLeftYOffset,t.Width/t.Scale,t.Height/t.Scale,t.X,t.Y,t.Width,t.Height);for(var v=0;v<t.PinXYs.length;v++){if(t.PinXYs[v][0]*t.Scale>t.ImageTopLeftXOffset*t.Scale&&t.PinXYs[v][0]*t.Scale<(t.ImageTopLeftXOffset*t.Scale)+(t.Width*t.Scale)&&t.PinXYs[v][1]*t.Scale>t.ImageTopLeftYOffset*t.Scale&&t.PinXYs[v][1]*t.Scale<(t.ImageTopLeftYOffset*t.Scale)+(t.Height*t.Scale)){var w=B.createRadialGradient(t.X+(t.PinXYs[v][0]*t.Scale)-(t.ImageTopLeftXOffset*t.Scale),t.Y+(t.PinXYs[v][1]*t.Scale)-(t.ImageTopLeftYOffset*t.Scale),0,t.X+(t.PinXYs[v][0]*t.Scale)-(t.ImageTopLeftXOffset*t.Scale),t.Y+(t.PinXYs[v][1]*t.Scale)-(t.ImageTopLeftYOffset*t.Scale),t.PinXYs[v][2]);var y=parseInt(t.PinXYs[v][3].substr(1,2),16);var z=parseInt(t.PinXYs[v][3].substr(3,2),16);var x=parseInt(t.PinXYs[v][3].substr(5,2),16);w.addColorStop(0,"#"+getlowcomp(y)+getlowcomp(z)+getlowcomp(x));w.addColorStop(0.5,t.PinXYs[v][3]);w.addColorStop(1,"#"+gethighcomp(y)+gethighcomp(z)+gethighcomp(x));B.fillStyle=w;B.beginPath();B.arc(t.X+(t.PinXYs[v][0]*t.Scale)-(t.ImageTopLeftXOffset*t.Scale),t.Y+(t.PinXYs[v][1]*t.Scale)-(t.ImageTopLeftYOffset*t.Scale),t.PinXYs[v][2],0,Math.PI*2,false);B.fill()}}B.restore()},l);registerMouseDownFunction(d,function(t,u){var s=getImageMapProps(t,u);s.MovingMap=1},l);registerLostFocusFunction(l,d,function(t,u){var s=getImageMapProps(t,u);s.MovingMap=0});registerMouseUpFunction(d,function(t,u){var s=getImageMapProps(t,u);s.MovingMap=0},l);registerClickFunction(d,function(y,u,v){var s=getImageMapProps(y,u);var x=v.calcX;var w=v.calcY;for(var t=0;t<s.PinXYs.length;t++){if(x>s.X+(s.PinXYs[t][0]*s.Scale)-(s.ImageTopLeftXOffset*s.Scale)-s.PinXYs[t][2]&&x<s.X+(s.PinXYs[t][0]*s.Scale)-(s.ImageTopLeftXOffset*s.Scale)+s.PinXYs[t][2]&&w>s.Y+(s.PinXYs[t][1]*s.Scale)-(s.ImageTopLeftYOffset*s.Scale)-s.PinXYs[t][2]&&w<s.Y+(s.PinXYs[t][1]*s.Scale)-(s.ImageTopLeftYOffset*s.Scale)+s.PinXYs[t][2]){if(s.PinClickFunction!=null){s.PinClickFunction(y,u,t)}}}},l);registerMouseMoveFunction(d,function(u,A,v){var s=getImageMapProps(u,A);var z=v.calcX;var w=v.calcY;var t=getImageMapImage(s);if(s.MovingMap==0){s.LastMovingX=z;s.LastMovingY=w}else{if(s.MovingMap==1){var C=z-s.LastMovingX;var B=w-s.LastMovingY;if(C!=0&&s.ImageTopLeftXOffset+C>0&&s.ImageTopLeftXOffset+C+(s.Width/s.Scale)<t.width&&B!=0&&s.ImageTopLeftYOffset+B>0&&s.ImageTopLeftYOffset+B+(s.Height/s.Scale)<t.height){s.ImageTopLeftXOffset+=C;s.ImageTopLeftYOffset+=B}}}},l);if(n==1){registerMouseWheelFunction(d,function(v,t,u){var s=getImageMapProps(v,t);var w=s.Scale;s.Scale+=(u.wheelDelta/120)*s.ScaleIncrementFactor;if(s.ImageTopLeftXOffset+(s.Width/s.Scale)>=h.width||s.ImageTopLeftYOffset+(s.Height/s.Scale)>=h.height){s.Scale=w}},l)}return d}var menuBarPropsArray=new Array();var subMenuBarPropsArray=new Array();function getMenuBarProps(c,a){for(var b=0;b<menuBarPropsArray.length;b++){if(menuBarPropsArray[b].CanvasID==c&&menuBarPropsArray[b].WindowID==a){return menuBarPropsArray[b]}}}function getSubMenuBarProps(c,a){for(var b=0;b<subMenuBarPropsArray.length;b++){if(subMenuBarPropsArray[b].CanvasID==c&&subMenuBarPropsArray[b].WindowID==a){return subMenuBarPropsArray[b]}}}function CCLSubMenu(){}CCLSubMenu.prototype={CanvasID:null,XOffset:null,YOffset:null,Width:null,Height:null,Data:null,ParentMenuWindowID:null,ParentIndexInParentMenu:null,DropDownColorStart:null,DropDownColorEnd:null,Tag:null,ControlNameID:null,Depth:null,Initialize:function(){return createSubMenu(this.CanvasID,this.ControlNameID,this.ParentMenuWindowID,this.Depth,this.Data,this.XOffset,this.YOffset,this.ParentIndexInParentMenu,this.DropDownColorStart,this.DropDownColorEnd,this.Tag)}};function createSubMenu(o,a,e,t,s,k,h,n,r,l,u){var p=getCtx(o);var c=0;var m=5;var d=new Array();for(var q=0;q<s.length;q++){p.font=s[q][3];var b=p.measureText(s[q][0]).width+10;if(b>c){c=b}m+=s[q][2]+5;d.push([s[q][0],s[q][1],s[q][2],s[q][3],s[q][4],s[q][5]])}var g=createWindow(o,k,h,c,m,t,null,"SubMenu",a);registerModalWindow(o,g);registerHiddenWindow(o,g,1);var j=5;var f=new Array();for(var q=0;q<s.length;q++){if(s[q][6]!=null){f.push(createSubMenu(o,a+"SubMenuLevel1_"+q.toString(),g,t,s[q][6],k+c,h+j+5,q,r,l))}j+=s[q][2]+5}subMenuBarPropsArray.push({CanvasID:o,WindowID:g,X:k,Y:h,Width:c,Height:m,Data:d,ParentMenuWindowID:e,ParentIndexInParentMenu:n,ChildMenuWindowIDs:f,DropDownColorStart:r,DropDownColorEnd:l,Tag:u});registerWindowDrawFunction(g,function(y,C){var w=getSubMenuBarProps(y,C);var x=getMenuBarProps(y,w.ParentMenuWindowID);if(x==undefined||x==null){x=getSubMenuBarProps(y,w.ParentMenuWindowID)}if(x.Data[w.ParentIndexInParentMenu][4]==1){var v=getCtx(y);var A=v.createLinearGradient(w.X,w.Y,w.X,w.Y+w.Height);A.addColorStop(0,w.DropDownColorStart);A.addColorStop(1,w.DropDownColorEnd);v.fillStyle=A;v.beginPath();v.rect(w.X,w.Y,w.Width,w.Height);v.fill();var B=0;for(var z=0;z<w.Data.length;z++){v.fillStyle=w.Data[z][1];v.font=w.Data[z][3];v.fillText(w.Data[z][0],w.X+5,w.Y+B+5+w.Data[z][2]);B+=w.Data[z][2]+5}}},o);registerClickFunction(g,function(E,v,C){var B=getSubMenuBarProps(E,v);var F=C.calcX;var D=C.calcY;var w=0;for(var A=0;A<B.Data.length;A++){if(F>B.X&&F<B.X+B.Width&&D>B.Y+w+5&&D<B.Y+w+5+B.Data[A][2]){if(typeof B.Data[A][5]=="function"){B.Data[A][5](E,v,1,A)}else{var G=0;for(var z=0;z<B.Data.length;z++){if(z==A){if(B.Data[A][4]==0){B.Data[A][4]=1;setStatusForAllChildWindowsFromMenuBar(E,B.ChildMenuWindowIDs,0,G,B.ParentMenuWindowID)}else{B.Data[A][4]=0;setStatusForAllChildWindowsFromMenuBar(E,B.ChildMenuWindowIDs,1,G,B.ParentMenuWindowID)}}if(B.Data[z][5]==null){G++}}}}w+=B.Data[A][2]+5}},o);registerLostFocusFunction(o,g,function(v,x){if(checkIfAnyMenuHasFocusFromSubMenu(v,x)==0){var i=getSubMenuBarProps(v,x);var w=getMenuBarProps(v,i.ParentMenuWindowID);if(w==undefined||w==null){w=getSubMenuBarProps(v,i.ParentMenuWindowID)}w.Data[i.ParentIndexInParentMenu][4]=0;setStatusForAllChildWindowsFromMenuBar(v,i.ChildMenuWindowIDs,1,-1,i.ParentMenuWindowID)}});return g}function checkIfAnyMenuHasFocusFromSubMenu(e,a){var b=getSubMenuBarProps(e,a);if(doingEventForWindowID==a){return 1}for(var d=0;d<b.ChildMenuWindowIDs.length;d++){if(doingEventForWindowID==b.ChildMenuWindowIDs[d]){return 1}}var f=1;var c=getMenuBarProps(e,b.ParentMenuWindowID);if(c==undefined||c==null){f=0;c=getSubMenuBarProps(e,b.ParentMenuWindowID)}if(doingEventForWindowID==c.WindowID){return 1}while(f==0){f=1;c=getMenuBarProps(e,c.ParentMenuWindowID);if(c==undefined||c==null){f=0;c=getSubMenuBarProps(e,b.ParentMenuWindowID)}if(doingEventForWindowID==c.WindowID){return 1}}return 0}function checkIfAnyMenuHasFocusFromParentMenu(c,a){var d=getMenuBarProps(c,a);if(doingEventForWindowID==a){return 1}for(var b=0;b<d.ChildMenuWindowIDs.length;b++){if(doingEventForWindowID==d.ChildMenuWindowIDs[b]){return 1}}return 0}function CCLMenuBar(){}CCLMenuBar.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Data:null,BarColorStart:null,BarColorMiddle:null,BarColorEnd:null,DropDownColorStart:null,DropDownColorEnd:null,Tag:null,Orientation:null,ControlNameID:null,Depth:null,Initialize:function(){return createMenuBarControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Data,this.BarColorStart,this.BarColorMiddle,this.BarColorEnd,this.DropDownColorStart,this.DropDownColorEnd,this.Orientation,this.Tag)}};function createMenuBarControl(m,a,g,f,l,j,t,s,p,r,k,q,h,c,u){var e=createWindow(m,g,f,l,j,t,null,"MenuBar",a);var n=getCtx(m);var d=0;var b=new Array();for(var o=0;o<s.length;o++){n.font=s[o][3];if(s[o][6]!=null){b.push(createSubMenu(m,a+o.toString(),e,t,s[o][6],g+d+5,f+j,o,q,h))}d+=n.measureText(s[o][0]).width+5}menuBarPropsArray.push({CanvasID:m,WindowID:e,X:g,Y:f,Width:l,Height:j,Data:s,BarColorStart:p,BarColorMiddle:r,BarColorEnd:k,DropDownColorStart:q,DropDownColorEnd:h,ChildMenuWindowIDs:b,Tag:u});registerWindowDrawFunction(e,function(w,A){var z=getMenuBarProps(w,A);var v=getCtx(w);var y=v.createLinearGradient(z.X,z.Y,z.X,z.Y+z.Height);y.addColorStop(0,z.BarColorStart);y.addColorStop(0.5,z.BarColorMiddle);y.addColorStop(1,z.BarColorEnd);v.fillStyle=y;v.beginPath();v.rect(z.X,z.Y,z.Width,z.Height);v.fill();var B=0;for(var x=0;x<z.Data.length;x++){v.fillStyle=z.Data[x][1];v.font=z.Data[x][3];v.fillText(z.Data[x][0],z.X+B+5,z.Y+z.Height-((z.Height-z.Data[x][2])/2));B+=v.measureText(z.Data[x][0]).width+5}},m);registerClickFunction(e,function(E,v,C){var w=getMenuBarProps(E,v);var H=getCtx(E);var F=C.calcX;var D=C.calcY;var z=0;for(var B=0;B<w.Data.length;B++){H.font=w.Data[B][3];currWidth=H.measureText(w.Data[B][0]).width;if(F>w.X+z+5&&F<w.X+z+currWidth+5&&D>w.Y&&D<w.Y+w.Height){if(typeof w.Data[B][6]=="function"){w.Data[B][6](E,v,0,B)}else{if(w.Data[B][6]!=null){var G=0;for(var A=0;A<w.Data.length;A++){if(A==B){if(w.Data[B][4]==0){w.Data[B][4]=1;setStatusForAllChildWindowsFromMenuBar(E,w.ChildMenuWindowIDs,0,G,null)}else{w.Data[B][4]=0;setStatusForAllChildWindowsFromMenuBar(E,w.ChildMenuWindowIDs,1,G,null)}}if(w.Data[A][6]!=null){G++}}}else{if(w.Data[B][5]!=null){w.Data[B][5](E,v,0,B)}}}}z+=currWidth+5}},m);registerLostFocusFunction(m,e,function(v,x){if(checkIfAnyMenuHasFocusFromParentMenu(v,x)==0){var y=getMenuBarProps(v,x);for(var w=0;w<y.Data.length;w++){if(y.Data[w][4]==1){setStatusForAllChildWindowsFromMenuBar(v,y.ChildMenuWindowIDs,1,-1,null)}y.Data[w][4]=0}}});return e}function setStatusForAllChildWindowsFromMenuBar(a,m,c,l,g){if(c==0){for(var d=0;d<m.length;d++){setHiddenWindowStatus(a,m[d],(d==l?c:1));var f=getSubMenuBarProps(a,m[d]);for(var b=0;b<f.Data.length;b++){f.Data[b][4]=c}setStatusForAllChildWindowsFromMenuBar(a,f.ChildMenuWindowIDs,c,-1)}}else{var f=null;while(g){f=getSubMenuBarProps(a,g);if(!f){f=getMenuBarProps(a,g)}g=f.ParentMenuWindowID}if(!f){for(var d=0;d<menuBarPropsArray.length;d++){var k=0;for(var b=0;b<m.length;b++){var n=0;for(var h=0;h<menuBarPropsArray[d].ChildMenuWindowIDs.length;h++){if(m[b]==menuBarPropsArray[d].ChildMenuWindowIDs[h]){n=1;break}}if(n==0){k=1;break}}if(k==0){f=menuBarPropsArray[d];break}}}for(var d=0;d<f.ChildMenuWindowIDs.length;d++){setHiddenWindowStatus(a,f.ChildMenuWindowIDs[d],1);var e=getSubMenuBarProps(a,f.ChildMenuWindowIDs[d]);if(e.ChildMenuWindowIDs.length>0){recurseHideSubMenuBarWindows(a,e)}}}}function recurseHideSubMenuBarWindows(d,a){for(var b=0;b<a.ChildMenuWindowIDs.length;b++){setHiddenWindowStatus(d,a.ChildMenuWindowIDs[b],1);var c=getSubMenuBarProps(d,a.ChildMenuWindowIDs[b]);if(c.ChildMenuWindowIDs.length>0){recurseHideSubMenuBarWindows(c)}}}var textBoxPropsArray=new Array();function getTextBoxProps(c,a){for(var b=0;b<textBoxPropsArray.length;b++){if(textBoxPropsArray[b].CanvasID==c&&textBoxPropsArray[b].WindowID==a){return textBoxPropsArray[b]}}}function getTextBoxPropsByDropDownWindowID(c,a){for(var b=0;b<textBoxPropsArray.length;b++){if(textBoxPropsArray[b].CanvasID==c&&textBoxPropsArray[b].DropDownWindowID==a){return textBoxPropsArray[b]}}}function getTextBoxPropsByKeyboardID(c,a){for(var b=0;b<textBoxPropsArray.length;b++){if(textBoxPropsArray[b].CanvasID==c&&textBoxPropsArray[b].CustomKeyboardWindowID==a){return textBoxPropsArray[b]}}}function textBoxTouchKeyPress(e,a,d){var b=getTextBoxPropsByKeyboardID(e,a);switch(d.toLowerCase()){case"left":if(b.CaretPosIndex>-1){b.CaretPosIndex--;b.SelectedTextStartIndex=-1;b.SelectedTextEndIndex=-1;b.WasSelecting=0;b.MouseDown=0}invalidateRect(e,null,b.X,b.Y,b.Width,b.Height);return;case"right":if(b.CaretPosIndex>b.UserInputText.length-1){b.CaretPosIndex=b.UserInputText.length-1}else{b.CaretPosIndex++}b.SelectedTextStartIndex=-1;b.SelectedTextEndIndex=-1;b.MouseDown=0;b.WasSelecting=0;invalidateRect(e,null,b.X,b.Y,b.Width,b.Height);return;case"backspacekey":if(b.CaretPosIndex>-1){if(b.CaretPosIndex==0){if(b.UserInputText.length>1){b.UserInputText=b.UserInputText.substring(1,b.UserInputText.length-1)}else{b.UserInputText=""}b.CaretPosIndex=-1}else{if(b.CaretPosIndex==b.UserInputText.length-1){b.UserInputText=b.UserInputText.substring(0,b.UserInputText.length-1);b.CaretPosIndex--}else{if(b.CaretPosIndex>0){b.UserInputText=b.UserInputText.substring(0,b.CaretPosIndex)+b.UserInputText.substring(b.CaretPosIndex+1);b.CaretPosIndex--}}}b.SelectedTextStartIndex=-1;b.SelectedTextEndIndex=-1;b.MouseDown=0;b.WasSelecting=0}if(b.ListPossiblesAllChoices!=null){FindTextBoxPossible(b,g)}invalidateRect(e,null,b.X,b.Y,b.Width,b.Height);return;case"spacebarkey":d=" ";break;case"carriagereturnkey":return}if(!b.UserInputText||(b.UserInputText&&b.UserInputText.length<b.MaxChars)){var g=d;var f;if(b.ListPossiblesAllChoices!=null){f=FindTextBoxPossible(b,g)}if((!b.AllowedCharsRegEx||b.AllowedCharsRegEx==null||b.AllowedCharsRegEx.length==0||g.match(b.AllowedCharsRegEx)==g)&&(!b.LimitToListPossibles||(b.LimitToListPossibles==1&&f))){if(b.CaretPosIndex==-1){b.UserInputText=g+(b.UserInputText?b.UserInputText:"");b.CaretPosIndex++}else{if(b.UserInputText&&b.CaretPosIndex==b.UserInputText.length-1){b.UserInputText=b.UserInputText+g;b.CaretPosIndex++}else{if(b.UserInputText){b.UserInputText=b.UserInputText.substring(0,b.CaretPosIndex+1)+g+b.UserInputText.substring(b.CaretPosIndex+1);b.CaretPosIndex++}}}b.SelectedTextStartIndex=-1;b.SelectedTextEndIndex=-1;b.MouseDown=0;b.WasSelecting=0}}invalidateRect(e,null,b.X,b.Y,b.Width,b.Height)}var textBoxImages=new Array();function setTextBoxImage(a,d){var c=0;for(var b=0;b<textBoxImages.length;b++){if(textBoxImages[b].CanvasID==a.CanvasID&&textBoxImages[b].WindowID==a.WindowID){c=1;textBoxImages[b].Image=d}}if(c==0){textBoxImages.push({CanvasID:a.CanvasID,WindowID:a.WindowID,Image:d})}}function getTextBoxImage(a){for(var b=0;b<textBoxImages.length;b++){if(textBoxImages[b].CanvasID==a.CanvasID&&textBoxImages[b].WindowID==a.WindowID){return textBoxImages[b].Image}}}function CCLTextbox(){}CCLTextbox.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,WaterMarkText:null,WaterMarkTextColor:null,WaterMarkTextFontString:null,TextColor:null,TextHeight:null,TextFontString:null,MaxChars:null,AllowedCharsRegEx:null,IsPassword:null,PasswordChar:null,HasBorder:null,BorderColor:null,BorderLineWidth:null,HasShadow:null,ShadowOffsetX:null,ShadowOffsetY:null,ShadowBlurValue:null,HasRoundedEdges:null,EdgeRadius:null,HasBgGradient:null,BgGradientStartColor:null,BgGradientEndColor:null,HasBgImage:null,BgImageUrl:null,HasAutoComplete:null,ListPossibles:null,DropDownPossiblesListIfThereIsInputText:null,LimitToListPossibles:null,ListPossiblesTextHeight:null,ListPossiblesTextFontString:null,UserInputText:null,ShadowColor:null,ShowCaret:null,CaretColor:null,TextSelectionBgColor:null,Tag:null,DropDownWindowID:null,ListPossiblesTextColor:null,VScrollBarWindowID:null,ListPossiblesAllChoices:null,CustomKeyboardWindowID:null,ControlNameID:null,Depth:null,HasFocusInitially:null,WaterMarkTextHeight:null,Initialize:function(){return createTextBox(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.WaterMarkText,this.WaterMarkTextColor,this.WaterMarkTextHeight,this.WaterMarkTextFontString,this.TextColor,this.TextHeight,this.TextFontString,this.MaxChars,this.AllowedCharsRegEx,this.IsPassword,this.PasswordChar,this.HasBorder,this.BorderColor,this.BorderLineWidth,this.HasShadow,this.ShadowColor,this.ShadowOffsetX,this.ShadowOffsetY,this.ShadowBlurValue,this.HasRoundedEdges,this.EdgeRadius,this.HasBgGradient,this.BgGradientStartColor,this.BgGradientEndColor,this.HasBgImage,this.BgImageUrl,this.HasAutoComplete,this.ListPossibles,this.DropDownPossiblesListIfThereIsInputText,this.LimitToListPossibles,this.ListPossiblesTextColor,this.ListPossiblesTextHeight,this.ListPossiblesTextFontString,this.UserInputText,this.CaretColor,this.TextSelectionBgColor,this.HasFocusInitially,this.Tag,this.CustomKeyboardWindowID)}};function createTextBox(H,O,N,M,b,e,i,h,u,s,G,Q,r,k,v,E,W,n,V,I,m,p,Z,d,c,C,D,j,P,U,w,f,t,q,S,B,o,X,L,Y,K,l,R,F,T,A){var z=createWindow(H,N,M,b,e,i,null,"TextBox",O);var J,a;if(q==1){J=createWindow(H,N,M+e,b,100,i,null,"TextBoxDropDown",O+"TextBoxDropDown");a=createScrollBar(H,O+"VS",N+b-15,M+e,100,i,S.length,1,z);registerHiddenWindow(H,J,1);registerModalWindow(H,J);registerHiddenWindow(H,a,1);registerModalWindow(H,a);registerWindowDrawFunction(J,function(ad,aa){var ab=getTextBoxPropsByDropDownWindowID(ad,aa);var y=getScrollBarProps(ad,ab.VScrollBarWindowID);var x=getCtx(ad);x.fillStyle="#FFFFFF";x.beginPath();x.rect(ab.X,ab.Y+ab.Height,ab.Width-15,100);x.fill();x.fillStyle=ab.ListPossiblesTextColor;x.font=ab.ListPossiblesTextFontString;for(var ac=y.SelectedID;ac<ab.ListPossibles.length&&((ab.ListPossiblesTextHeight+6)*(ac-y.SelectedID+1))<100;ac++){x.fillText(ab.ListPossibles[ac],ab.X+5,ab.Y+ab.Height+((ab.ListPossiblesTextHeight+6)*(ac-y.SelectedID+1)))}x.strokeStyle="#b7bfc8";x.beginPath();x.rect(ab.X,ab.Y+ab.Height,ab.Width-15,100);x.stroke()},H);registerClickFunction(J,function(ae,af,ag){var ac=getTextBoxPropsByDropDownWindowID(ae,af);var ab=getScrollBarProps(ae,ac.VScrollBarWindowID);var aa=ag.calcX;var ah=ag.calcY;for(var ad=ab.SelectedID;ad<ac.ListPossibles.length&&((ac.ListPossiblesTextHeight+6)*(ad-ab.SelectedID+1))<100;ad++){if(aa>ac.X&&ah>ac.Y+ac.Height+((ac.ListPossiblesTextHeight+6)*(ad-ab.SelectedID))&&aa<ac.X+ac.Width-15&&ah<ac.Y+ac.Height+((ac.ListPossiblesTextHeight+6)*(ad-ab.SelectedID+1))){if(ac.ListPossiblesSelectedID!=ad){ac.ListPossiblesSelectedID=ad;ac.UserInputText=ac.ListPossibles[ad];setHiddenWindowStatus(H,ac.VScrollBarWindowID,1);setHiddenWindowStatus(H,ac.DropDownWindowID,1)}return}}},H)}if(F==1){setFocusToWindowID(H,z)}if(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1){if(!A){A=createVirtualKeyboard(H,O+"VKB",N,M+e,360,180,i,null,textBoxTouchKeyPress,5,5,1,12,"12pt Ariel",null);registerModalWindow(H,A);registerHiddenWindow(H,A,0)}}textBoxPropsArray.push({CanvasID:H,WindowID:z,X:N,Y:M,Width:b,Height:e,WaterMarkText:h,WaterMarkTextColor:u,WaterMarkTextFontString:G,TextColor:Q,TextHeight:r,TextFontString:k,MaxChars:v,AllowedCharsRegEx:E,IsPassword:W,PasswordChar:n,HasBorder:V,BorderColor:I,BorderLineWidth:m,HasShadow:p,ShadowOffsetX:d,ShadowOffsetY:c,ShadowBlurValue:C,HasRoundedEdges:D,EdgeRadius:j,HasBgGradient:P,BgGradientStartColor:U,BgGradientEndColor:w,HasBgImage:f,BgImageUrl:t,HasAutoComplete:q,ListPossibles:new Array(),DropDownPossiblesListIfThereIsInputText:B,LimitToListPossibles:o,ListPossiblesTextHeight:L,ListPossiblesTextFontString:Y,CaretPosIndex:-1,UserInputText:K,ShadowColor:Z,ShowCaret:0,CaretColor:l,SelectedTextStartIndex:-1,SelectedTextEndIndex:-1,TextSelectionBgColor:R,MouseDown:0,WasSelecting:0,MouseDownTime:0,Tag:T,DropDownWindowID:J,ListPossiblesTextColor:X,VScrollBarWindowID:a,ListPossiblesSelectedID:-1,ListPossiblesAllChoices:S,CaretTime:Date.now(),CustomKeyboardWindowID:A});if(f==1){var g=new Image(b,e);g.src=t;g.onload=function(){invalidateRect(H,null,N,M,b,e)};setTextBoxImage(getTextBoxProps(H,z),g)}registerWindowDrawFunction(z,function(ah,y){var ac=getTextBoxProps(ah,y);var ak=getCtx(ah);ak.save();if(ac.HasBgGradient){var ae=ak.createLinearGradient(ac.X,ac.Y,ac.X,ac.Y+ac.Height);ae.addColorStop(0,ac.BgGradientStartColor);ae.addColorStop(1,ac.BgGradientEndColor);ak.fillStyle=ae}else{ak.fillStyle="#FFFFFF"}if(ac.HasShadow){ak.shadowBlur=ac.ShadowBlurValue;ak.shadowColor=ac.ShadowColor;ak.shadowOffsetX=ac.ShadowOffsetX;ak.shadowOffsetY=ac.ShadowOffsetY}if(ac.HasBgImage==1){var ab=getTextBoxImage(ac);ak.drawImage(ab,0,0,ab.width,ab.height,ac.X,ac.Y,ac.Width,ac.Height)}else{ak.beginPath();if(ac.HasRoundedEdges==1){ak.moveTo(ac.X,ac.Y+ac.EdgeRadius);ak.arc(ac.X+ac.EdgeRadius,ac.Y+ac.EdgeRadius,ac.EdgeRadius,Math.PI,(Math.PI/180)*270,false);ak.lineTo(ac.X+ac.Width-ac.EdgeRadius,ac.Y);ak.arc(ac.X+ac.Width-ac.EdgeRadius,ac.Y+ac.EdgeRadius,ac.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);ak.lineTo(ac.X+ac.Width,ac.Y+ac.Height-ac.EdgeRadius);ak.arc(ac.X+ac.Width-ac.EdgeRadius,ac.Y+ac.Height-ac.EdgeRadius,ac.EdgeRadius,0,Math.PI/2,false);ak.lineTo(ac.X+ac.EdgeRadius,ac.Y+ac.Height);ak.arc(ac.X+ac.EdgeRadius,ac.Y+ac.Height-ac.EdgeRadius,ac.EdgeRadius,Math.PI/2,Math.PI,false);ak.closePath()}else{ak.rect(ac.X,ac.Y,ac.Width,ac.Height)}ak.fill()}ak.restore();if(ac.HasBorder==1){ak.strokeStyle=ac.BorderColor;ak.lineWidth=ac.BorderLineWidth;ak.beginPath();if(ac.HasRoundedEdges==1){ak.moveTo(ac.X,ac.Y+ac.EdgeRadius);ak.arc(ac.X+ac.EdgeRadius,ac.Y+ac.EdgeRadius,ac.EdgeRadius,Math.PI,(Math.PI/180)*270,false);ak.lineTo(ac.X+ac.Width-ac.EdgeRadius,ac.Y);ak.arc(ac.X+ac.Width-ac.EdgeRadius,ac.Y+ac.EdgeRadius,ac.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);ak.lineTo(ac.X+ac.Width,ac.Y+ac.Height-ac.EdgeRadius);ak.arc(ac.X+ac.Width-ac.EdgeRadius,ac.Y+ac.Height-ac.EdgeRadius,ac.EdgeRadius,0,Math.PI/2,false);ak.lineTo(ac.X+ac.EdgeRadius,ac.Y+ac.Height);ak.arc(ac.X+ac.EdgeRadius,ac.Y+ac.Height-ac.EdgeRadius,ac.EdgeRadius,Math.PI/2,Math.PI,false);ak.closePath()}else{ak.rect(ac.X,ac.Y,ac.Width,ac.Height)}ak.stroke()}if(ac.UserInputText&&ac.UserInputText.length>0){ak.fillStyle=ac.TextColor;ak.font=ac.TextFontString;if(ac.IsPassword==1){var af="";for(var ad=0;ad<ac.UserInputText.length;ad++){af+=ac.PasswordChar}ak.fillText(af,ac.X+4,ac.Y+ac.Height-((ac.Height-ac.TextHeight)/2))}else{if(ac.SelectedTextStartIndex>-1&&ac.SelectedTextEndIndex>-1){ak.fillStyle=ac.TextSelectionBgColor;var aa=(ac.SelectedTextEndIndex==ac.UserInputText.length-1?ac.UserInputText.substring(ac.SelectedTextStartIndex):ac.UserInputText.substring(ac.SelectedTextStartIndex,ac.SelectedTextEndIndex-ac.SelectedTextStartIndex+1));var x=ak.measureText(aa).width;var ag=(ac.SelectedTextStartIndex==0?0:ak.measureText(ac.UserInputText.substring(0,ac.SelectedTextStartIndex+1)).width);ak.beginPath();if(ag+x+8>ac.Width){ak.rect(ac.X+ag+4,ac.Y+((ac.Height-ac.TextHeight)/2),ac.Width-ag,ac.TextHeight)}else{ak.rect(ac.X+ag+4,ac.Y+((ac.Height-ac.TextHeight)/2),x,ac.TextHeight)}ak.fill()}ak.fillStyle=ac.TextColor;ak.fillText(ac.UserInputText,ac.X+4,ac.Y+ac.Height-((ac.Height-ac.TextHeight)/2))}}else{if(ac.WaterMarkText&&ac.WaterMarkText.length>0){ak.fillStyle=ac.WaterMarkTextColor;ak.font=ac.WaterMarkTextFontString;ak.fillText(ac.WaterMarkText,ac.X+4,ac.Y+ac.Height-((ac.Height-ac.TextHeight)/2))}}if(doesWindowHaveFocus(ah,y)==1){if(ac.ShowCaret==1){if(Date.now()-ac.CaretTime>250){ac.ShowCaret=0;ac.CaretTime=Date.now()}ak.strokeStyle=ac.CaretColor;ak.beginPath();if(ac.CaretPosIndex==-1){ak.moveTo(ac.X,ac.Y+4);ak.lineTo(ac.X+3,ac.Y+4);ak.moveTo(ac.X,ac.Y+ac.Height-4);ak.moveTo(ac.X+3,ac.Y+ac.Height-4);ak.moveTo(ac.X+2,ac.Y+4);ak.lineTo(ac.X+2,ac.Y+ac.Height-4)}else{if(ac.CaretPosIndex>-1){var aj=(ac.UserInputText&&ac.UserInputText.length-1>=ac.CaretPosIndex?(ac.IsPassword==1?repeatPasswordChar(ac.PasswordChar,ac.UserInputText.length):ac.UserInputText.substring(0,ac.CaretPosIndex+1)):"");ak.font=ac.TextFontString;var ai=ak.measureText(aj).width;ak.moveTo(ac.X+ai,ac.Y+4);ak.lineTo(ac.X+3+ai,ac.Y+4);ak.moveTo(ac.X+ai,ac.Y+ac.Height-4);ak.moveTo(ac.X+3+ai,ac.Y+ac.Height-4);ak.moveTo(ac.X+2+ai,ac.Y+4);ak.lineTo(ac.X+2+ai,ac.Y+ac.Height-4)}}ak.stroke()}else{if(Date.now()-ac.CaretTime>500){ac.ShowCaret=1;ac.CaretTime=Date.now()}}}},H);registerMouseDownFunction(z,function(ag,ai,af){var ab=getTextBoxProps(ag,ai);if(ab.UserInputText&&ab.UserInputText.length>0){ab.MouseDown=1;ab.MouseDownTime=(new Date()).getTime();var ah=af.calcX;var aj=getCtx(ag);aj.font=ab.TextFontString;if(ah>ab.X&&ah<ab.X+4){ab.SelectedTextStartIndex=-1}else{if(ah>ab.X+aj.measureText(ab.UserInputText).width+4){ab.SelectedTextStartIndex=ab.UserInputText.length-1}else{var aa=new Array();var y=0;for(var ad=0;ad<ab.UserInputText.length;ad++){var ae=aj.measureText(ab.UserInputText.substring(0,ad+1)).width;aa.push({Width:ae-y});y=ae}if(ah>ab.X+4&&ah<ab.X+aa[0].Width){ab.SelectedTextStartIndex=0}else{var y=aa[0].Width;for(var ad=1;ad<aa.length;ad++){if(ah>ab.X+y&&ah<ab.X+y+aa[ad].Width){ab.SelectedTextStartIndex=ad;break}y+=aa[ad].Width}}}}if(ab.SelectedTextStartIndex>ab.SelectedTextEndIndex){var ac=ab.SelectedTextStartIndex;ab.SelectedTextStartIndex=ab.SelectedTextEndIndex;ab.SelectedTextEndIndex=ac}}},H);registerMouseMoveFunction(z,function(af,ai,ag){var ab=getTextBoxProps(af,ai);if(ab.MouseDown==1&&(new Date()).getTime()-ab.MouseDownTime>500&&ab.UserInputText&&ab.UserInputText.length>0){var ah=ag.calcX;var aj=getCtx(af);aj.font=ab.TextFontString;if(ah>ab.X&&ah<ab.X+4){ab.SelectedTextEndIndex=-1}else{if(ah>ab.X+aj.measureText(ab.UserInputText).width+4){ab.SelectedTextEndIndex=ab.UserInputText.length-1}else{var aa=new Array();var y=0;for(var ad=0;ad<ab.UserInputText.length;ad++){var ae=aj.measureText(ab.UserInputText.substring(0,ad+1)).width;aa.push({Width:ae-y});y=ae}if(ah>ab.X+4&&ah<ab.X+aa[0].Width){ab.SelectedTextEndIndex=0}else{var y=aa[0].Width;for(var ad=1;ad<aa.length;ad++){if(ah>ab.X+y&&ah<ab.X+y+aa[ad].Width){ab.SelectedTextEndIndex=ad;break}y+=aa[ad].Width}}}}if(ab.SelectedTextStartIndex>ab.SelectedTextEndIndex){var ac=ab.SelectedTextStartIndex;ab.SelectedTextStartIndex=ab.SelectedTextEndIndex;ab.SelectedTextEndIndex=ac}}},H);registerMouseUpFunction(z,function(ae,ai,ag){var ab=getTextBoxProps(ae,ai);if(ab.MouseDown==1){ab.MouseDown=0;if((new Date()).getTime()-ab.MouseDownTime>500){if(ab.UserInputText&&ab.UserInputText.length>0){ab.WasSelecting=1;var ah=ag.calcX;var aj=getCtx(ae);aj.font=ab.TextFontString;if(ah>ab.X&&ah<ab.X+4){ab.SelectedTextEndIndex=-1}else{if(ah>ab.X+aj.measureText(ab.UserInputText).width+4){ab.SelectedTextEndIndex=ab.UserInputText.length-1}else{var aa=new Array();var y=0;for(var ad=0;ad<ab.UserInputText.length;ad++){var af=aj.measureText(ab.UserInputText.substring(0,ad+1)).width;aa.push({Width:af-y});y=af}if(ah>ab.X+4&&ah<ab.X+aa[0].Width){ab.SelectedTextEndIndex=0}else{var y=aa[0].Width;for(var ad=1;ad<aa.length;ad++){if(ah>ab.X+y&&ah<ab.X+y+aa[ad].Width){ab.SelectedTextEndIndex=ad;break}y+=aa[ad].Width}}}}if(ab.SelectedTextStartIndex>ab.SelectedTextEndIndex){var ac=ab.SelectedTextStartIndex;ab.SelectedTextStartIndex=ab.SelectedTextEndIndex;ab.SelectedTextEndIndex=ac}}}}},H);registerClickFunction(z,function(ag,y,af){var ac=getTextBoxProps(ag,y);var ah=af.calcX;var ai=getCtx(ag);ai.font=ac.TextFontString;if(ah>ac.X&&ah<ac.X+4){ac.CaretPosIndex=-1}else{if(ac.UserInputText&&ah>ac.X+ai.measureText(ac.UserInputText).width+4){ac.CaretPosIndex=ac.UserInputText.length-1}else{if(ac.UserInputText){var ab=new Array();var aa=0;for(var ad=0;ad<ac.UserInputText.length;ad++){var ae=ai.measureText(ac.UserInputText.substring(0,ad+1)).width;ab.push({Width:ae-aa});aa=ae}if(ah>ac.X+4&&ah<ac.X+ab[0].Width){ac.CaretPosIndex=0}else{var aa=ab[0].Width;for(var ad=1;ad<ab.length;ad++){if(ah>ac.X+aa&&ah<ac.X+aa+ab[ad].Width){ac.CaretPosIndex=ad;break}aa+=ab[ad].Width}}}}}if(ac.WasSelecting==1){ac.WasSelecting=0}else{ac.SelectedTextStartIndex=-1;ac.SelectedTextEndIndex=-1}},H);if(!(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)){registerKeyDownFunction(H,function(x,aa,ab){var y=getTextBoxProps(x,aa);switch(ab.keyCode){case 37:if(y.CaretPosIndex>-1){y.CaretPosIndex--;y.SelectedTextStartIndex=-1;y.SelectedTextEndIndex=-1;y.WasSelecting=0;y.MouseDown=0}return;case 39:if(y.CaretPosIndex>y.UserInputText.length-1){y.CaretPosIndex=y.UserInputText.length-1}else{y.CaretPosIndex++}y.SelectedTextStartIndex=-1;y.SelectedTextEndIndex=-1;y.MouseDown=0;y.WasSelecting=0;return;case 46:if(y.CaretPosIndex<y.UserInputText.length-1){if(y.CaretPosIndex==-1){y.UserInputText=y.UserInputText.substring(1)}else{if(y.CaretPosIndex==y.UserInputText.length-2){y.UserInputText=y.UserInputText.substring(0,y.UserInputText.length-1)}else{y.UserInputText=y.UserInputText.substring(0,y.CaretPosIndex+1)+y.UserInputText.substring(y.CaretPosIndex+2)}}y.SelectedTextStartIndex=-1;y.SelectedTextEndIndex=-1;y.MouseDown=0;y.WasSelecting=0}if(y.ListPossiblesAllChoices!=null){FindTextBoxPossible(y,ad)}return;case 8:if(y.CaretPosIndex>-1){if(y.CaretPosIndex==0){if(y.UserInputText.length>1){y.UserInputText=y.UserInputText.substring(1,y.UserInputText.length-1)}else{y.UserInputText=""}y.CaretPosIndex=-1}else{if(y.CaretPosIndex==y.UserInputText.length-1){y.UserInputText=y.UserInputText.substring(0,y.UserInputText.length-1);y.CaretPosIndex--}else{if(y.CaretPosIndex>0){y.UserInputText=y.UserInputText.substring(0,y.CaretPosIndex)+y.UserInputText.substring(y.CaretPosIndex+1);y.CaretPosIndex--}}}y.SelectedTextStartIndex=-1;y.SelectedTextEndIndex=-1;y.MouseDown=0;y.WasSelecting=0}if(y.ListPossiblesAllChoices!=null){FindTextBoxPossible(y,ad)}return}if(ab.ctrlKey&&String.fromCharCode(ab.keyCode).toLowerCase()=="a"){y.SelectedTextStartIndex=0;y.SelectedTextEndIndex=y.UserInputText.length-1}else{if(ab.ctrlKey&&String.fromCharCode(ab.keyCode).toLowerCase()=="c"&&window.clipboardData){if(y.SelectedTextStartIndex>-1&&y.SelectedTextEndIndex>-1&&y.UserInputText&&y.SelectedTextEndIndex<y.UserInputText.length){window.clipboardData.setData("Text",(y.UserInputText&&y.SelectedTextEndIndex==y.UserInputText.length-1?y.UserInputText.substring(y.SelectedTextStartIndex):y.UserInputText.substring(y.SelectedTextStartIndex,y.SelectedTextEndIndex-y.SelectedTextStartIndex+1)))}}else{if(!y.UserInputText||(y.UserInputText&&y.UserInputText.length<y.MaxChars)){var ad=getCharFromKeyCode(ab);var ac;if(y.ListPossiblesAllChoices!=null){ac=FindTextBoxPossible(y,ad)}if((!y.AllowedCharsRegEx||y.AllowedCharsRegEx==null||y.AllowedCharsRegEx.length==0||ad.match(y.AllowedCharsRegEx)==ad)&&(!y.LimitToListPossibles||(y.LimitToListPossibles==1&&ac))){if(y.CaretPosIndex==-1){y.UserInputText=ad+(y.UserInputText?y.UserInputText:"");y.CaretPosIndex++}else{if(y.UserInputText&&y.CaretPosIndex==y.UserInputText.length-1){y.UserInputText=y.UserInputText+ad;y.CaretPosIndex++}else{if(y.UserInputText){y.UserInputText=y.UserInputText.substring(0,y.CaretPosIndex+1)+ad+y.UserInputText.substring(y.CaretPosIndex+1);y.CaretPosIndex++}}}y.SelectedTextStartIndex=-1;y.SelectedTextEndIndex=-1;y.MouseDown=0;y.WasSelecting=0}}}}},z)}registerLostFocusFunction(H,z,function(aa,y){var x=getTextBoxProps(aa,y);if(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1){if(doesWindowHaveFocus(aa,x.CustomKeyboardWindowID)==0&&doingEventForWindowID!=x.CustomKeyboardWindowID){setHiddenWindowStatus(aa,x.CustomKeyboardWindowID,1)}else{setHiddenWindowStatus(aa,x.CustomKeyboardWindowID,0)}}if(doesWindowHaveFocus(aa,x.VScrollBarWindowID)==0&&doesWindowHaveFocus(aa,x.DropDownWindowID)==0&&doingEventForWindowID!=x.DropDownWindowID&&doingEventForWindowID!=x.VScrollBarWindowID){x.SelectedTextStartIndex=-1;x.SelectedTextEndIndex=-1;x.MouseDown=0;x.WasSelecting=0;setHiddenWindowStatus(aa,x.DropDownWindowID,1);setHiddenWindowStatus(aa,x.VScrollBarWindowID,1)}});registerGotFocusFunction(H,z,function(y,aa){var x=getTextBoxProps(y,aa);setHiddenWindowStatus(y,x.CustomKeyboardWindowID,0)});registerAnimatedWindow(H,z);return z}function repeatPasswordChar(e,a){var d="";for(var b=0;b<a;b++){d=d+e}return d}function FindTextBoxPossible(a,f){var e="";if(a.CaretPosIndex==-1){e=f+(a.UserInputText?a.UserInputText:"")}else{if(a.UserInputText&&a.CaretPosIndex==a.UserInputText.length-1){e=a.UserInputText+f}else{if(a.UserInputText){e=a.UserInputText.substring(0,a.CaretPosIndex+1)+f+a.UserInputText.substring(a.CaretPosIndex+1)}}}a.ListPossibles=new Array();var d=false;for(var b=0;a.ListPossiblesAllChoices&&b<a.ListPossiblesAllChoices.length;b++){if(a.ListPossiblesAllChoices[b].indexOf(e)==0){d=true;a.ListPossibles.push(a.ListPossiblesAllChoices[b])}}if(d){setHiddenWindowStatus(a.CanvasID,a.DropDownWindowID,0);setHiddenWindowStatus(a.CanvasID,a.VScrollBarWindowID,0)}else{setHiddenWindowStatus(a.CanvasID,a.DropDownWindowID,1);setHiddenWindowStatus(a.CanvasID,a.VScrollBarWindowID,1);a.ListPossiblesSelectedID=-1}return d}var imageFaderPropsArray=new Array();function getImageFaderProps(c,a){for(var b=0;b<imageFaderPropsArray.length;b++){if(imageFaderPropsArray[b].CanvasID==c&&imageFaderPropsArray[b].WindowID==a){return imageFaderPropsArray[b]}}}var imageFaderImages=new Array();function setImageFaderImage(g,b,f){var e=0;for(var d=0;d<imageFaderImages.length;d++){if(imageFaderImages[d].CanvasID==g.CanvasID&&imageFaderImages[d].WindowID==g.WindowID){e=1;var c=0;for(var a=0;a<imageFaderImages[d].Images.length;a++){if(imageFaderImages[d].Images[a].ImgURL==b){c=1;imageFaderImages[d].Images[a].Image=f}}if(c==0){imageFaderImages[d].Images.push({ImgURL:b,Image:f})}}}if(e==0){imageFaderImages.push({CanvasID:g.CanvasID,WindowID:g.WindowID,Images:[{ImgURL:b,Image:f}]})}}function getImageFaderImage(d,b){for(var c=0;c<imageFaderImages.length;c++){if(imageFaderImages[c].CanvasID==d.CanvasID&&imageFaderImages[c].WindowID==d.WindowID){for(var a=0;a<imageFaderImages[c].Images.length;a++){if(imageFaderImages[c].Images[a].ImgURL==b){return imageFaderImages[c].Images[a].Image}}}}}function getImageFaderImageByIndex(c,a){for(var b=0;b<imageFaderImages.length;b++){if(imageFaderImages[b].CanvasID==c.CanvasID&&imageFaderImages[b].WindowID==c.WindowID){if(b>=0&&b<imageFaderImages[b].Images.length){return imageFaderImages[b].Images[a].Image}}}}function getImageFaderImagesCount(b){for(var a=0;a<imageFaderImages.length;a++){if(imageFaderImages[a].CanvasID==b.CanvasID&&imageFaderImages[a].WindowID==b.WindowID){return imageFaderImages[a].Images.length}}}var imageFaderDrawingCanvasAndCtxs=new Array();function setImageFaderDrawingCanvasAndCtx(e,a,d){var c=0;for(var b=0;b<imageFaderDrawingCanvasAndCtxs.length;b++){if(imageFaderDrawingCanvasAndCtxs[b].CanvasID==e.CanvasID&&imageFaderDrawingCanvasAndCtxs[b].WindowID==e.WindowID){c=1;imageFaderDrawingCanvasAndCtxs[b].DrawingCanvas=a;imageFaderDrawingCanvasAndCtxs[b].DrawingCanvasCtx=d}}if(c==0){imageFaderDrawingCanvasAndCtxs.push({CanvasID:e.CanvasID,WindowID:e.WindowID,DrawingCanvas:a,DrawingCanvasCtx:d})}}function getImageFaderDrawingCanvas(b){for(var a=0;a<imageFaderDrawingCanvasAndCtxs.length;a++){if(imageFaderDrawingCanvasAndCtxs[a].CanvasID==b.CanvasID&&imageFaderDrawingCanvasAndCtxs[a].WindowID==b.WindowID){return imageFaderDrawingCanvasAndCtxs[a].DrawingCanvas}}}function getImageFaderDrawingCanvasCtx(b){for(var a=0;a<imageFaderDrawingCanvasAndCtxs.length;a++){if(imageFaderDrawingCanvasAndCtxs[a].CanvasID==b.CanvasID&&imageFaderDrawingCanvasAndCtxs[a].WindowID==b.WindowID){return imageFaderDrawingCanvasAndCtxs[a].DrawingCanvasCtx}}}function CCLImageFader(){}CCLImageFader.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImageURLs:null,FadeStartValue:null,FadeEndValue:null,FadeStepValue:null,HoldForTicks:null,ClickFunction:null,OverlayImages:null,ControlNameID:null,Depth:null,Initialize:function(){return createImageFader(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.ImageURLs,this.FadeStartValue,this.FadeEndValue,this.FadeStepValue,this.HoldForTicks,this.ClickFunction,this.OverlayImages)}};function createImageFader(q,c,m,k,p,o,t,b,e,g,s,l,d,a){var h=createWindow(q,m,k,p,o,t,null,"ImageFader");var f=document.createElement("canvas");f.width=p;f.height=o;var j=f.getContext("2d");imageFaderPropsArray.push({CanvasID:q,WindowID:h,X:m,Y:k,Width:p,Height:o,ImageURLs:b,FadeStartValue:e,FadeEndValue:g,FadeStepValue:s,HoldForTicks:l,ClickFunction:d,HoldCountDown:l,CurrentImageIndex:0,CurrentGlobalAlphaValue:e,OverlayImages:a});setImageFaderDrawingCanvasAndCtx(getImageFaderProps(q,h),f,j);for(var r=0;r<b.length;r++){var n=new Image();n.onload=function(){invalidateRect(q,null,m,k,p,o)};n.src=b[r];setImageFaderImage(getImageFaderProps(q,h),b[r],n)}registerWindowDrawFunction(h,function(w,y){var z=getImageFaderProps(w,y);var u=getImageFaderDrawingCanvasCtx(z);var x=getCtx(w);u.save();if(z.HoldCountDown==0){if(z.CurrentGlobalAlphaValue==z.FadeStartValue){if(z.CurrentImageIndex+1>=getImageFaderImagesCount(z)){z.CurrentImageIndex=0}else{z.CurrentImageIndex++}}if(z.CurrentGlobalAlphaValue<z.FadeEndValue){z.CurrentGlobalAlphaValue+=z.FadeStepValue;if(z.CurrentGlobalAlphaValue>1){z.CurrentGlobalAlphaValue=1}u.globalAlpha=z.CurrentGlobalAlphaValue}else{z.CurrentGlobalAlphaValue=z.FadeStartValue;u.globalAlpha=z.CurrentGlobalAlphaValue;z.HoldCountDown=z.HoldForTicks}if(z.OverlayImages==1&&z.CurrentGlobalAlphaValue!=z.FadeEndValue){var i=0;if(z.CurrentImageIndex-1<0){i=getImageFaderImagesCount(z)-1}else{i=z.CurrentImageIndex-1}if(z.FadeEndValue-u.globalAlpha>0&&z.FadeEndValue-u.globalAlpha<1){var v=u.globalAlpha;u.globalAlpha=z.FadeEndValue-v;u.drawImage(getImageFaderImageByIndex(z,i),0,0);u.globalAlpha=v}}u.drawImage(getImageFaderImageByIndex(z,z.CurrentImageIndex),0,0);x.drawImage(getImageFaderDrawingCanvas(z),z.X,z.Y)}else{z.HoldCountDown--;u.globalAlpha=z.FadeEndValue;x.drawImage(getImageFaderImageByIndex(z,z.CurrentImageIndex),z.X,z.Y)}u.restore()},q);if(d){registerClickFunction(h,function(i,v,u){var w=getImageFaderProps(i,v);w.ClickFunction(i,v,u,w.CurrentImageIndex)},q)}registerAnimatedWindow(q,h);return h}var imageSliderPropsArray=new Array();function getImageSliderProps(c,a){for(var b=0;b<imageSliderPropsArray.length;b++){if(imageSliderPropsArray[b].CanvasID==c&&imageSliderPropsArray[b].WindowID==a){return imageSliderPropsArray[b]}}}var imageSliderImages=new Array();function setImageSliderImage(g,b,f){var e=0;for(var d=0;d<imageSliderImages.length;d++){if(imageSliderImages[d].CanvasID==g.CanvasID&&imageSliderImages[d].WindowID==g.WindowID){e=1;var c=0;for(var a=0;a<imageSliderImages[d].Images.length;a++){if(imageSliderImages[d].Images[a].ImgURL==b){c=1;imageSliderImages[d].Images[a].Image=f}}if(c==0){imageSliderImages[d].Images.push({ImgURL:b,Image:f})}}}if(e==0){imageSliderImages.push({CanvasID:g.CanvasID,WindowID:g.WindowID,Images:[{ImgURL:b,Image:f}]})}}function getImageSliderImage(d,b){for(var c=0;c<imageSliderImages.length;c++){if(imageSliderImages[c].CanvasID==d.CanvasID&&imageSliderImages[c].WindowID==d.WindowID){for(var a=0;a<imageSliderImages[c].Images.length;a++){if(imageSliderImages[c].Images[a].ImgURL==b){return imageSliderImages[c].Images[a].Image}}}}}function getImageSliderImageByIndex(c,a){for(var b=0;b<imageSliderImages.length;b++){if(imageSliderImages[b].CanvasID==c.CanvasID&&imageSliderImages[b].WindowID==c.WindowID){if(a>=0&&a<imageSliderImages[b].Images.length){return imageSliderImages[b].Images[a].Image}}}}function CCLImageSlider(){}CCLImageSlider.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,ImageURLs:null,Direction:null,StepIncrement:null,ClickFunction:null,HoldForTicks:null,ControlNameID:null,Depth:null,Initialize:function(){return createImageSlider(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.ImageURLs,this.Direction,this.StepIncrement,this.HoldForTicks,this.ClickFunction)}};function createImageSlider(b,e,n,l,d,p,h,j,m,a,o,c){var k=createWindow(b,n,l,d,p,h,null,"ImageSlider");imageSliderPropsArray.push({CanvasID:b,WindowID:k,X:n,Y:l,Width:d,Height:p,ImageURLs:j,Direction:m,StepIncrement:a,ClickFunction:c,HoldForTicks:o,CurrentImageIndex:0,Slide:0,HoldCountDown:o});for(var g=0;g<j.length;g++){var f=new Image();f.onload=function(){invalidateRect(b,null,n,l,d,p)};f.src=j[g];setImageSliderImage(getImageSliderProps(b,k),j[g],f)}registerWindowDrawFunction(k,function(r,t){var u=getImageSliderProps(r,t);var q=getCtx(r);if(u.HoldCountDown==0){u.Slide+=u.StepIncrement;if(u.Direction==1){if(Math.abs(u.Slide)>=u.Width){u.HoldCountDown=u.HoldForTicks;if(u.Slide>0){if(u.CurrentImageIndex==0){u.CurrentImageIndex=u.ImageURLs.length-1}else{u.CurrentImageIndex--}}else{if(u.Slide<0){if(u.CurrentImageIndex+1<u.ImageURLs.length){u.CurrentImageIndex++}else{u.CurrentImageIndex=0}}}u.Slide=0;u.HoldCountDown=u.HoldForTicks;q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X,u.Y)}else{if(u.Slide>0){var i;if(u.CurrentImageIndex==0){i=u.ImageURLs.length-1}else{i=u.CurrentImageIndex-1}q.drawImage(getImageSliderImageByIndex(u,i),u.X-u.Width+u.Slide,u.Y);q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X+u.Slide,u.Y)}else{var s;if(u.CurrentImageIndex+1<u.ImageURLs.length){s=u.CurrentImageIndex+1}else{s=0}q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X+u.Slide,u.Y);q.drawImage(getImageSliderImageByIndex(u,s),u.X+u.Width+u.Slide,u.Y)}}}else{if(Math.abs(u.Slide)>=u.Height){u.HoldCountDown=u.HoldForTicks;if(u.Slide>0){if(u.CurrentImageIndex==0){u.CurrentImageIndex=u.ImageURLs.length-1}else{u.CurrentImageIndex--}}else{if(u.Slide<0){if(u.CurrentImageIndex+1<u.ImageURLs.length){u.CurrentImageIndex++}else{u.CurrentImageIndex=0}}}u.Slide=0;u.HoldCountDown=u.HoldForTicks;q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X,u.Y)}else{if(u.Slide>0){var i;if(u.CurrentImageIndex==0){i=u.ImageURLs.length-1}else{i=u.CurrentImageIndex-1}q.drawImage(getImageSliderImageByIndex(u,i),u.X,u.Y-u.Height+u.Slide);q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X,u.Y+u.Slide)}else{var s;if(u.CurrentImageIndex+1<u.ImageURLs.length){s=u.CurrentImageIndex+1}else{s=0}q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X,u.Y+u.Slide);q.drawImage(getImageSliderImageByIndex(u,s),u.X,u.Y+u.Height+u.Slide)}}}}else{u.HoldCountDown--;q.drawImage(getImageSliderImageByIndex(u,u.CurrentImageIndex),u.X,u.Y)}},b);if(c){registerClickFunction(k,function(i,r,q){var s=getImageSliderProps(i,r);s.ClickFunction(i,r,q,s.CurrentImageIndex)},b)}registerAnimatedWindow(b,k);return k}var multiLineLabelPropsArray=new Array();function getMultiLineLabelProps(c,a){for(var b=0;b<multiLineLabelPropsArray.length;b++){if(multiLineLabelPropsArray[b].CanvasID==c&&multiLineLabelPropsArray[b].WindowID==a){return multiLineLabelPropsArray[b]}}}function getMarkupFontString(a,c){for(var b=0;b<c.length;b++){if(a>=c[b][0]&&a<=c[b][1]){return c[b][3]}}}function getMarkupFontColor(a,c){for(var b=0;b<c.length;b++){if(a>=c[b][0]&&a<=c[b][1]){return c[b][2]}}}function getMarkupLineNumber(a,c){for(var b=0;b<c.length;b++){if(a<=c[b]){return b}}return c.length}function CCLMultiLineLabel(){}CCLMultiLineLabel.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,HasMarkup:null,Text:null,TextColor:null,TextHeight:null,TextFontString:null,LineSpacingInPixels:null,WordSensitive:null,ControlNameID:null,Depth:null,Initialize:function(){return createMultiLineLabel(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Depth,this.HasMarkup,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.LineSpacingInPixels,this.WordSensitive)}};function createMultiLineLabel(v,c,q,p,u,I,k,r,f,a,l,n,H){var t=a+n;var w=getCtx(v);w.font=l;var G=new Array();var s="";var D=new Array();if(k==0){if(H==0){var o=0;var b=0;while(o<r.length){if(r.substr(o,1)=="\n"){G.push(o);b=o;t+=a+n}else{if(w.measureText(r.substr(b,o-b+1)).width>u){G.push(o);b=o;t+=a+n}}o++}}else{var o=0;var b=0;var m=-1;while(o<r.length){if(r.substr(o,1)=="\n"){G.push(o);b=o}else{if(w.measureText(r.substr(b,o-b+1)).width>u){if(m>-1){G.push(m);b=m}else{G.push(o);b=o}}}t+=a+n;o++;if(r.substr(o,1)==" "){m=o}}}}else{if(window.DOMParser){var d=new DOMParser();xmlDoc=d.parseFromString("<root>"+r+"</root>","text/xml");for(var A=0;A<xmlDoc.firstChild.childNodes.length;A++){switch(xmlDoc.firstChild.childNodes[A].nodeName){case"NT":var F=s.length>0?s.length-1:0;s+=xmlDoc.firstChild.childNodes[A].childNodes.length>0?xmlDoc.firstChild.childNodes[A].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[A].nodeValue;D.push([F,s.length-1,f,l]);break;case"N":var e,E,C;for(var z=0;z<xmlDoc.firstChild.childNodes[A].childNodes.length;z++){switch(xmlDoc.firstChild.childNodes[A].childNodes[z].nodeName){case"C":e=xmlDoc.firstChild.childNodes[A].childNodes[z].childNodes.length>0?xmlDoc.firstChild.childNodes[A].childNodes[z].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[A].childNodes[z].nodeValue;break;case"F":E=xmlDoc.firstChild.childNodes[A].childNodes[z].childNodes.length>0?xmlDoc.firstChild.childNodes[A].childNodes[z].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[A].childNodes[z].nodeValue;break;case"T":C=xmlDoc.firstChild.childNodes[A].childNodes[z].childNodes.length>0?xmlDoc.firstChild.childNodes[A].childNodes[z].childNodes[0].nodeValue:xmlDoc.firstChild.childNodes[A].childNodes[z].nodeValue;break}}var F=s.length-1;s+=C;D.push([F,s.length-1,e,E]);break}}if(H==0){var o=0;var b=0;var g=0;while(o<s.length){w.font=getMarkupFontString(o,D);var B=w.measureText(s.substr(o,1)).width;if(s.substr(o,1)=="\n"){G.push(o);g=0;t+=a+n}else{if(g+B>u){G.push(o-1);g=0;t+=a+n}else{g+=B;o++}}}}else{var o=0;var b=0;var g=0;var m=-1;while(o<s.length){w.font=getMarkupFontString(o,D);var B=w.measureText(s.substr(o,1)).width;if(s.substr(o,1)=="\n"){G.push(o);g=0;t+=a+n}else{if(g+B>u){if(m>-1){G.push(m);o=m}else{G.push(o-1)}g=0;t+=a+n}else{g+=B;o++}}if(s.substr(o,1)==" "){m=o}}}}}var h=createWindow(v,q,p,u,t,I,null,"MultiLineLabel");multiLineLabelPropsArray.push({CanvasID:v,WindowID:h,X:q,Y:p,Width:u,Height:t,HasMarkup:k,Text:r,TextColor:f,TextHeight:a,TextFontString:l,LineSpacingInPixels:n,LineBreakIndexes:G,MarkupTextExtents:D,MarkupText:s});registerWindowDrawFunction(h,function(M,j){var J=getMultiLineLabelProps(M,j);var O=getCtx(M);if(J.HasMarkup==0){O.font=J.TextFontString;O.fillStyle=J.TextColor;var y=0;for(var K=0;K<J.LineBreakIndexes.length;K++){O.fillText(removeTrailingSpacesAndLineBreaks(J.Text.substr((K>0?J.LineBreakIndexes[K-1]:0),J.LineBreakIndexes[K]-(K>0?J.LineBreakIndexes[K-1]:0))),J.X,J.Y+J.TextHeight+((J.TextHeight+J.LineSpacingInPixels)*K))}if(J.LineBreakIndexes[J.LineBreakIndexes.length-1]+1<J.Text.length){O.fillText(removeTrailingSpacesAndLineBreaks(J.Text.substr(J.LineBreakIndexes[J.LineBreakIndexes.length-1])),J.X,J.Y+(J.TextHeight*(J.LineBreakIndexes.length+1))+(J.LineSpacingInPixels*J.LineBreakIndexes.length))}}else{var L=0;var N=0;var P=0;while(L<J.MarkupText.length){O.font=getMarkupFontString(L,J.MarkupTextExtents);O.fillStyle=getMarkupFontColor(L,J.MarkupTextExtents);var x=getMarkupLineNumber(L,J.LineBreakIndexes);if(x!=P){P=x;N=0}O.fillText(J.MarkupText.substr(L,1),J.X+N,J.Y+J.TextHeight+((J.TextHeight+J.LineSpacingInPixels)*x));N+=O.measureText(J.MarkupText.substr(L,1)).width;L++}}},v);return h}var wordProcessorPropsArray=new Array();function getWordProcessorProps(c,a){for(var b=0;b<wordProcessorPropsArray.length;b++){if(wordProcessorPropsArray[b].CanvasID==c&&wordProcessorPropsArray[b].WindowID==a){return wordProcessorPropsArray[b]}}}function getWordProcessorPropsByKeyboardID(c,a){for(var b=0;b<wordProcessorPropsArray.length;b++){if(wordProcessorPropsArray[b].CanvasID==c&&wordProcessorPropsArray[b].CustomKeyboardWindowID==a){return wordProcessorPropsArray[b]}}}function wordProcessorTouchKeyPress(a,k,m){var i=getWordProcessorPropsByKeyboardID(a,k);var l=false;switch(m.toLowerCase()){case"left":if(i.CaretPosIndex>-1){i.CaretPosIndex--;i.SelectedTextStartIndex=-1;i.SelectedTextEndIndex=-1;i.WasSelecting=0;i.MouseDown=0}l=true;break;case"up":var g=0;if(i.LineBreakIndexes.length>0){for(var b=0;b<i.LineBreakIndexes.length;b++){if((b==0?true:i.CaretPosIndex>i.LineBreakIndexes[b-1])&&i.CaretPosIndex<i.LineBreakIndexes[b]){g=b;break}else{if(i.CaretPosIndex>i.LineBreakIndexes[b]){g=b+1}}}if(g>0){i.CaretPosIndex=(g==1?0:i.LineBreakIndexes[g-2])+(i.CaretPosIndex-i.LineBreakIndexes[g-1])}}l=true;break;case"right":if(i.CaretPosIndex>=i.UserInputText.length-1){i.CaretPosIndex=i.UserInputText.length-1}else{i.CaretPosIndex++}i.SelectedTextStartIndex=-1;i.SelectedTextEndIndex=-1;i.MouseDown=0;i.WasSelecting=0;l=true;break;case"down":var g=0;if(i.LineBreakIndexes.length>0){for(var b=0;b<i.LineBreakIndexes.length;b++){if((b==0?true:i.CaretPosIndex>i.LineBreakIndexes[b-1])&&i.CaretPosIndex<i.LineBreakIndexes[b]){g=b;break}else{if(i.CaretPosIndex>i.LineBreakIndexes[b]){g=b+1}}}if(g<i.LineBreakIndexes.length){i.CaretPosIndex=i.LineBreakIndexes[g]+(i.CaretPosIndex-(g==0?0:i.LineBreakIndexes[g-1]))}}l=true;break;case"backspacekey":if(i.CaretPosIndex>-1){if(i.CaretPosIndex==0){if(i.UserInputText.length>1){i.UserInputText=i.UserInputText.substring(1,i.UserInputText.length-1)}else{i.UserInputText=""}i.CaretPosIndex=-1}else{if(i.CaretPosIndex==i.UserInputText.length-1){i.UserInputText=i.UserInputText.substring(0,i.UserInputText.length-1);i.CaretPosIndex--}else{if(i.CaretPosIndex>0){i.UserInputText=i.UserInputText.substring(0,i.CaretPosIndex)+i.UserInputText.substring(i.CaretPosIndex+1);i.CaretPosIndex--}}}i.SelectedTextStartIndex=-1;i.SelectedTextEndIndex=-1;i.MouseDown=0;i.WasSelecting=0}l=true;break;case"spacebarkey":m=" ";break;case"carriagereturnkey":m="\n";break}if(!l){if(!i.UserInputText||(i.UserInputText&&i.UserInputText.length<i.MaxChars)){var j=m;var h;if((!i.AllowedCharsRegEx||i.AllowedCharsRegEx==null||i.AllowedCharsRegEx.length==0||j.match(i.AllowedCharsRegEx)==j||j=="\n")){if(i.CaretPosIndex==-1){i.UserInputText=j+(i.UserInputText?i.UserInputText:"");i.CaretPosIndex++}else{if(i.UserInputText&&i.CaretPosIndex==i.UserInputText.length-1){i.UserInputText=i.UserInputText+j;i.CaretPosIndex++}else{if(i.UserInputText){i.UserInputText=i.UserInputText.substring(0,i.CaretPosIndex+1)+j+i.UserInputText.substring(i.CaretPosIndex+1);i.CaretPosIndex++}}}i.SelectedTextStartIndex=-1;i.SelectedTextEndIndex=-1;i.MouseDown=0;i.WasSelecting=0}}}i.LineBreakIndexes=new Array();if(i.UserInputText&&i.UserInputText.length>0){var n=getCtx(a);if(i.WordSensitive==0){var f=0;var d=0;while(f<i.UserInputText.length){if(i.UserInputText.substr(d,f-d+1)=="\n"){i.LineBreakIndexes.push(f);d=f}else{if(n.measureText(i.UserInputText.substr(d,f-d+1)).width+i.Margin>i.Width-15){i.LineBreakIndexes.push(f);d=f}}f++}}else{var f=0;var d=0;var o=-1;while(f<i.UserInputText.length){if(i.UserInputText.substr(f,1)=="\n"){i.LineBreakIndexes.push(f);d=f}else{if(n.measureText(i.UserInputText.substr(d,f-d+1)).width+i.Margin>i.Width-15){if(o>-1){i.LineBreakIndexes.push(o);d=o}else{i.LineBreakIndexes.push(f);d=f}}}f++;if(i.UserInputText.substr(f,1)==" "){o=f}}}var e=getScrollBarProps(a,i.VScrollBarWindowID);e.MaxItems=i.LineBreakIndexes.length;var g=0;if(i.LineBreakIndexes.length>0){for(var b=0;b<i.LineBreakIndexes.length;b++){if((b==0?true:i.CaretPosIndex>i.LineBreakIndexes[b-1])&&i.CaretPosIndex<i.LineBreakIndexes[b]){g=b;break}else{if(i.CaretPosIndex>i.LineBreakIndexes[b]){g=b+1}}}}if(g-e.SelectedID+1>(i.Height-(i.Margin*2))/(i.TextHeight+i.LineSpacingInPixels)){e.SelectedID=g-Math.floor((i.Height-(i.Margin*2))/(i.TextHeight+i.LineSpacingInPixels))+1}else{if(g<e.SelectedID){e.SelectedID=g}}}}var wordProcessorBgImages=new Array();function setWordProcessorBgImage(b,d){var c=0;for(var a=0;a<wordProcessorBgImages.length;a++){if(wordProcessorBgImages[a].CanvasID==b.CanvasID&&wordProcessorBgImages[a].WindowID==b.WindowID){c=1;wordProcessorBgImages[a].Image=d}}if(c==0){wordProcessorBgImages.push({CanvasID:b.CanvasID,WindowID:b.WindowID,Image:d})}}function getWordProcessorImage(b){for(var a=0;a<wordProcessorBgImages.length;a++){if(wordProcessorBgImages[a].CanvasID==b.CanvasID&&wordProcessorBgImages[a].WindowID==b.WindowID){return wordProcessorBgImages[a].Image}}}function CCLWordProcessor(){}CCLWordProcessor.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,HasMarkup:null,Text:null,TextColor:null,TextHeight:null,TextFontString:null,LineSpacingInPixels:null,WordSensitive:null,WaterMarkText:null,WaterMarkTextColor:null,WaterMarkTextHeight:null,WaterMarkTextFontString:null,MaxChars:null,HasShadow:null,ShadowColor:null,ShadowOffsetX:null,ShadowOffsetY:null,HasRoundedEdges:null,EdgeRadius:null,HasBgGradient:null,BgGradientStartColor:null,BgGradientEndColor:null,HasBgImage:null,BgImageUrl:null,Margin:null,HasBorder:null,BorderColor:null,BorderLineWidth:null,ShowCaret:null,CaretColor:null,AllowedCharsRegEx:null,CustomKeyboardWindowID:null,ControlNameID:null,Depth:null,Initialize:function(){return createWordProcessor(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.HasMarkup,this.Text,this.TextColor,this.TextHeight,this.TextFontString,this.LineSpacingInPixels,this.WordSensitive,this.WaterMarkText,this.WaterMarkTextColor,this.WaterMarkTextHeight,this.WaterMarkTextFontString,this.MaxChars,this.HasShadow,this.ShadowColor,this.ShadowOffsetX,this.ShadowOffsetY,this.HasRoundedEdges,this.EdgeRadius,this.HasBgGradient,this.BgGradientStartColor,this.BgGradientEndColor,this.HasBgImage,this.BgImageUrl,this.Margin,this.HasBorder,this.BorderColor,this.BorderLineWidth,this.AllowedCharsRegEx,this.CaretColor,this.CustomKeyboardWindowID)}};function createWordProcessor(E,I,H,G,a,d,j,t,A,K,p,l,e,L,h,s,q,D,u,o,O,c,b,B,k,J,M,v,f,r,i,N,F,n,C,m,z){var w;if(t==1){w=createWindow(E,H,G+20,a-15,d-20,j,null,"WordProcessor",I)}else{w=createWindow(E,H,G,a-15,d,j,null,"WordProcessor",I)}vscrollbarwindowid=createScrollBar(E,I+"VS",H+a-15,G,d,j,(p+e)*Math.floor(d/p),1,w);if(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1){if(!z){z=createVirtualKeyboard(E,I+"VKB",H,G+d,360,180,j,null,wordProcessorTouchKeyPress,5,5,1,12,"12pt Ariel",null)}}wordProcessorPropsArray.push({CanvasID:E,WindowID:w,X:H,Y:G,Width:a,Height:d,HasMarkup:t,Text:A,TextColor:K,TextHeight:p,TextFontString:l,LineSpacingInPixels:e,WordSensitive:L,WaterMarkText:h,WaterMarkTextColor:s,WaterMarkTextHeight:q,WaterMarkTextFontString:D,MaxChars:u,HasShadow:o,ShadowColor:O,ShadowOffsetX:c,ShadowOffsetY:b,HasRoundedEdges:B,EdgeRadius:k,HasBgGradient:J,BgGradientStartColor:M,BgGradientEndColor:v,HasBgImage:f,BgImageUrl:r,Margin:i,HasBorder:N,BorderColor:F,BorderLineWidth:n,UserInputText:"",VScrollBarWindowID:vscrollbarwindowid,CaretPosIndex:-1,ShowCaret:0,CaretColor:m,LineBreakIndexes:new Array(),SelectedTextStartIndex:-1,SelectedTextEndIndex:-1,MouseDown:0,WasSelecting:0,AllowedCharsRegEx:C,CaretTime:Date.now(),CustomKeyboardWindowID:z});if(f==1){var g=new Image();g.src=r;g.onload=function(){invalidateRect(E,H,G,a,d)};setWordProcessorBgImage(getWordProcessorProps(E,w),g)}registerWindowDrawFunction(w,function(V,x){var U=getWordProcessorProps(V,x);var Q=getScrollBarProps(V,U.VScrollBarWindowID);var Y=getCtx(V);Y.save();if(U.HasBgImage==1){Y.drawImage(getWordProcessorImage(U),U.X,U.Y)}else{if(U.HasBgGradient==1){var S=Y.createLinearGradient(U.X,U.Y,U.X,U.Y+U.Height);S.addColorStop(0,U.BgGradientStartColor);S.addColorStop(1,U.BgGradientEndColor);Y.fillStyle=S}}if(U.HasRoundedEdges==1){Y.beginPath();Y.moveTo(U.X,U.Y+U.EdgeRadius);Y.arc(U.EdgeRadius+U.X,U.Y+U.EdgeRadius,U.EdgeRadius,Math.PI,(Math.PI/180)*270,false);Y.lineTo(U.X+U.Width-15-U.EdgeRadius,U.Y);Y.arc(U.X+U.Width-15-U.EdgeRadius,U.Y+U.EdgeRadius,U.EdgeRadius,(Math.PI/180)*270,Math.PI*2,false);Y.lineTo(U.X+U.Width-15,U.Y+U.Height-U.EdgeRadius);Y.arc(U.X+U.Width-15-U.EdgeRadius,U.Y+U.Height-U.EdgeRadius,U.EdgeRadius,0,Math.PI/2,false);Y.lineTo(U.X+U.EdgeRadius,U.Y+U.Height);Y.arc(U.X+U.EdgeRadius,U.Y+U.Height-U.EdgeRadius,U.EdgeRadius,Math.PI/2,Math.PI,false);Y.closePath();Y.clip();if(U.HasBgImage==1&&U.Image.complete==true){Y.drawImage(U.Image,U.X,U.Y)}else{if(U.HasBgGradient==1){Y.fill()}}if(U.HasBorder==1){Y.strokeStyle=U.BorderColor;Y.lineWidth=U.BorderLineWidth;Y.stroke()}}else{Y.beginPath();Y.rect(U.X,U.Y,U.Width-15,U.Height);Y.clip();if(U.HasBgImage==1&&U.Image.complete==true){Y.drawImage(U.Image,U.X,U.Y)}else{if(U.HasBgGradient==1){Y.fill()}}if(U.HasBorder==1){Y.strokeStyle=U.BorderColor;Y.lineWidth=U.BorderLineWidth;Y.stroke()}}if(U.HasMarkup==0){if(U.UserInputText&&U.UserInputText.length>0){Y.font=U.TextFontString;Y.fillStyle=U.TextColor;var P=0;if(U.LineBreakIndexes.length==0&&U.UserInputText&&U.UserInputText.length>0){Y.fillText(removeTrailingSpacesAndLineBreaks(U.UserInputText),U.X+U.Margin,U.Y+U.Margin+U.TextHeight)}else{var R;for(R=Q.SelectedID;R<U.LineBreakIndexes.length&&(R-Q.SelectedID)*(U.TextHeight+U.LineSpacingInPixels)<U.Height-(U.Margin*2);R++){Y.fillText(removeTrailingSpacesAndLineBreaks(U.UserInputText.substr((R>0?U.LineBreakIndexes[R-1]:0),U.LineBreakIndexes[R]-(R>0?U.LineBreakIndexes[R-1]:0))),U.X+U.Margin,U.Y+U.Margin+U.TextHeight+((U.TextHeight+U.LineSpacingInPixels)*(R-Q.SelectedID)))}if(U.LineBreakIndexes[U.LineBreakIndexes.length-1]+1<U.UserInputText.length){Y.fillText(removeTrailingSpacesAndLineBreaks(U.UserInputText.substr(U.LineBreakIndexes[U.LineBreakIndexes.length-1])),U.X+U.Margin,U.Y+U.Margin+((R-Q.SelectedID+1)*(U.TextHeight+U.LineSpacingInPixels))-U.LineSpacingInPixels)}}}else{Y.font=U.WaterMarkTextFontString;Y.fillStyle=U.WaterMarkTextColor;Y.fillText(U.WaterMarkText,U.X+U.Margin,U.Y+U.Margin+U.WaterMarkTextHeight)}if(doesWindowHaveFocus(V,x)==1){if(U.ShowCaret==1){if(Date.now()-U.CaretTime>250){U.ShowCaret=0;U.CaretTime=Date.now()}Y.strokeStyle=U.CaretColor;Y.beginPath();var T=0;if(U.LineBreakIndexes.length>0){for(var y=0;y<U.LineBreakIndexes.length;y++){if((y==0?true:U.CaretPosIndex>U.LineBreakIndexes[y-1])&&U.CaretPosIndex<U.LineBreakIndexes[y]){T=y;break}else{if(U.CaretPosIndex>U.LineBreakIndexes[y]){T=y+1}}}}if(U.CaretPosIndex==-1){Y.moveTo(U.X+U.Margin,U.Y+U.Margin+4);Y.lineTo(U.X+U.Margin+3,U.Y+U.Margin+4);Y.moveTo(U.X+U.Margin,U.Y+U.Margin+U.TextHeight-4);Y.moveTo(U.X+U.Margin+3,U.Y+U.Margin+U.TextHeight-4);Y.moveTo(U.X+U.Margin+2,U.Y+U.Margin+4);Y.lineTo(U.X+U.Margin+2,U.Y+U.Margin+U.TextHeight-4)}else{if(U.CaretPosIndex>-1){var X=removeTrailingSpacesAndLineBreaks(U.UserInputText&&U.UserInputText.length-1>=U.CaretPosIndex?(T>0?U.UserInputText.substring(U.LineBreakIndexes[T-1],U.CaretPosIndex+1):U.UserInputText.substring(0,U.CaretPosIndex+1)):"");Y.font=U.TextFontString;var W=Y.measureText(X).width;T-=getScrollBarProps(V,U.VScrollBarWindowID).SelectedID;Y.moveTo(U.X+U.Margin+W,U.Y+U.Margin+((U.TextHeight+U.LineSpacingInPixels)*T));Y.lineTo(U.X+U.Margin+3+W,U.Y+U.Margin+((U.TextHeight+U.LineSpacingInPixels)*T));Y.moveTo(U.X+U.Margin+W,U.Y+U.Margin+U.TextHeight+((U.TextHeight+U.LineSpacingInPixels)*((T==0?1:T)-1)));Y.moveTo(U.X+U.Margin+3+W,U.Y+U.Margin+U.TextHeight+((U.TextHeight+U.LineSpacingInPixels)*T));Y.moveTo(U.X+U.Margin+2+W,U.Y+U.Margin+((U.TextHeight+U.LineSpacingInPixels)*T));Y.lineTo(U.X+U.Margin+2+W,U.Y+U.Margin+U.TextHeight+((U.TextHeight+U.LineSpacingInPixels)*T))}}Y.stroke()}else{if(Date.now()-U.CaretTime>500){U.ShowCaret=1;U.CaretTime=Date.now()}}}}Y.restore()},E);if(!(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)){registerKeyDownFunction(E,function(W,aa,T){var U=getWordProcessorProps(W,aa);var X=false;switch(T.keyCode){case 37:if(U.CaretPosIndex>-1){U.CaretPosIndex--;U.SelectedTextStartIndex=-1;U.SelectedTextEndIndex=-1;U.WasSelecting=0;U.MouseDown=0}X=true;break;case 38:var R=0;if(U.LineBreakIndexes.length>0){for(var x=0;x<U.LineBreakIndexes.length;x++){if((x==0?true:U.CaretPosIndex>U.LineBreakIndexes[x-1])&&U.CaretPosIndex<U.LineBreakIndexes[x]){R=x;break}else{if(U.CaretPosIndex>U.LineBreakIndexes[x]){R=x+1}}}if(R>0){U.CaretPosIndex=(R==1?0:U.LineBreakIndexes[R-2])+(U.CaretPosIndex-U.LineBreakIndexes[R-1])}}X=true;break;case 39:if(U.CaretPosIndex>=U.UserInputText.length-1){U.CaretPosIndex=U.UserInputText.length-1}else{U.CaretPosIndex++}U.SelectedTextStartIndex=-1;U.SelectedTextEndIndex=-1;U.MouseDown=0;U.WasSelecting=0;X=true;break;case 40:var R=0;if(U.LineBreakIndexes.length>0){for(var x=0;x<U.LineBreakIndexes.length;x++){if((x==0?true:U.CaretPosIndex>U.LineBreakIndexes[x-1])&&U.CaretPosIndex<U.LineBreakIndexes[x]){R=x;break}else{if(U.CaretPosIndex>U.LineBreakIndexes[x]){R=x+1}}}if(R<U.LineBreakIndexes.length){U.CaretPosIndex=U.LineBreakIndexes[R]+(U.CaretPosIndex-(R==0?0:U.LineBreakIndexes[R-1]))}}X=true;break;case 46:if(U.CaretPosIndex<U.UserInputText.length-1){if(U.CaretPosIndex==-1){U.UserInputText=U.UserInputText.substring(1)}else{if(U.CaretPosIndex==U.UserInputText.length-2){U.UserInputText=U.UserInputText.substring(0,U.UserInputText.length-1)}else{U.UserInputText=U.UserInputText.substring(0,U.CaretPosIndex+1)+U.UserInputText.substring(U.CaretPosIndex+2)}}U.SelectedTextStartIndex=-1;U.SelectedTextEndIndex=-1;U.MouseDown=0;U.WasSelecting=0}X=true;break;case 8:if(U.CaretPosIndex>-1){if(U.CaretPosIndex==0){if(U.UserInputText.length>1){U.UserInputText=U.UserInputText.substring(1,U.UserInputText.length-1)}else{U.UserInputText=""}U.CaretPosIndex=-1}else{if(U.CaretPosIndex==U.UserInputText.length-1){U.UserInputText=U.UserInputText.substring(0,U.UserInputText.length-1);U.CaretPosIndex--}else{if(U.CaretPosIndex>0){U.UserInputText=U.UserInputText.substring(0,U.CaretPosIndex)+U.UserInputText.substring(U.CaretPosIndex+1);U.CaretPosIndex--}}}U.SelectedTextStartIndex=-1;U.SelectedTextEndIndex=-1;U.MouseDown=0;U.WasSelecting=0}X=true;break}if(!X){if(T.ctrlKey&&String.fromCharCode(T.keyCode).toLowerCase()=="a"){U.SelectedTextStartIndex=0;U.SelectedTextEndIndex=U.UserInputText.length-1}else{if(T.ctrlKey&&String.fromCharCode(T.keyCode).toLowerCase()=="c"&&window.clipboardData){if(U.SelectedTextStartIndex>-1&&U.SelectedTextEndIndex>-1&&U.UserInputText&&U.SelectedTextEndIndex<U.UserInputText.length){window.clipboardData.setData("Text",(U.UserInputText&&U.SelectedTextEndIndex==U.UserInputText.length-1?U.UserInputText.substring(U.SelectedTextStartIndex):U.UserInputText.substring(U.SelectedTextStartIndex,U.SelectedTextEndIndex-U.SelectedTextStartIndex+1)))}}else{if(!U.UserInputText||(U.UserInputText&&U.UserInputText.length<U.MaxChars)){var V=getCharFromKeyCode(T);var S;if((!U.AllowedCharsRegEx||U.AllowedCharsRegEx==null||U.AllowedCharsRegEx.length==0||V.match(U.AllowedCharsRegEx)==V||V=="\n")){if(U.CaretPosIndex==-1){U.UserInputText=V+(U.UserInputText?U.UserInputText:"");U.CaretPosIndex++}else{if(U.UserInputText&&U.CaretPosIndex==U.UserInputText.length-1){U.UserInputText=U.UserInputText+V;U.CaretPosIndex++}else{if(U.UserInputText){U.UserInputText=U.UserInputText.substring(0,U.CaretPosIndex+1)+V+U.UserInputText.substring(U.CaretPosIndex+1);U.CaretPosIndex++}}}U.SelectedTextStartIndex=-1;U.SelectedTextEndIndex=-1;U.MouseDown=0;U.WasSelecting=0}}}}}U.LineBreakIndexes=new Array();if(U.UserInputText&&U.UserInputText.length>0){var Y=getCtx(W);if(U.WordSensitive==0){var Q=0;var y=0;while(Q<U.UserInputText.length){if(U.UserInputText.substr(y,Q-y+1)=="\n"){U.LineBreakIndexes.push(Q);y=Q}else{if(Y.measureText(U.UserInputText.substr(y,Q-y+1)).width+U.Margin>U.Width-15){U.LineBreakIndexes.push(Q);y=Q}}Q++}}else{var Q=0;var y=0;var Z=-1;while(Q<U.UserInputText.length){if(U.UserInputText.substr(Q,1)=="\n"){U.LineBreakIndexes.push(Q);y=Q}else{if(Y.measureText(U.UserInputText.substr(y,Q-y+1)).width+U.Margin>U.Width-15){if(Z>-1){U.LineBreakIndexes.push(Z);y=Z}else{U.LineBreakIndexes.push(Q);y=Q}}}Q++;if(U.UserInputText.substr(Q,1)==" "){Z=Q}}}var P=getScrollBarProps(W,U.VScrollBarWindowID);P.MaxItems=U.LineBreakIndexes.length;var R=0;if(U.LineBreakIndexes.length>0){for(var x=0;x<U.LineBreakIndexes.length;x++){if((x==0?true:U.CaretPosIndex>U.LineBreakIndexes[x-1])&&U.CaretPosIndex<U.LineBreakIndexes[x]){R=x;break}else{if(U.CaretPosIndex>U.LineBreakIndexes[x]){R=x+1}}}}if(R-P.SelectedID+1>(U.Height-(U.Margin*2))/(U.TextHeight+U.LineSpacingInPixels)){P.SelectedID=R-Math.floor((U.Height-(U.Margin*2))/(U.TextHeight+U.LineSpacingInPixels))+1}else{if(R<P.SelectedID){P.SelectedID=R}}}},w)}registerClickFunction(w,function(W,P,T){var X=T.calcX;var V=T.calcY;var U=getWordProcessorProps(W,P);var Y=getCtx(W);var Q=getScrollBarProps(W,U.VScrollBarWindowID);if(U.UserInputText.length>0){var S=0;if(U.LineBreakIndexes.length>0){for(var R=Q.SelectedID;R<U.LineBreakIndexes.length;R++){if(U.Y+U.Margin+((U.TextHeight+U.LineSpacingInPixels)*(R-Q.SelectedID+1))>V){break}else{S=R+1}}}if(S==0){S=Q.SelectedID}for(var R=(S==0?0:U.LineBreakIndexes[S-1]);R<(S<U.LineBreakIndexes.length?U.LineBreakIndexes[S]:U.UserInputText.length);R++){if(X>U.X+U.Margin+Y.measureText(U.UserInputText.substr((S==0?0:U.LineBreakIndexes[S-1]),R-(S==0?0:U.LineBreakIndexes[S-1]))).width){U.CaretPosIndex=R}else{break}}}},E);registerLostFocusFunction(E,w,function(P,x){var y=getWordProcessorProps(P,x);if(navigator.userAgent.toLowerCase().indexOf("android")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1){if(doesWindowHaveFocus(P,y.CustomKeyboardWindowID)==0&&doingEventForWindowID!=y.CustomKeyboardWindowID){setHiddenWindowStatus(P,y.CustomKeyboardWindowID,1)}else{setHiddenWindowStatus(P,y.CustomKeyboardWindowID,0)}}});registerGotFocusFunction(E,w,function(x,P){var y=getWordProcessorProps(x,P);setHiddenWindowStatus(x,y.CustomKeyboardWindowID,0)});registerAnimatedWindow(E,w);return w}function removeTrailingSpacesAndLineBreaks(a){while(a.length>0){if(a.substr(0,1)=="\n"||a.substr(0,1)==" "){a=(1<a.length?a.substr(1,a.length-1):"")}else{break}}return a}function getCharFromKeyCode(a){switch(a.keyCode){case 16:return"";case 190:return a.shiftKey||a.shiftLeft?">":".";case 32:return" ";case 13:return"\n";case 9:return"    ";case 106:return"*";case 107:return"+";case 109:return"-";case 110:return a.shiftKey||a.shiftLeft?">":".";case 111:return"/";case 186:return a.shiftKey||a.shiftLeft?":":";";case 187:return a.shiftKey||a.shiftLeft?"+":"=";case 188:return a.shiftKey||a.shiftLeft?"<":",";case 189:return a.shiftKey||a.shiftLeft?"_":"-";case 191:return a.shiftKey||a.shiftLeft?"?":"/";case 192:return a.shiftKey||a.shiftLeft?"~":"`";case 219:return a.shiftKey||a.shiftLeft?"{":"[";case 220:return a.shiftKey||a.shiftLeft?"|":"\\";case 221:return a.shiftKey||a.shiftLeft?"}":"]";case 48:return a.shiftKey||a.shiftLeft?")":"0";case 49:return a.shiftKey||a.shiftLeft?"!":"1";case 50:return a.shiftKey||a.shiftLeft?"@":"2";case 51:return a.shiftKey||a.shiftLeft?"#":"3";case 52:return a.shiftKey||a.shiftLeft?"$":"4";case 53:return a.shiftKey||a.shiftLeft?"%":"5";case 54:return a.shiftKey||a.shiftLeft?"^":"6";case 55:return a.shiftKey||a.shiftLeft?"&":"7";case 56:return a.shiftKey||a.shiftLeft?"*":"8";case 57:return a.shiftKey||a.shiftLeft?"(":"9";case 65:return a.shiftKey||a.shiftLeft?"A":"a";case 66:return a.shiftKey||a.shiftLeft?"B":"b";case 67:return a.shiftKey||a.shiftLeft?"C":"c";case 68:return a.shiftKey||a.shiftLeft?"D":"d";case 69:return a.shiftKey||a.shiftLeft?"E":"e";case 70:return a.shiftKey||a.shiftLeft?"F":"f";case 71:return a.shiftKey||a.shiftLeft?"G":"g";case 72:return a.shiftKey||a.shiftLeft?"H":"h";case 73:return a.shiftKey||a.shiftLeft?"I":"i";case 74:return a.shiftKey||a.shiftLeft?"J":"j";case 75:return a.shiftKey||a.shiftLeft?"K":"k";case 76:return a.shiftKey||a.shiftLeft?"L":"l";case 77:return a.shiftKey||a.shiftLeft?"M":"m";case 78:return a.shiftKey||a.shiftLeft?"N":"n";case 79:return a.shiftKey||a.shiftLeft?"O":"o";case 80:return a.shiftKey||a.shiftLeft?"P":"p";case 81:return a.shiftKey||a.shiftLeft?"Q":"q";case 82:return a.shiftKey||a.shiftLeft?"R":"r";case 83:return a.shiftKey||a.shiftLeft?"S":"s";case 84:return a.shiftKey||a.shiftLeft?"T":"t";case 85:return a.shiftKey||a.shiftLeft?"U":"u";case 86:return a.shiftKey||a.shiftLeft?"V":"v";case 87:return a.shiftKey||a.shiftLeft?"W":"w";case 88:return a.shiftKey||a.shiftLeft?"X":"x";case 89:return a.shiftKey||a.shiftLeft?"Y":"y";case 90:return a.shiftKey||a.shiftLeft?"Z":"z";case 222:return a.shiftKey||a.shiftLeft?'"':"'";default:return""}}var virtualKeyboardPropsArray=new Array();function getVirtualKeyboardProps(c,a){for(var b=0;b<virtualKeyboardPropsArray.length;b++){if(virtualKeyboardPropsArray[b].CanvasID==c&&virtualKeyboardPropsArray[b].WindowID==a){return virtualKeyboardPropsArray[b]}}}function CCLVirtualKeyboard(){}CCLVirtualKeyboard.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,Keys:null,KeyPressFunction:null,GapBetweenButtons:null,GapBetweenRows:null,TextHeight:null,TextFontString:null,CustomDrawLetterFunction:null,HasGloss:null,ControlNameID:null,Depth:null,Initialize:function(){return createVirtualKeyboard(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.Keys,this.KeyPressFunction,this.GapBetweenButtons,this.GapBetweenRows,this.HasGloss,this.TextHeight,this.TextFontString,this.CustomDrawLetterFunction)}};function createVirtualKeyboard(a,e,n,m,c,o,i,p,k,b,g,f,l,q,h){var j=createWindow(a,n,m,c,o,i,null,"VirtualKeyboard",e);var d=(p==null?0:1);if(!p){p=[[[["Q",30,30],["W",30,30],["E",30,30],["R",30,30],["T",30,30],["Y",30,30],["U",30,30],["I",30,30],["O",30,30],["P",30,30]],[["A",30,30],["S",30,30],["D",30,30],["F",30,30],["G",30,30],["H",30,30],["J",30,30],["K",30,30],["L",30,30]],[["shiftKey",30,30],["Z",30,30],["X",30,30],["C",30,30],["V",30,30],["B",30,30],["N",30,30],["M",30,30],["backspaceKey",30,30]],[["keyboardOff",30,30],[",",30,30],["spacebarKey",60,30],[".",30,30],["12#",30,30,1],["carriageReturnKey",30,30]],[["up",30,30],["down",30,30],["left",30,30],["right",30,30]]],[[["1",30,30],["2",30,30],["3",30,30],["4",30,30],["5",30,30],["6",30,30],["7",30,30],["8",30,30],["9",30,30],["0",30,30]],[["!",30,30],["@",30,30],["#",30,30],["$",30,30],["%",30,30],["&",30,30],["*",30,30],["?",30,30],["/",30,30]],[["_",30,30],['"',30,30],["'",30,30],["(",30,30],[")",30,30],["-",30,30],["+",30,30],[";",30,30],["backspaceKey",30,30]],[["keyboardOff",30,30],[":",30,30],[",",30,30],["spacebarKey",45,30],[".",30,30],["ABC",40,30,0],["carriageReturnKey",30,30]],[["up",30,30],["down",30,30],["left",30,30],["right",30,30]]]]}virtualKeyboardPropsArray.push({CanvasID:a,WindowID:j,X:n,Y:m,Width:c,Height:o,Keys:p,KeyPressFunction:k,GapBetweenButtons:b,GapBetweenRows:g,CurrentKeyboardIndex:0,KeyExtents:null,TextHeight:l,TextFontString:q,CustomKeys:d,CustomDrawLetterFunction:h,HasGloss:f,ShiftKeyPressed:0});registerWindowDrawFunction(j,function(B,r){var D=getVirtualKeyboardProps(B,r);D.KeyExtents=new Array();var E=getCtx(B);E.fillStyle="#3c4243";E.beginPath();E.rect(D.X,D.Y,D.Width,D.Height);E.fill();E.strokeStyle="#353a3b";var s=(D.Height/Math.tan(Math.PI/4));for(var v=0;v<(D.Width+s)/10;v++){E.beginPath();E.moveTo(D.X-s+(v*10),D.Y);E.lineTo(D.X+(v*10),D.Y+D.Height);E.stroke();E.beginPath();E.moveTo(D.X-s+(v*10),D.Y+D.Height);E.lineTo(D.X+(v*10),D.Y);E.stroke()}var u=D.GapBetweenRows;for(var G=0;G<D.Keys[D.CurrentKeyboardIndex].length;G++){var t=0;for(var A=0;A<D.Keys[D.CurrentKeyboardIndex][G].length;A++){t+=D.Keys[D.CurrentKeyboardIndex][G][A][1]+D.GapBetweenButtons}var x=D.GapBetweenButtons+((D.Width-D.GapBetweenButtons-t)/2);for(var A=0;A<D.Keys[D.CurrentKeyboardIndex][G].length;A++){E.beginPath();E.moveTo(x+D.X,u+D.Y+5);E.arc(x+D.X+5,u+D.Y+5,5,Math.PI,(Math.PI/180)*270,false);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y);E.arc(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+5,5,(Math.PI/180)*270,Math.PI*2,false);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1],u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5);E.arc(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5,5,0,Math.PI/2,false);E.lineTo(x+D.X+5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]);E.arc(x+D.X+5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5,5,Math.PI/2,Math.PI,false);E.closePath();D.KeyExtents.push([x+D.X,u+D.Y,D.Keys[D.CurrentKeyboardIndex][G][A][1],D.Keys[D.CurrentKeyboardIndex][G][A][2],D.ShiftKeyPressed==1?D.Keys[D.CurrentKeyboardIndex][G][A][0]:D.Keys[D.CurrentKeyboardIndex][G][A][0].toLowerCase(),G,A]);var y=E.createLinearGradient(x+D.X,u+D.Y,x+D.X,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]);y.addColorStop(0,"#536fa0");y.addColorStop(1,"#274580");E.fillStyle=y;E.fill();E.strokeStyle="#1f3a73";E.stroke();if(D.CustomKeys==0){y=E.createLinearGradient(x+D.X,u+D.Y+((D.Keys[D.CurrentKeyboardIndex][G][A][2]-D.TextHeight)/2),x+D.X,u+D.Y-((D.Keys[D.CurrentKeyboardIndex][G][A][2]-D.TextHeight)/2)+D.Keys[D.CurrentKeyboardIndex][G][A][2]);y.addColorStop(0,"#fafbfc");y.addColorStop(1,"#dde2ea");E.fillStyle=y;E.strokeStyle=y;E.shadowBlur=5;E.shadowColor="#636e7f";E.font=D.TextFontString;switch(D.Keys[D.CurrentKeyboardIndex][G][A][0]){case"shiftKey":E.beginPath();E.moveTo(x+D.X+(D.Keys[D.CurrentKeyboardIndex][G][A][1]/2),u+D.Y+5);E.lineTo(x+D.X+5,u+D.Y+15);E.lineTo(x+D.X+(D.Keys[D.CurrentKeyboardIndex][G][A][1]/2)-3,u+D.Y+15);E.lineTo(x+D.X+(D.Keys[D.CurrentKeyboardIndex][G][A][1]/2)-3,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5);E.lineTo(x+D.X+(D.Keys[D.CurrentKeyboardIndex][G][A][1]/2)+3,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5);E.lineTo(x+D.X+(D.Keys[D.CurrentKeyboardIndex][G][A][1]/2)+3,u+D.Y+15);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+15);E.closePath();if(D.ShiftKeyPressed==1){E.save();var F=E.createLinearGradient(x+D.X,u+D.Y,x+D.X,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]);F.addColorStop(0,"#00FF00");F.addColorStop(1,"#FFFFFF");E.fillStyle=F;E.fill();E.restore()}else{E.fill()}break;case"backspaceKey":E.beginPath();E.moveTo(x+D.X+5,u+D.Y+(D.Keys[D.CurrentKeyboardIndex][G][A][2]/2));E.lineTo(x+D.X+14,u+D.Y+5);E.lineTo(x+D.X+14,u+D.Y+(D.Keys[D.CurrentKeyboardIndex][G][A][2]/2)-3);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+(D.Keys[D.CurrentKeyboardIndex][G][A][2]/2)-3);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+(D.Keys[D.CurrentKeyboardIndex][G][A][2]/2)+3);E.lineTo(x+D.X+14,u+D.Y+(D.Keys[D.CurrentKeyboardIndex][G][A][2]/2)+3);E.lineTo(x+D.X+14,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5);E.closePath();E.fill();break;case"keyboardOff":E.beginPath();E.rect(x+D.X+5,u+D.Y+5,D.Keys[D.CurrentKeyboardIndex][G][A][1]-10,D.Keys[D.CurrentKeyboardIndex][G][A][2]-10);E.stroke();for(var C=0;C<(D.Keys[D.CurrentKeyboardIndex][G][A][1]-10)/4;C++){for(var z=0;z<(D.Keys[D.CurrentKeyboardIndex][G][A][2]-10)/4;z++){E.beginPath();E.rect(x+D.X+5+(C*4),u+D.Y+5+(z*4),3,3);E.stroke()}}break;case"spacebarKey":E.beginPath();E.moveTo(x+D.X+5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-10);E.lineTo(x+D.X+5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-10);E.stroke();break;case"carriageReturnKey":E.beginPath();E.moveTo(x+D.X+5,u+D.Y+22);E.lineTo(x+D.X+14,u+D.Y+15);E.lineTo(x+D.X+14,u+D.Y+19);E.lineTo(x+D.X+19,u+D.Y+19);E.lineTo(x+D.X+19,u+D.Y+5);E.lineTo(x+D.X+25,u+D.Y+5);E.lineTo(x+D.X+25,u+D.Y+25);E.lineTo(x+D.X+14,u+D.Y+25);E.lineTo(x+D.X+14,u+D.Y+29);E.closePath();E.fill();break;case"up":E.beginPath();E.moveTo(x+D.X+15,u+D.Y+5);E.lineTo(x+D.X+25,u+D.Y+25);E.lineTo(x+D.X+5,u+D.Y+25);E.closePath();E.fill();break;case"down":E.beginPath();E.moveTo(x+D.X+15,u+D.Y+25);E.lineTo(x+D.X+5,u+D.Y+5);E.lineTo(x+D.X+25,u+D.Y+5);E.closePath();E.fill();break;case"left":E.beginPath();E.moveTo(x+D.X+5,u+D.Y+15);E.lineTo(x+D.X+25,u+D.Y+5);E.lineTo(x+D.X+25,u+D.Y+25);E.closePath();E.fill();break;case"right":E.beginPath();E.moveTo(x+D.X+25,u+D.Y+15);E.lineTo(x+D.X+5,u+D.Y+25);E.lineTo(x+D.X+5,u+D.Y+5);E.closePath();E.fill();break;break;case"12#":case"ABC":E.fillText(D.Keys[D.CurrentKeyboardIndex][G][A][0],x+D.X+((D.Keys[D.CurrentKeyboardIndex][G][A][1]-E.measureText(D.Keys[D.CurrentKeyboardIndex][G][A][0]).width)/2),u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-((D.Keys[D.CurrentKeyboardIndex][G][A][2]-D.TextHeight)/2));break;default:E.fillText(D.ShiftKeyPressed==1?D.Keys[D.CurrentKeyboardIndex][G][A][0]:D.Keys[D.CurrentKeyboardIndex][G][A][0].toLowerCase(),x+D.X+((D.Keys[D.CurrentKeyboardIndex][G][A][1]-E.measureText(D.ShiftKeyPressed==1?D.Keys[D.CurrentKeyboardIndex][G][A][0]:D.Keys[D.CurrentKeyboardIndex][G][A][0].toLowerCase()).width)/2),u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-((D.Keys[D.CurrentKeyboardIndex][G][A][2]-D.TextHeight)/2));break}}else{D.CustomDrawLetterFunction(E,D.Keys[D.CurrentKeyboardIndex][G][A][0],x+D.X,u+D.Y,D.Keys[D.CurrentKeyboardIndex][G][A][1],D.Keys[D.CurrentKeyboardIndex][G][A][2])}if(D.HasGloss==1){E.beginPath();E.moveTo(x+D.X+2,u+D.Y+5+2);E.arc(x+D.X+5+2,u+D.Y+5+2,5,Math.PI,(Math.PI/180)*270,false);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5-2,u+D.Y+2);E.arc(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5-2,u+D.Y+5+2,5,(Math.PI/180)*270,Math.PI*2,false);E.lineTo(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-2,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5+2);E.arc(x+D.X+D.Keys[D.CurrentKeyboardIndex][G][A][1]-5-2,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5+2,5,0,Math.PI/2,false);E.lineTo(x+D.X+5+2,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]+2);E.arc(x+D.X+5+2,u+D.Y+D.Keys[D.CurrentKeyboardIndex][G][A][2]-5+2,5,Math.PI/2,Math.PI,false);E.closePath();var y=E.createLinearGradient(x+D.X+2,u+D.Y+2,x+D.X+2,u+D.Y+(D.Keys[D.CurrentKeyboardIndex][G][A][2]/2));y.addColorStop(0,"rgba(255,255,255,0.4)");y.addColorStop(1,"rgba(255,255,255,0.05)");E.fillStyle=y;E.fill()}x+=D.Keys[D.CurrentKeyboardIndex][G][A][1]+D.GapBetweenButtons}u+=D.Keys[D.CurrentKeyboardIndex][G][0][2]+D.GapBetweenRows}registerClickFunction(j,function(H,L,K){donotredaw=1;var w=K.calcX;var M=K.calcY;var J=getVirtualKeyboardProps(H,L);for(var I=0;I<J.KeyExtents.length;I++){if(w>J.KeyExtents[I][0]&&w<J.KeyExtents[I][0]+J.KeyExtents[I][2]&&M>J.KeyExtents[I][1]&&M<J.KeyExtents[I][1]+J.KeyExtents[I][3]){if(J.Keys[J.CurrentKeyboardIndex][J.KeyExtents[I][5]][J.KeyExtents[I][6]].length==4){J.CurrentKeyboardIndex=J.Keys[J.CurrentKeyboardIndex][J.KeyExtents[I][5]][J.KeyExtents[I][6]][3]}else{if(J.Keys[J.CurrentKeyboardIndex][J.KeyExtents[I][5]][J.KeyExtents[I][6]][0]=="shiftKey"){J.ShiftKeyPressed=(J.ShiftKeyPressed==1?0:1)}else{J.KeyPressFunction(H,L,J.KeyExtents[I][4])}}return}}},a)},a);return j}var splitterPropsArray=new Array();function getSplitterProps(c,a){for(var b=0;b<splitterPropsArray.length;b++){if(splitterPropsArray[b].CanvasID==c&&splitterPropsArray[b].WindowID==a){return splitterPropsArray[b]}}}function CCLSplitter(){}CCLSplitter.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,LineColor:null,ControlNameID:null,Depth:null,Initialize:function(){return createSplitter(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.LineColor)}};function createSplitter(a,c,h,g,b,j,e,k){var f=createWindow(a,h,g,b,j,e,null,"Splitter",c);splitterPropsArray.push({CanvasID:a,WindowID:f,X:h,Y:g,Width:b,Height:j,LineColor:k,MouseDown:0});registerWindowDrawFunction(f,function(n,i){var m=getSplitterProps(n,i);var l=getCtx(n);l.fillStyle=m.LineColor;l.rect(m.X,m.Y,m.Width,m.Height);l.fill()},a);registerMouseDownFunction(f,function(i,m){var l=getSplitterProps(a,f);l.MouseDown=1},a);for(var d=0;d<windows.length;d++){if(windows[d].ParentWindowID==null&&((j>b&&windows[d].X<h+b+2&&windows[d].X+windows[d].Width>h-2)||(b>j&&windows[d].Y<g+j&&windows[d].Y+windows[d].Height>g-2))){registerMouseMoveFunction(windows[d].WindowCount,function(v,l,q){var p=getSplitterProps(a,f);if(p.MouseDown==1){var u=getWindowProps(a,f);var q=correctEvent(a,window.event);var z=q.calcX;var t=q.calcY;var B=1000000;var r=0;var m=0;var A=1000000;if(p.Height>p.Width){var w=z-p.X;if(w!=0){for(var o=0;o<windows.length;o++){if(windows[o].WindowCount!=f&&windows[o].ParentWindowID==null&&p.X-2<windows[o].X+windows[o].Width&&p.X+p.Width+2>windows[o].X){if(windows[o].X<B){B=windows[o].X}if(windows[o].X+windows[o].Width>r){r=windows[o].X+windows[o].Width}if(windows[o].Y<A){A=windows[o].Y}if(windows[o].Y+windows[o].Height>m){m=windows[o].Y+windows[o].Height}if(windows[o].X+windows[o].Width<u.X){windows[o].Width+=w;getWindowControlPropsByWindowProps(windows[o]).Width=windows[o].Width}else{if(windows[o].X>u.X){windows[o].X+=w;windows[o].Width-=w;var n=getWindowControlPropsByWindowProps(windows[o]);n.X=windows[o].X;n.Width=windows[o].Width}}if(windows[o].Width<0){windows[o].Width=0}}}u.X=z;p.X=z;invalidateRect(a,null,B,A,r-B,m-A)}}else{if(p.Width>p.Height){var s=t-p.Y;if(s!=0){for(var o=0;o<windows.length;o++){if(windows[o].WindowCount!=f&&windows[o].ParentWindowID==null&&p.Y-2<windows[o].Y+windows[o].Height&&p.Y+p.Height+2>windows[o].Y){if(windows[o].X<B){B=windows[o].X}if(windows[o].X+windows[o].Width>r){r=windows[o].X+windows[o].Width}if(windows[o].Y<A){A=windows[o].Y}if(windows[o].Y+windows[o].Height>m){m=windows[o].Y+windows[o].Height}if(windows[o].Y+windows[o].Height<u.Y){windows[o].Height+=s;getWindowControlPropsByWindowProps(windows[o]).Height=windows[o].Height}else{if(windows[o].Y>u.Y){windows[o].Y+=s;windows[o].Height-=s;var n=getWindowControlPropsByWindowProps(windows[o]);n.Y=windows[o].Y;n.Height=windows[o].Height}}if(windows[o].Height<0){windows[o].Height=0}}}u.Y=t;p.Y=t;invalidateRect(a,null,B,A,r-B,m-A)}}}}},a)}}registerMouseUpFunction(f,function(){var i=getSplitterProps(a,f);i.MouseDown=0},a);return f}var boundaryFillableMapPropsArray=new Array();function getBoundaryFillableMapProps(c,a){for(var b=0;b<boundaryFillableMapPropsArray.length;b++){if(boundaryFillableMapPropsArray[b].CanvasID==c&&boundaryFillableMapPropsArray[b].WindowID==a){return boundaryFillableMapPropsArray[b]}}}function CCLBoundaryFillableMap(){}CCLBoundaryFillableMap.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,FillPoints:null,ImgURL:null,Image:null,ImageWidth:null,ImageHeight:null,ControlNameID:null,Depth:null,Initialize:function(){return createBoundaryFillableMap(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.FillPoints,this.ImgURL,this.ImageWidth,this.ImageHeight)}};function createBoundaryFillableMap(a,c,j,i,b,k,e,f,m,l,h){var g=createWindow(a,j,i,b,k,e,null,"BoundaryFillableMap",c);var d=new Image();d.onload=function(){invalidateRect(a,null,j,i,b,k)};d.src=m;boundaryFillableMapPropsArray.push({CanvasID:a,WindowID:g,X:j,Y:i,Width:b,Height:k,FillPoints:f,ImgURL:m,Image:d,ImageWidth:l,ImageHeight:h});registerWindowDrawFunction(g,function(q,u){var s=getBoundaryFillableMapProps(q,u);var t=getCtx(q);var p=document.createElement("canvas");p.width=s.ImageWidth;p.height=s.ImageHeight;var o=p.getContext("2d");o.drawImage(s.Image,0,0);var n=o.getImageData(0,0,p.width,p.height);for(var r=0;r<s.FillPoints.length;r++){n=fillImageData(s.FillPoints[r],n)}t.putImageData(n,s.X,s.Y)},a);return g}function fillImageData(c,b){var e=new Array();e.push([c[0],c[1]]);while(e.length>0){var a=e[e.length-1][0];var d=e[e.length-1][1];e.pop();if(b.data[(d*b.width*4)+(a*4)]==c[6]&&b.data[(d*b.width*4)+(a*4)+1]==c[7]&&b.data[(d*b.width*4)+(a*4)+2]==c[8]&&b.data[(d*b.width*4)+(a*4)+3]==c[9]){b.data[(d*b.width*4)+(a*4)]=c[10];b.data[(d*b.width*4)+(a*4)+1]=c[11];b.data[(d*b.width*4)+(a*4)+2]=c[12];b.data[(d*b.width*4)+(a*4)+3]=c[13];if(c.length==17&&c[14]==0?a-1>c[15]:a-1>c[2]){e.push([a-1,d])}if(c.length==17&&c[14]==0?a+1<c[16]:a+1<c[4]){e.push([a+1,d])}if(c.length==17&&c[14]==1?d-1>c[15]:d-1>c[3]){e.push([a,d-1])}if(c.length==17&&c[14]==1?a-1>c[16]:d+1<c[5]){e.push([a,d+1])}}}return b}var simpleXMLViewerPropsArray=new Array();function getSimpleXMLViewerProps(c,a){for(var b=0;b<simpleXMLViewerPropsArray.length;b++){if(simpleXMLViewerPropsArray[b].CanvasID==c&&simpleXMLViewerPropsArray[b].WindowID==a){return simpleXMLViewerPropsArray[b]}}}function fillSimpleXMLViewerChildNodes(c,h,k,d,a,l,j){for(var e=0;e<h.length;e++){var b=addChildNodes(c.ChildNodes,c,d==0?null:a,1,h[e].nodeName,["Node",h[e]]);if(h[e].attributes&&h[e].attributes.length>0){for(var g=0;g<h[e].attributes.length;g++){var f=addChildNodes(b.ChildNodes,b,j,1,h[e].attributes[g].name,["Attribute",h[e].attributes[g]]);addChildNodes(f.ChildNodes,f,l,1,h[e].attributes[g].value,["AttributeValue",h[e].attributes[g]])}}if(h[e].childNodes.length>0){fillSimpleXMLViewerChildNodes(b,h[e].childNodes,k,d,a,l,j)}else{if(h[e].nodeValue&&h[e].nodeValue.length>0){addChildNodes(b.ChildNodes,b,d==0?null:l,1,h[e].nodeValue,["Value",h[e]])}}}}function CCLXMLViewer(){}CCLXMLViewer.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,XML:null,TextColor:null,TextFontString:null,TextHeight:null,ClickNodeFunction:null,Tag:null,HasIcons:null,IconWidth:null,IconHeight:null,ImgURLNode:null,ImgURLValue:null,ImgURLAttribute:null,ControlNameID:null,Depth:null,Initialize:function(){createSimpleXMLViewer(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.XML,this.TextColor,this.TextFontString,this.TextHeight,this.ClickNodeFunction,this.Tag,this.HasIcons,this.IconWidth,this.IconHeight,this.ImgURLNode,this.ImgURLValue,this.ImgURLAttribute)}};function createSimpleXMLViewer(s,b,l,j,q,o,A,e,w,k,m,v,B,g,u,z,n,c,a){var d=new DOMParser();xmlDoc=d.parseFromString(e,"text/xml");var p=new Array();for(var t=0;t<xmlDoc.firstChild.childNodes[0].childNodes.length;t++){var r=addChildNodes(p,null,g==0?null:n,1,xmlDoc.firstChild.childNodes[0].childNodes[t].nodeName,["Node",xmlDoc.firstChild.childNodes[0].childNodes[t]]);if(xmlDoc.firstChild.childNodes[0].childNodes[t].attributes.length>0){for(var l=0;l<xmlDoc.firstChild.childNodes[0].childNodes[t].attributes.length;l++){var f=addChildNodes(r.ChildNodes,r,a,1,xmlDoc.firstChild.childNodes[0].childNodes[t].attributes[l].name,["Attribute",xmlDoc.firstChild.childNodes[0].childNodes[t].attributes[l]]);addChildNodes(f.ChildNodes,f,c,1,xmlDoc.firstChild.childNodes[0].childNodes[t].attributes[l].value,["AttributeValue",xmlDoc.firstChild.childNodes[0].childNodes[t].attributes[l]])}}if(xmlDoc.firstChild.childNodes[0].childNodes[t].childNodes.length>0){fillSimpleXMLViewerChildNodes(r,xmlDoc.firstChild.childNodes[0].childNodes[t].childNodes,xmlDoc,g,n,c,a)}else{if(xmlDoc.firstChild.childNodes[0].childNodes[t].nodeValue&&xmlDoc.firstChild.childNodes[0].childNodes[t].nodeValue.length>0){addChildNodes(r.ChildNodes,null,g==0?null:c,1,xmlDoc.firstChild.childNodes[0].childNodes[t].nodeValue,["Value",xmlDoc.firstChild.childNodes[0].childNodes[t]])}}}var h=createTreeView(s,b,l,j,q,o,A,p,w,k,m,v,B,g,u,z,null);simpleXMLViewerPropsArray.push({CanvasID:s,WindowID:h,X:l,Y:j,Width:q,Height:o,XML:e,TextColor:w,TextFontString:k,TextHeight:m,ClickNodeFunction:v,Tag:B,HasIcons:g,IconWidth:u,IconHeight:z,ImgURLNode:n,ImgURLValue:c,ImgURLAttribute:a});return h}var votingPropsArray=new Array();var votingOutlineImageArray=new Array();function getVotingOutlineImage(c,a){for(var b=0;b<votingOutlineImageArray.length;b++){if(votingOutlineImageArray[b][0]==c&&votingOutlineImageArray[b][1]==a){return votingOutlineImageArray[b][2]}}}function getVotingProps(c,a){for(var b=0;b<votingPropsArray.length;b++){if(votingPropsArray[b].CanvasID==c&&votingPropsArray[b].WindowID==a){return votingPropsArray[b]}}}function CCLVotingControl(){}CCLVotingControl.prototype={CanvasID:null,X:null,Y:null,Width:null,Height:null,NumStars:null,MaxValueOfAllStars:null,StarColorRed:null,StarColorGreen:null,StarColorBlue:null,StarColorAlpha:null,SpacingInPixelsBetweenStars:null,HasPartialStars:null,Editable:null,HasValueLabel:null,LabelXPos:null,LabelYPos:null,StarsStartingPosOffsetWhenLabel:null,StarsYPosWhenLabel:null,InitialValue:null,OutlineThicknessOfEmptyStar:null,StarsOrientation:null,FillOrientation:null,OutLineImgURL:null,CustomFillPoint:null,ImgWidth:null,ImgHeight:null,StarSizeInPixels:null,HasMouseOverLabel:null,StarOutlineBgColorRed:null,StarOutlineBgColorGreen:null,StarOutlineBgColorBlue:null,StarOutlineBgColorAlpha:null,LabelTextColor:null,LabelTextFontString:null,LabelTextHeight:null,CustomClickFunction:null,RoundDisplayedValueToNumOfDecimals:null,ControlNameID:null,Depth:null,IsCustomPattern:null,Initialize:function(){return createVotingControl(this.CanvasID,this.ControlNameID,this.X,this.Y,this.Width,this.Height,this.Depth,this.NumStars,this.MaxValueOfAllStars,this.StarColorRed,this.StarColorGreen,this.StarColorBlue,this.StarColorAlpha,this.StarSizeInPixels,this.SpacingInPixelsBetweenStars,this.HasPartialStars,this.Editable,this.HasValueLabel,this.LabelXPos,this.LabelYPos,this.LabelTextColor,this.LabelTextFontString,this.LabelTextHeight,this.StarsStartingPosOffsetWhenLabel,this.StarsYPosWhenLabel,this.InitialValue,this.OutlineThicknessOfEmptyStar,this.StarsOrientation,this.FillOrientation,this.IsCustomPattern,this.OutLineImgURL,this.CustomFillPoint,this.ImgWidth,this.ImgHeight,this.HasMouseOverLabel,this.StarOutlineBgColorRed,this.StarOutlineBgColorGreen,this.StarOutlineBgColorBlue,this.StarOutlineBgColorAlpha,this.CustomClickFunction,this.RoundDisplayedValueToNumOfDecimals)}};function createVotingControl(v,F,E,D,a,b,e,A,N,h,n,L,s,R,k,o,G,O,f,B,d,t,P,K,J,H,C,r,i,I,g,l,w,u,q,c,M,z,Q,p,j){var m=createWindow(v,E,D,a,b,e,null,"VotingControl",F);if(I==1){votingOutlineImage=new Image();votingOutlineImage.onload=function(){invalidateRect(v,null,E,D,a,b)};votingOutlineImage.src=g;votingOutlineImageArray.push([v,m,votingOutlineImage])}votingPropsArray.push({CanvasID:v,WindowID:m,X:E,Y:D,Width:a,Height:b,NumStars:A,MaxValueOfAllStars:N,StarColorRed:h,StarColorGreen:n,StarColorBlue:L,StarColorAlpha:s,SpacingInPixelsBetweenStars:k,HasPartialStars:o,Editable:G,HasValueLabel:O,LabelXPos:f,LabelYPos:B,StarsStartingPosOffsetWhenLabel:K,StarsYPosWhenLabel:J,InitialValue:H,OutlineThicknessOfEmptyStar:C,StarsOrientation:r,FillOrientation:i,IsCustomPattern:I,OutLineImgURL:g,CustomFillPoint:l,ImgWidth:w,ImgHeight:u,StarSizeInPixels:R,HasMouseOverLabel:q,StarOutlineBgColorRed:c,StarOutlineBgColorGreen:M,StarOutlineBgColorBlue:z,StarOutlineBgColorAlpha:Q,LabelTextColor:d,LabelTextFontString:t,LabelTextHeight:P,CustomClickFunction:p,RoundDisplayedValueToNumOfDecimals:j});registerWindowDrawFunction(m,function(x,S){var Y=getVotingProps(x,S);if(Y.IsCustomPattern==1){var ah=getCtx(x);var V=document.createElement("canvas");V.width=Y.ImgWidth;V.height=Y.ImgHeight;var ab=V.getContext("2d");ab.drawImage(getVotingOutlineImage(x,S),0,0);var X=ab.getImageData(0,0,V.width,V.height);var W=Y.HasPartialStars==1?Math.floor(Y.InitialValue/(Y.MaxValueOfAllStars/Y.NumStars)):Math.round(Y.InitialValue/(Y.MaxValueOfAllStars/Y.NumStars));if(W>0){X=fillImageData(Y.CustomFillPoint,X);for(var ae=0;ae<W;ae++){ah.putImageData(X,Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.ImgWidth+Y.SpacingInPixelsBetweenStars)):0),Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.ImgHeight+Y.SpacingInPixelsBetweenStars)):0))}}var y=0;if(Y.HasPartialStars==1){y=1;var ag=Math.round(((Y.InitialValue/(Y.MaxValueOfAllStars/Y.NumStars))%1)*Y.ImgWidth);if(ag>0){var U=document.createElement("canvas");U.width=Y.ImgWidth;U.height=Y.ImgHeight;var ac=U.getContext("2d");ac.drawImage(getVotingOutlineImage(x,S),0,0);var X=ac.getImageData(0,0,V.width,V.height);var Z=findStartingFillPointXY(passImageDataAsArray(X),X.width,Y.CustomFillPoint,Y.FillOrientation,ag);for(var ad=0;ad<Z.length;ad++){var ai=[Z[ad].X,Z[ad].Y,0,0,Y.ImgWidth,Y.ImgHeight,Y.StarOutlineBgColorRed,Y.StarOutlineBgColorGreen,Y.StarOutlineBgColorBlue,Y.StarOutlineBgColorAlpha,Y.StarColorRed,Y.StarColorGreen,Y.StarColorBlue,Y.StarColorAlpha,Y.FillOrientation,0,ag];X=fillImageData(ai,X)}ah.putImageData(X,Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(W*(Y.ImgWidth+Y.SpacingInPixelsBetweenStars)):0),Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(W*(Y.ImgHeight+Y.SpacingInPixelsBetweenStars)):0))}}if(W+y<Y.NumStars){var T=document.createElement("canvas");T.width=Y.ImgWidth;T.height=Y.ImgHeight;var aa=T.getContext("2d");aa.drawImage(getVotingOutlineImage(x,S),0,0);var af=ab.getImageData(0,0,V.width,V.height);for(var ae=W+y;ae<Y.NumStars;ae++){ah.putImageData(af,Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.ImgWidth+Y.SpacingInPixelsBetweenStars)):0),Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.ImgHeight+Y.SpacingInPixelsBetweenStars)):0))}}if(Y.HasValueLabel==1){ah.fillStyle=Y.LabelTextColor;ah.fillText(Y.InitialValue.toFixed(Y.RoundDisplayedValueToNumOfDecimals?Y.RoundDisplayedValueToNumOfDecimals:2).toString()+" out of "+Y.MaxValueOfAllStars.toString(),Y.X+Y.LabelXPos,Y.Y+Y.LabelYPos)}}else{var ah=getCtx(x);var V=document.createElement("canvas");V.width=Y.StarSizeInPixels;V.height=Y.StarSizeInPixels;var ab=V.getContext("2d");drawOutlineEmptyStarOnCtx(ab,Y,V);var X=ab.getImageData(0,0,V.width,V.height);var W=Y.HasPartialStars==1?Math.floor(Y.InitialValue/(Y.MaxValueOfAllStars/Y.NumStars)):Math.round(Y.InitialValue/(Y.MaxValueOfAllStars/Y.NumStars));if(W>0){var ai=[Y.StarSizeInPixels/2,Y.StarSizeInPixels/2,0,0,Y.StarSizeInPixels,Y.StarSizeInPixels,255,255,255,255,Y.StarColorRed,Y.StarColorGreen,Y.StarColorBlue,Y.StarColorAlpha];X=fillImageData(ai,X);for(var ae=0;ae<W;ae++){ah.putImageData(X,Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.ImgWidth+Y.SpacingInPixelsBetweenStars)):0),Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.ImgHeight+Y.SpacingInPixelsBetweenStars)):0))}}var y=0;if(Y.HasPartialStars==1){y=1;var ag=Math.round(((Y.InitialValue/(Y.MaxValueOfAllStars/Y.NumStars))%1)*Y.StarSizeInPixels);if(ag>0){var U=document.createElement("canvas");U.width=Y.StarSizeInPixels;U.height=Y.StarSizeInPixels;var ac=U.getContext("2d");drawOutlineEmptyStarOnCtx(ac,Y,U);var af=ac.getImageData(0,0,U.width,U.height);var Z=findStartingFillPointXY(passImageDataAsArray(af),af.width,[Y.StarSizeInPixels/2,Y.StarSizeInPixels/2,0,0,Y.StarSizeInPixels,Y.StarSizeInPixels,255,255,255,255,Y.StarColorRed,Y.StarColorGreen,Y.StarColorBlue,Y.StarColorAlpha],Y.FillOrientation,ag);for(var ad=0;ad<Z.length;ad++){var ai=[Z[ad].X,Z[ad].Y,0,0,Y.StarSizeInPixels,Y.StarSizeInPixels,255,255,255,255,Y.StarColorRed,Y.StarColorGreen,Y.StarColorBlue,Y.StarColorAlpha,Y.FillOrientation,0,ag];af=fillImageData(ai,af)}ah.putImageData(af,Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(W*(Y.StarSizeInPixels+Y.SpacingInPixelsBetweenStars)):0),Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(W*(Y.StarSizeInPixels+Y.SpacingInPixelsBetweenStars)):0))}}if(W+y<Y.NumStars){var T=document.createElement("canvas");T.width=Y.ImgWidth;T.height=Y.ImgHeight;var aa=T.getContext("2d");drawOutlineEmptyStarOnCtx(aa,Y,T);var af=aa.getImageData(0,0,T.width,T.height);for(var ae=W+y;ae<Y.NumStars;ae++){ah.putImageData(af,Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.StarSizeInPixels+Y.SpacingInPixelsBetweenStars)):0),Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(ae*(Y.StarSizeInPixels+Y.SpacingInPixelsBetweenStars)):0))}}if(Y.HasValueLabel==1){ah.fillStyle=Y.LabelTextColor;ah.fillText(Y.InitialValue.toFixed(Y.RoundDisplayedValueToNumOfDecimals?Y.RoundDisplayedValueToNumOfDecimals:2).toString()+" out of "+Y.MaxValueOfAllStars.toString(),Y.X+Y.LabelXPos,Y.Y+Y.LabelYPos)}}},v);if(G==1){registerClickFunction(m,function(x,V,S){var Y=getVotingProps(x,V);var U=S.calcX;var T=S.calcY;for(var y=0;y<Y.NumStars;y++){var ab=Y.X+(Y.StarsOrientation==0?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(y*((Y.IsCustomPattern==1?Y.ImgWidth:Y.StarSizeInPixels)+Y.SpacingInPixelsBetweenStars)):0);var X=ab+(Y.IsCustomPattern==1?Y.ImgWidth:Y.StarSizeInPixels);var aa=Y.Y+(Y.StarsOrientation==1?(Y.HasValueLabel==1?Y.StarsStartingPosOffsetWhenLabel:0)+(y*((Y.IsCustomPattern==1?Y.ImgHeight:Y.StarSizeInPixels)+Y.SpacingInPixelsBetweenStars)):0);var W=aa+(Y.IsCustomPattern==1?Y.ImgHeight:Y.StarSizeInPixels);if(ab<U&&X>U&&aa<T&&W>T){var Z=(y*(Y.MaxValueOfAllStars/Y.NumStars))+((Y.FillOrientation==0?((U-ab)/(Y.IsCustomPattern==1?Y.ImgWidth:Y.StarSizeInPixels)):((T-aa)/(Y.IsCustomPattern==1?Y.ImgHeight:Y.StarSizeInPixels)))*(Y.MaxValueOfAllStars/Y.NumStars));if(Y.CustomClickFunction){Y.CustomClickFunction(x,V,Y,U,T,Z)}else{Y.InitialValue=Z}}}},v)}}function passImageDataAsArray(a){var c=new Array();for(var b=0;b<a.width*a.height*4;b++){c.push(a.data[b])}return c}function findStartingFillPointXY(f,a,d,c,b){var h=new Array();var i=new Array();i.push([d[0],d[1]]);while(i.length>0){var g=i[i.length-1][0];var e=i[i.length-1][1];i.pop();if(f[(e*a*4)+(g*4)]==d[6]&&f[(e*a*4)+(g*4)+1]==d[7]&&f[(e*a*4)+(g*4)+2]==d[8]&&f[(e*a*4)+(g*4)+3]==d[9]){f[(e*a*4)+(g*4)]=d[10];f[(e*a*4)+(g*4)+1]=d[11];f[(e*a*4)+(g*4)+2]=d[12];f[(e*a*4)+(g*4)+3]=d[13];if(d.length==17&&d[14]==0?g-1>d[15]:g-1>d[2]){i.push([g-1,e])}if(d.length==17&&d[14]==0?g+1<d[16]:g+1<d[4]){i.push([g+1,e])}if(d.length==17&&d[14]==1?e-1>d[15]:e-1>d[3]){i.push([g,e-1])}if(d.length==17&&d[14]==1?g-1>d[16]:e+1<d[5]){i.push([g,e+1])}if(c==0?g<=b:e<=b){h.push({X:g,Y:e})}}}return h}function drawOutlineEmptyStarOnCtx(b,c,d){b.fillStyle="#FFFFFF";b.rect(0,0,c.StarSizeInPixels,c.StarSizeInPixels);b.fill();b.strokeStyle="#000000";b.lineWidth=c.OutlineThicknessOfEmptyStar;b.beginPath();var e=[[0,Math.floor(24*c.StarSizeInPixels/70)],[Math.floor(27*c.StarSizeInPixels/70),Math.floor(24*c.StarSizeInPixels/70)],[Math.floor(c.StarSizeInPixels/2),0],[Math.floor(43*c.StarSizeInPixels/70),Math.floor(24*c.StarSizeInPixels/70)],[c.StarSizeInPixels,Math.floor(24*c.StarSizeInPixels/70)],[Math.floor(49*c.StarSizeInPixels/70),Math.floor(41*c.StarSizeInPixels/70)],[Math.floor(60*c.StarSizeInPixels/70),c.StarSizeInPixels],[Math.floor(c.StarSizeInPixels/2),Math.floor(50*c.StarSizeInPixels/70)],[Math.floor(15*c.StarSizeInPixels/70),Math.floor(c.StarSizeInPixels)],[Math.floor(21*c.StarSizeInPixels/70),Math.floor(41*c.StarSizeInPixels/70)]];var a=b.getImageData(0,0,d.width,d.height);b.putImageData(drawClosedLoopLines(a,e,c.StarColorRed,c.StarColorGreen,c.StarColorBlue,c.StarColorAlpha),0,0)}function drawClosedLoopLines(b,d,g,e,a,f){if(d.length>1){for(var c=0;c<d.length;c++){b=drawline2(b,d[c][0],d[c][1],c==d.length-1?d[0][0]:d[c+1][0],c==d.length-1?d[0][1]:d[c+1][1],g,e,a,f)}}return b}function drawline2(j,b,i,a,g,c,e,k,d){var n=a-b;var h=1;var m=g-i;var f=1;if(n<0){h=-1;n=-n}if(m<0){f=-1;m=-m}n=n<<1;m=m<<1;j=setPixel(j,b,i,c,e,k,d);if(m<n){var l=m-(n>>1);while(b!=a){if(l>=0){i+=f;l-=n}l+=m;b+=h;j=setPixel(j,b,i,c,e,k,d)}}else{var l=n-(m>>1);while(i!=g){if(l>=0){b+=h;l-=m}l+=n;i+=f;j=setPixel(j,b,i,c,e,k,d)}}return j}function setPixel(c,b,g,f,d,a,e){c.data[(g*c.width*4)+(b*4)]=f;c.data[(g*c.width*4)+(b*4)+1]=d;c.data[(g*c.width*4)+(b*4)+2]=a;c.data[(g*c.width*4)+(b*4)+3]=e;return c}function findMinValueIndex(d){var b=-1;if(d.length>1){var a=d[0];var b=0;for(var c=1;c<d.length;c++){if(a>d[c]){a=d[c];b=c}}}return b}function invokeServerSideFunction(g,f,e,a,b,h){var d="[FunctionName]"+f+"[/FunctionName][CanvasID]"+e+"[/CanvasID][WindowID]"+a.toString()+"[/WindowID][Vars]"+getEncodedVariables()+"[/Vars][SessionID]"+sessionID+"[/SessionID][Params]"+encodeParams(h)+"[/Params]";var c;if(window.XMLHttpRequest){c=new XMLHttpRequest()}else{c=new ActiveXObject("Microsoft.XMLHTTP")}c.onreadystatechange=function(){if(c.readyState==4&&c.status==200&&c.responseText&&c.responseText.length>0){suspendDraw=1;var i=UnWrapVars(c.responseText);suspendDraw=0;if(b){b(i)}}};c.open("POST",g,true);if(navigator.userAgent.toLowerCase().indexOf("msie")==-1){c.overrideMimeType("application/octet-stream")}c.setRequestHeader("Content-Type","text/xml");c.setRequestHeader("Cache-Control","max-age=0");c.send(d)}function encodeParams(d){var c="[Array]";if(d){for(var b=0;b<d.length;b++){if(typeof d[b]==="string"||typeof d[b]==="number"){c+="[i]"+encodeAllBrackets(d[b].toString())+"[/i]"}else{if(d[b] instanceof Array){c+="[Array]";for(var a=0;a<d[b].length;a++){c+=encodeParams(d[b][a])}c+="[/Array]"}}}}return c+"[/Array]"}var imageControlBackupImageUrls=new Array();var textBoxBackupImageUrls=new Array();var imageSliderBackupImageUrls=new Array();var imageFaderBackupImageUrls=new Array();var wordProcessorBackupImageUrls=new Array();var treeviewBackupImageUrls=new Array();function getEncodedVariables(){var b="[Windows]";for(var a=0;a<windows.length;a++){b+="[i]"+stringEncodeObject(windows[a])+"[/i]"}b+="[/Windows][labelPropsArray]";for(var a=0;a<labelPropsArray.length;a++){b+="[i]"+stringEncodeObject(labelPropsArray[a])+"[/i]"}b+="[/labelPropsArray][buttonPropsArray]";for(var a=0;a<buttonPropsArray.length;a++){b+="[i]"+stringEncodeObject(buttonPropsArray[a])+"[/i]"}b+="[/buttonPropsArray][scrollBarPropsArray]";for(var a=0;a<scrollBarPropsArray.length;a++){b+="[i]"+stringEncodeObject(scrollBarPropsArray[a])+"[/i]"}b+="[/scrollBarPropsArray][gridPropsArray]";for(var a=0;a<gridPropsArray.length;a++){b+="[i]"+stringEncodeObject(gridPropsArray[a])+"[/i]"}b+="[/gridPropsArray][comboboxPropsArray]";for(var a=0;a<comboboxPropsArray.length;a++){b+="[i]"+stringEncodeObject(comboboxPropsArray[a])+"[/i]"}b+="[/comboboxPropsArray][checkboxPropsArray]";for(var a=0;a<checkboxPropsArray.length;a++){b+="[i]"+stringEncodeObject(checkboxPropsArray[a])+"[/i]"}b+="[/checkboxPropsArray][radiobuttonPropsArray]";for(var a=0;a<radiobuttonPropsArray.length;a++){b+="[i]"+stringEncodeObject(radiobuttonPropsArray[a])+"[/i]"}b+="[/radiobuttonPropsArray][imageControlPropsArray]";for(var a=0;a<imageControlPropsArray.length;a++){b+="[i]"+stringEncodeObject(imageControlPropsArray[a])+"[/i]"}b+="[/imageControlPropsArray][treeViewPropsArray]";for(var a=0;a<treeViewPropsArray.length;a++){b+="[i]"+stringEncodeObject(treeViewPropsArray[a])+"[/i]"}b+="[/treeViewPropsArray][calenderPropsArray]";for(var a=0;a<calenderPropsArray.length;a++){b+="[i]"+stringEncodeObject(calenderPropsArray[a])+"[/i]"}b+="[/calenderPropsArray][progressBarPropsArray]";for(var a=0;a<progressBarPropsArray.length;a++){b+="[i]"+stringEncodeObject(progressBarPropsArray[a])+"[/i]"}b+="[/progressBarPropsArray][sliderPropsArray]";for(var a=0;a<sliderPropsArray.length;a++){b+="[i]"+stringEncodeObject(sliderPropsArray[a])+"[/i]"}b+="[/sliderPropsArray][datePickerPropsArray]";for(var a=0;a<datePickerPropsArray.length;a++){b+="[i]"+stringEncodeObject(datePickerPropsArray[a])+"[/i]"}b+="[/datePickerPropsArray][panelPropsArray]";for(var a=0;a<panelPropsArray.length;a++){b+="[i]"+stringEncodeObject(panelPropsArray[a])+"[/i]"}b+="[/panelPropsArray][barGraphsPropsArray]";for(var a=0;a<barGraphsPropsArray.length;a++){b+="[i]"+stringEncodeObject(barGraphsPropsArray[a])+"[/i]"}b+="[/barGraphsPropsArray][pieChartsPropsArray]";for(var a=0;a<pieChartsPropsArray.length;a++){b+="[i]"+stringEncodeObject(pieChartsPropsArray[a])+"[/i]"}b+="[/pieChartsPropsArray][lineGraphsPropsArray]";for(var a=0;a<lineGraphsPropsArray.length;a++){b+="[i]"+stringEncodeObject(lineGraphsPropsArray[a])+"[/i]"}b+="[/lineGraphsPropsArray][gaugeChartPropsArray]";for(var a=0;a<gaugeChartPropsArray.length;a++){b+="[i]"+stringEncodeObject(gaugeChartPropsArray[a])+"[/i]"}b+="[/gaugeChartPropsArray][radarGraphPropsArray]";for(var a=0;a<radarGraphPropsArray.length;a++){b+="[i]"+stringEncodeObject(radarGraphPropsArray[a])+"[/i]"}b+="[/radarGraphPropsArray][lineAreaGraphPropsArray]";for(var a=0;a<lineAreaGraphPropsArray.length;a++){b+="[i]"+stringEncodeObject(lineAreaGraphPropsArray[a])+"[/i]"}b+="[/lineAreaGraphPropsArray][candlesticksGraphPropsArray]";for(var a=0;a<candlesticksGraphPropsArray.length;a++){b+="[i]"+stringEncodeObject(candlesticksGraphPropsArray[a])+"[/i]"}b+="[/candlesticksGraphPropsArray][doughnutChartPropsArray]";for(var a=0;a<doughnutChartPropsArray.length;a++){b+="[i]"+stringEncodeObject(doughnutChartPropsArray[a])+"[/i]"}b+="[/doughnutChartPropsArray][barsMixedWithLabledLineGraphsPropsArray]";for(var a=0;a<barsMixedWithLabledLineGraphsPropsArray.length;a++){b+="[i]"+stringEncodeObject(barsMixedWithLabledLineGraphsPropsArray[a])+"[/i]"}b+="[/barsMixedWithLabledLineGraphsPropsArray][stackedBarGraphPropsArray]";for(var a=0;a<stackedBarGraphPropsArray.length;a++){b+="[i]"+stringEncodeObject(stackedBarGraphPropsArray[a])+"[/i]"}b+="[/stackedBarGraphPropsArray][tabPropsArray]";for(var a=0;a<tabPropsArray.length;a++){b+="[i]"+stringEncodeObject(tabPropsArray[a])+"[/i]"}b+="[/tabPropsArray][imageMapPropsArray]";for(var a=0;a<imageMapPropsArray.length;a++){b+="[i]"+stringEncodeObject(imageMapPropsArray[a])+"[/i]"}b+="[/imageMapPropsArray][menuBarPropsArray]";for(var a=0;a<menuBarPropsArray.length;a++){b+="[i]"+stringEncodeObject(menuBarPropsArray[a])+"[/i]"}b+="[/menuBarPropsArray][subMenuBarPropsArray]";for(var a=0;a<subMenuBarPropsArray.length;a++){b+="[i]"+stringEncodeObject(subMenuBarPropsArray[a])+"[/i]"}b+="[/subMenuBarPropsArray][textBoxPropsArray]";for(var a=0;a<textBoxPropsArray.length;a++){b+="[i]"+stringEncodeObject(textBoxPropsArray[a])+"[/i]"}b+="[/textBoxPropsArray][imageFaderPropsArray]";for(var a=0;a<imageFaderPropsArray.length;a++){b+="[i]"+stringEncodeObject(imageFaderPropsArray[a])+"[/i]"}b+="[/imageFaderPropsArray][imageSliderPropsArray]";for(var a=0;a<imageSliderPropsArray.length;a++){b+="[i]"+stringEncodeObject(imageSliderPropsArray[a])+"[/i]"}b+="[/imageSliderPropsArray][multiLineLabelPropsArray]";for(var a=0;a<multiLineLabelPropsArray.length;a++){b+="[i]"+stringEncodeObject(multiLineLabelPropsArray[a])+"[/i]"}b+="[/multiLineLabelPropsArray][wordProcessorPropsArray]";for(var a=0;a<wordProcessorPropsArray.length;a++){b+="[i]"+stringEncodeObject(wordProcessorPropsArray[a])+"[/i]"}b+="[/wordProcessorPropsArray][virtualKeyboardPropsArray]";for(var a=0;a<virtualKeyboardPropsArray.length;a++){b+="[i]"+stringEncodeObject(virtualKeyboardPropsArray[a])+"[/i]"}b+="[/virtualKeyboardPropsArray][splitterPropsArray]";for(var a=0;a<splitterPropsArray.length;a++){b+="[i]"+stringEncodeObject(splitterPropsArray[a])+"[/i]"}b+="[/splitterPropsArray][boundaryFillableMapPropsArray]";for(var a=0;a<boundaryFillableMapPropsArray.length;a++){b+="[i]"+stringEncodeObject(boundaryFillableMapPropsArray[a])+"[/i]"}b+="[/boundaryFillableMapPropsArray][simpleXMLViewerPropsArray]";for(var a=0;a<simpleXMLViewerPropsArray.length;a++){b+="[i]"+stringEncodeObject(simpleXMLViewerPropsArray[a])+"[/i]"}b+="[/simpleXMLViewerPropsArray][votingPropsArray]";for(var a=0;a<votingPropsArray.length;a++){b+="[i]"+stringEncodeObject(votingPropsArray[a])+"[/i]"}b+="[/votingPropsArray]";return b}var savedImagesOnPostback=new Array();var currentSavedImagesOnPostbackWindowID;var currentSavedImagesOnPostbackCanvasID;var savedFunctionsOnPostback=new Array();var savedDrawingCanvas=new Array();var savedDrawingCanvasCtx=new Array();var savedImageArrayOnPostback=new Array();var savedArrayFunctionsOnPostback=new Array();function stringEncodeObject(d){var c="";var e="";for(var a in d){if(d[a]!=null){if(d[a]&&typeof d[a]=="function"){savedFunctionsOnPostback.push({CanvasID:currentSavedImagesOnPostbackCanvasID,WindowID:currentSavedImagesOnPostbackWindowID,FunctionValue:d[a],PropertyName:a});continue}if(typeof d[a]==="string"||typeof d[a]==="number"){if(a=="WindowID"){currentSavedImagesOnPostbackWindowID=d[a].toString()}if(a=="CanvasID"){currentSavedImagesOnPostbackCanvasID=d[a].toString()}e+="["+a+"]"+encodeAllBrackets(d[a].toString())+"[/"+a+"]"}else{if(d[a] instanceof Array){e+="["+a+"][Array]";for(var b=0;b<d[a].length;b++){if(d[a]!=null){if(d[a][b]&&typeof d[a][b]=="function"){savedArrayFunctionsOnPostback.push({CanvasID:currentSavedImagesOnPostbackCanvasID,WindowID:currentSavedImagesOnPostbackWindowID,Index:b.toString(),Function:d[a][b]});continue}if(typeof d[a][b]==="string"||typeof d[a][b]==="number"){e+="[i]"+encodeAllBrackets(d[a][b].toString())+"[/i]"}else{if(d[a][b] instanceof Array){e+="[i]"+encodeArray(d[a][b],(c&&c.length>0?c+","+b.toString():b.toString()))+"[/i]"}else{if(typeof d[a]==="object"){e+="[i]"+stringEncodeValueObject(d[a][b])+"[/i]"}}}}else{e+="[i][/i]"}}e+="[/Array][/"+a+"]"}else{if(typeof d[a]==="object"){e+="["+a+"]"+stringEncodeValueObject(d[a])+"[/"+a+"]"}}}}}return e}function encodeAllBrackets(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/\[/g,"&lb;");a=a.replace(/\]/g,"&rb;");return a.replace(/>/g,"&gt;")}function encodeArray(a,c){var d="[Array]";for(var b=0;b<a.length;b++){if(a[b]!=null){if(a[b]&&typeof a[b]=="function"){savedArrayFunctionsOnPostback.push({CanvasID:currentSavedImagesOnPostbackCanvasID,WindowID:currentSavedImagesOnPostbackWindowID,Index:(c&&c.length>0?c+","+b.toString():b.toString()),Function:a[b]});continue}if(typeof a[b]==="string"||typeof a[b]==="number"){d+="[i]"+encodeAllBrackets(a[b].toString())+"[/i]"}else{if(a[b] instanceof Array){d+="[i]"+encodeArray(a[b],(c&&c.length>0?c+","+b.toString():b.toString()))+"[/i]"}else{if(typeof a[b]==="object"){d+="[i]"+stringEncodeValueObject(a[b])+"[/i]"}}}}else{d+="[i][/i]"}}return d+"[/Array]"}function stringEncodeValueObject(b){var c="[ObjectArray]";for(var a in b){if(b[a]!=null&&a!="TreeviewNodeInstancesParentNode"&&a!="TreeviewNodeInstancesRootNodes"&&a!="TreeviewClickLabelExtentsNode"){if(b[a] instanceof Array&&b[a].length>0){c+="["+a+"]"+encodeArray(b[a])+"[/"+a+"]"}else{if(typeof b[a]==="string"||typeof b[a]==="number"){c+="["+a+"]"+encodeAllBrackets(b[a].toString())+"[/"+a+"]"}else{if(typeof b[a]==="object"&&!b[a] instanceof Array){c+="["+a+"]"+stringEncodeValueObject(b[a])+"[/"+a+"]"}}}}else{if(b[a]==null){c+="["+a+"][/"+a+"]"}}}return c+"[/ObjectArray]"}function rectifyNullFunctions(a){if(a.length==6){a.splice(5,0,null)}if(a.length>=7&&a[6]!=null){for(var b=0;b<a[6].length;b++){if(typeof a[6][b][5]!="function"&&typeof a[6][b][5]=="object"){a[6][b].splice(5,0,null);rectifyNullFunctions(a[6][b][6])}}}else{if(a.length==6){a.push(null)}}}function UnWrapVars(data){var xmlDoc=null;data=data.replace(/\[/g,"<");data=data.replace(/\]/g,">");data=data.replace(/[&]lb[;]/g,"[");data=data.replace(/[&]rb[;]/g,"]");if(window.DOMParser){var parser=new DOMParser();xmlDoc=parser.parseFromString(data,"text/xml");for(var i=0;i<xmlDoc.firstChild.childNodes[0].childNodes.length;i++){eval(xmlDoc.firstChild.childNodes[0].childNodes[i].nodeName+" = new Array();");for(var x=0;x<xmlDoc.firstChild.childNodes[0].childNodes[i].childNodes.length;x++){var obj=new Object();recurseFillVars(xmlDoc.firstChild.childNodes[0].childNodes[i].childNodes[x],obj);eval(xmlDoc.firstChild.childNodes[0].childNodes[i].nodeName+".push(obj);")}}}for(var i=0;i<savedArrayFunctionsOnPostback.length;i++){for(var j=0;j<menuBarPropsArray.length;j++){if(savedArrayFunctionsOnPostback[i].CanvasID==menuBarPropsArray[j].CanvasID&&savedArrayFunctionsOnPostback[i].WindowID==menuBarPropsArray[j].WindowID){var arrayIndexes=savedArrayFunctionsOnPostback[i].Index.split(",");var dataptr=menuBarPropsArray[j].Data;for(var x=0;x<arrayIndexes.length-1;x++){dataptr=dataptr[dataptr.length-1>arrayIndexes[x]?arrayIndexes[x]:dataptr.length-1]}dataptr.splice(arrayIndexes[arrayIndexes.length-1],0,savedArrayFunctionsOnPostback[i].Function)}}}for(var j=0;j<menuBarPropsArray.length;j++){for(var k=0;k<menuBarPropsArray[j].Data.length;k++){rectifyNullFunctions(menuBarPropsArray[j].Data[k])}}for(var i=0;i<subMenuBarPropsArray.length;i++){for(var j=0;j<menuBarPropsArray.length;j++){for(var c=0;c<menuBarPropsArray[j].ChildMenuWindowIDs.length;c++){if(subMenuBarPropsArray[i].WindowID==menuBarPropsArray[j].ChildMenuWindowIDs[c]&&subMenuBarPropsArray[i].CanvasID==menuBarPropsArray[j].CanvasID){var x=0;for(var k=0;k<menuBarPropsArray[j].Data.length;k++){if(menuBarPropsArray[j].Data[k][6]!=null){if(x==c){subMenuBarPropsArray[i].Data=menuBarPropsArray[j].Data[k][6]}x++}}}}}}for(var i=0;i<menuBarPropsArray.length;i++){for(var c=0;menuBarPropsArray[i].ChildMenuWindowIDs&&c<menuBarPropsArray[i].ChildMenuWindowIDs.length;c++){for(var k=0;k<subMenuBarPropsArray.length;k++){if(subMenuBarPropsArray[k].CanvasID==menuBarPropsArray[i].CanvasID&&subMenuBarPropsArray[k].WindowID==menuBarPropsArray[i].ChildMenuWindowIDs[c]){for(var m=0;m<subMenuBarPropsArray[k].ChildMenuWindowIDs.length;m++){for(var j=0;j<subMenuBarPropsArray.length;j++){if(subMenuBarPropsArray[j].CanvasID==subMenuBarPropsArray[k].CanvasID&&subMenuBarPropsArray[j].WindowID==subMenuBarPropsArray[k].ChildMenuWindowIDs[m]){var x=0;for(var u=0;u<subMenuBarPropsArray[k].Data.length;u++){if(subMenuBarPropsArray[k].Data[u][6]!=null){if(x==m){subMenuBarPropsArray[j].Data=subMenuBarPropsArray[k].Data[u][6]}x++}}}}}}}}}for(var i=0;i<savedFunctionsOnPostback.length;i++){var o=getLabelProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getButtonProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getScrollBarProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getGridProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getComboboxPropsByTextAreaWindowId(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getcheckboxProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getRadioButtonProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getImageControlProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getTreeViewProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getCalenderProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getSliderProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getDatePickerPropsByTextBoxAreaWindowID(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getPanelProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getBarGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getPieChartProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getLineGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getGaugeChartProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getRadarGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getLineAreaGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getCandlesticksGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getDoughnutChartProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getBarsMixedWithLabledLineGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getstackedBarGraphProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getTabProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getImageMapProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getMenuBarProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getSubMenuBarProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getTextBoxProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getVirtualKeyboardProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getSplitterProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}var o=getSimpleXMLViewerProps(savedFunctionsOnPostback[i].CanvasID,savedFunctionsOnPostback[i].WindowID);if(setSavedFunctionOnPostback(o,savedFunctionsOnPostback,i)==1){continue}}return getParameters(xmlDoc.firstChild.childNodes[1].childNodes[0].childNodes)}function getParameters(b){var a=new Array();for(var c=0;c<b.length;c++){if(b[c].nodeName=="Array"){a.push(getParameters(b[c].childNodes))}else{a.push(correctValueTypes(b[c].childNodes.length>0?b[c].childNodes[0].nodeValue:b[c].nodeValue))}}return a}function setSavedFunctionOnPostback(c,a,b){if(c!=null){c[a[b].PropertyName]=a[b].FunctionValue;return 1}return 0}function recurseFillVars(e,f){for(var d=0;d<e.childNodes.length;d++){if(e.childNodes[d].childNodes.length>0&&e.childNodes[d].childNodes[0].nodeName=="Array"){var b=new Array();f[e.childNodes[d].nodeName]=b;for(var a=0;a<e.childNodes[d].childNodes[0].childNodes.length;a++){if(e.childNodes[d].childNodes[0].childNodes[a].childNodes.length>0&&e.childNodes[d].childNodes[0].childNodes[a].childNodes[0].nodeName=="Array"){var c=new Array();recurseFillArray(c,e.childNodes[d].childNodes[0].childNodes[a].childNodes[0]);b.push(c)}else{if(e.childNodes[d].childNodes[0].childNodes[a].childNodes.length>0&&e.childNodes[d].childNodes[0].childNodes[a].childNodes[0].nodeName=="ObjectArray"){b.push(FillObjectArrayValues(e.childNodes[d].childNodes[0].childNodes[a]))}else{b.push(correctValueTypes(e.childNodes[d].childNodes[0].childNodes[a].childNodes.length>0?e.childNodes[d].childNodes[0].childNodes[a].childNodes[0].nodeValue:e.childNodes[d].childNodes[0].childNodes[a].nodeValue))}}}}else{if(e.childNodes[d].childNodes.length>0&&e.childNodes[d].childNodes[0].nodeName=="ObjectArray"){f[e.childNodes[d].nodeName]=FillObjectArrayValues(e.childNodes[d].childNodes[0])}else{f[e.childNodes[d].nodeName]=correctValueTypes(e.childNodes[d].childNodes.length>0?e.childNodes[d].childNodes[0].nodeValue:e.childNodes[d].nodeValue)}}}}function FillObjectArrayValues(d){var c={};for(var e=0;e<d.childNodes.length;e++){if(d.childNodes[e].childNodes.length>0&&d.childNodes[e].childNodes[0].nodeValue=="Array"){var a=new Array();for(var b=0;b<d.childNodes[e].childNodes[0].childNodes.length;b++){recurseFillArray(a,d.childNodes[e].childNodes[0].childNodes[b])}c[d.childNodes[e].nodeName]=a}else{if(d.childNodes[e].childNodes.length>0&&d.childNodes[e].childNodes[0].nodeValue=="ObjectArray"){c[d.childNodes[e].nodeName]=FillObjectArrayValues(d.childNodes[e].childNodes[0])}else{c[d.childNodes[e].nodeName]=correctValueTypes(d.childNodes[e].childNodes.length>0?d.childNodes[e].childNodes[0].nodeValue:d.childNodes[e].nodeValue)}}}return c}function correctValueTypes(a){if(!a){return null}if(typeof a=="string"&&(parseInt(a)>=0||parseInt(a)<0)&&parseInt(a).toString()==a){return parseInt(a)}else{if(typeof a=="string"&&(parseFloat(a)>=0||parseFloat(a)<0)&&parseFloat(a).toString()==a){return parseFloat(a)}else{if(typeof a=="string"){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}}}return a}function recurseFillArray(b,e){for(var d=0;d<e.childNodes.length;d++){if(e.childNodes[d].childNodes.length>0&&e.childNodes[d].nodeName=="Array"){var c=new Array();for(var a=0;a<e.childNodes[d].childNodes.length;a++){recurseFillArray(c,e.childNodes[d].childNodes[a])}b.push(c)}else{if(e.childNodes[d].childNodes.length>0&&e.childNodes[d].childNodes[0].nodeName=="Array"){var c=new Array();for(var a=0;a<e.childNodes[d].childNodes[0].childNodes.length;a++){recurseFillArray(c,e.childNodes[d].childNodes[0].childNodes[a])}b.push(c)}else{if(e.childNodes[d].childNodes.length>0&&e.childNodes[d].nodeName=="ObjectArray"){b.push(FillObjectArrayValues(e.childNodes[d]))}else{b.push(correctValueTypes(e.childNodes[d].childNodes.length>0?e.childNodes[d].childNodes[0].nodeValue:e.childNodes[d].nodeValue))}}}}};